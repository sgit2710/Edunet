"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_diff-file-header_diff-file-header_ts-ui_packages_diff-file-tree_diff-file-tree_ts-7f5a83","ui_packages_file-renderer-blob_FileRendererBlob_tsx"],{30365:(e,t,i)=>{i.d(t,{A:()=>n});let n={commentIndicatorContainer:"CommentIndicator-module__commentIndicatorContainer--L8lU3"}},51110:(e,t,i)=>{i.d(t,{A:()=>n});let n={visibilityHidden:"DiffFindPopover-module__visibilityHidden--HCMWu",visibilityVisible:"DiffFindPopover-module__visibilityVisible--AknNV",defaultStyles:"DiffFindPopover-module__defaultStyles--IjqxB",stickyStyles:"DiffFindPopover-module__stickyStyles--oNP5J",notStickyStyles:"DiffFindPopover-module__notStickyStyles--_E6rW"}},73771:(e,t,i)=>{i.d(t,{A:()=>n});let n={visibilityHidden:"DiffHighlightedOverlay-module__visibilityHidden--v59uf",visibilityVisible:"DiffHighlightedOverlay-module__visibilityVisible--zJWJ5",userSelectNone:"DiffHighlightedOverlay-module__userSelectNone--i39lB",focusedResultStyles:"DiffHighlightedOverlay-module__focusedResultStyles--QZMIm",nonFocusedResultStyles:"DiffHighlightedOverlay-module__nonFocusedResultStyles--x2N7d",nonHunkStyles:"DiffHighlightedOverlay-module__nonHunkStyles--_dJlQ"}},13641:(e,t,i)=>{i.d(t,{A:()=>n});let n={tableLayoutFixed:"DiffLines-module__tableLayoutFixed--YZcIJ"}},54283:(e,t,i)=>{i.d(t,{A:()=>n});let n={"expand-button-line":"ExpandableHunkHeaderDiffLine-module__expand-button-line--rnQN5","expand-up-and-down":"ExpandableHunkHeaderDiffLine-module__expand-up-and-down--hCan_"}},98396:(e,t,i)=>{i.d(t,{A:()=>n});let n={gridColumnTemplate:"HiddenDiffPatch-module__gridColumnTemplate--3bEGq"}},60384:(e,t,i)=>{i.d(t,{A:()=>n});let n={overlay:"SelectedDiffLinesOverlay-module__overlay--mWvvK",overlayOpacity:"SelectedDiffLinesOverlay-module__overlayOpacity--B9iKM"}},6614:(e,t,i)=>{i.d(t,{M:()=>n});function n(e){if(null==e)throw Error("Failed to load page data.")}},44819:(e,t,i)=>{i.d(t,{V3:()=>d,_y:()=>s,wk:()=>o});var n=i(6978),r=i(43490);let l={cursorNavigationHopWordLeft:{hotkey:"Alt+ArrowLeft,Ctrl+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationHopWordRight:{hotkey:"Alt+ArrowRight,Ctrl+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationTopOfPage:{hotkey:"Meta+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationBottomOfPage:{hotkey:"Meta+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationEnd:{hotkey:"End,Meta+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["End"]},cursorNavigationHome:{hotkey:"Home,Meta+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["Home"]},cursorNavigationPageUp:{hotkey:"PageUp",useWhileBlobFocused:!0,noModifierHotkey:["PageUp"]},cursorNavigationPageDown:{hotkey:"PageDown",useWhileBlobFocused:!0,noModifierHotkey:["PageDown"]},cursorNavigationArrowDown:{hotkey:"ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"]},cursorNavigationArrowUp:{hotkey:"ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"]},cursorNavigationArrowLeft:{hotkey:"ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"]},cursorNavigationArrowRight:{hotkey:"ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"]},cursorNavigationShiftHopWordLeft:{hotkey:"Alt+Shift+ArrowLeft,Ctrl+Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationShiftHopWordRight:{hotkey:"Alt+Shift+ArrowRight,Ctrl+Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationShiftTopOfPage:{hotkey:"Meta+Shift+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationShiftBottomOfPage:{hotkey:"Meta+Shift+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationShiftEnd:{hotkey:"Shift+End,Meta+Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["End"],modifierRequired:!0},cursorNavigationShiftHome:{hotkey:"Shift+Home,Meta+Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["Home"],modifierRequired:!0},cursorNavigationShiftPageUp:{hotkey:"Shift+PageUp",useWhileBlobFocused:!0,noModifierHotkey:["PageUp"],modifierRequired:!0},cursorNavigationShiftPageDown:{hotkey:"Shift+PageDown",useWhileBlobFocused:!0,noModifierHotkey:["PageDown"],modifierRequired:!0},cursorNavigationShiftArrowDown:{hotkey:"Shift+ArrowDown",useWhileBlobFocused:!0,noModifierHotkey:["ArrowDown"],modifierRequired:!0},cursorNavigationShiftArrowUp:{hotkey:"Shift+ArrowUp",useWhileBlobFocused:!0,noModifierHotkey:["ArrowUp"],modifierRequired:!0},cursorNavigationShiftArrowLeft:{hotkey:"Shift+ArrowLeft",useWhileBlobFocused:!0,noModifierHotkey:["ArrowLeft"],modifierRequired:!0},cursorNavigationShiftArrowRight:{hotkey:"Shift+ArrowRight",useWhileBlobFocused:!0,noModifierHotkey:["ArrowRight"],modifierRequired:!0},cursorNavigationHighlightLine:{text:"J",hotkey:"Shift+J",useWhileBlobFocused:!0,noModifierHotkey:["J"],modifierRequired:!0},cursorNavigationGoLineUp:{hotkey:"Ctrl+p",useWhileBlobFocused:!0,noModifierHotkey:["p"],modifierRequired:!0},cursorNavigationOpenHelpDialog:{hotkey:"Alt+F1,Control+Alt+\u02D9,Control+Alt+h",useWhileBlobFocused:!0,noModifierHotkey:["F1","h","\u02D9"],modifierRequired:!0},cursorNavigationGoLineDown:{hotkey:"Ctrl+n",useWhileBlobFocused:!0,noModifierHotkey:["n"],modifierRequired:!0},cursorNavigationEnter:{text:"\u2318 Enter",hotkey:"Meta+Enter",useWhileBlobFocused:!0,noModifierHotkey:["Enter"],modifierRequired:!0},cursorNavigationSpace:{hotkey:" ",useWhileBlobFocused:!0,noModifierHotkey:[" "],modifierRequired:!1},cursorNavigationShiftSpace:{hotkey:"Shift+ ",useWhileBlobFocused:!0,noModifierHotkey:[" "],modifierRequired:!0},expandAndFocusLineContextMenu:{text:"Shift Alt C",hotkey:"Alt+Shift+C,Alt+Shift+\xc7",useWhileBlobFocused:!0,noModifierHotkey:["C"],modifierRequired:!0},copyFilePathShortcut:{text:"\u2318 shift .",hotkey:"Meta+Shift+>",useWhileBlobFocused:!0,noModifierHotkey:["."],modifierRequired:!0},copyPermalinkShortcut:{text:"\u2318 shift ,",hotkey:"Meta+Shift+<",useWhileBlobFocused:!0,noModifierHotkey:[","],modifierRequired:!0},copyRawContentShortcut:{text:"\u2318 shift c",hotkey:"Meta+Shift+C",useWhileBlobFocused:!0,noModifierHotkey:["c"],modifierRequired:!0},downloadRawContentShortcut:{text:"\u2318 shift s",hotkey:"Meta+Shift+S",useWhileBlobFocused:!0,noModifierHotkey:["s"],modifierRequired:!0},editFileShortcut:{hotkey:"e,Shift+E",useWhileBlobFocused:!0,noModifierHotkey:["e","E"]},goToLineShortcut:{text:"l",hotkey:"l,Shift+L",ariaKeyShortcuts:"l",useWhileBlobFocused:!0,noModifierHotkey:["l","L"]},alternativeGoToLineShortcut:{hotkey:"Mod+Alt+g",ariaKeyShortcuts:"Mod+Alt+g",useWhileBlobFocused:!0,noModifierHotkey:["g","G"]},findInFileShortcut:{hotkey:"Meta+f, F3",text:"\u2318 f",ariaKeyShortcuts:"Meta+F",useWhileBlobFocused:!0,noModifierHotkey:["f","F3"],modifierRequired:!0},findFilesShortcut:{hotkey:"t,Shift+T",useWhileBlobFocused:!0,noModifierHotkey:["t","T"]},findSelectionShortcut:{hotkey:"Meta+e",useWhileBlobFocused:!0,noModifierHotkey:["e"],modifierRequired:!0},findNextShortcut:{hotkey:"Mod+g"},findPrevShortcut:{hotkey:"Mod+Shift+G"},openWithGitHubDevShortcut:{hotkey:"., Meta+Shift+/",useWhileBlobFocused:!0,noModifierHotkey:["."]},openWithGitHubDevInNewWindowShortcut:{hotkey:"Shift+.,Shift+>,>",useWhileBlobFocused:!0,noModifierHotkey:[">"]},permalinkShortcut:{hotkey:"y,Shift+Y",useWhileBlobFocused:!0,noModifierHotkey:["y","Y"]},searchShortcut:{hotkey:"/",useWhileBlobFocused:!0,noModifierHotkey:["/"]},selectAllShortcut:{hotkey:"Meta+a",useWhileBlobFocused:!0,noModifierHotkey:["a"],modifierRequired:!0},selectEditTabShortcut:{hotkey:"Mod+Shift+P"},submitCommitDialogShortcut:{hotkey:"Mod+Enter"},refSelectorShortcut:{hotkey:"w",text:"w",useWhileBlobFocused:!0,noModifierHotkey:["w"]},escapeRightClickMenu:{hotkey:"Escape",useWhileBlobFocused:!0,noModifierHotkey:["Escape"]},toggleFocusedPaneShortcut:{hotkey:"Meta+F6,Meta+Shift+F6",useWhileBlobFocused:!0,noModifierHotkey:["F6"],modifierRequired:!0},toggleSymbolsShortcut:{hotkey:"Meta+i",useWhileBlobFocused:!0,noModifierHotkey:["i"],modifierRequired:!0},toggleTreeShortcut:{hotkey:"Meta+b",useWhileBlobFocused:!0,noModifierHotkey:["b"],modifierRequired:!0},viewBlameShortcut:{hotkey:"b,Shift+B,Meta+/ Meta+b",useWhileBlobFocused:!0,noModifierHotkey:["b"]},viewCodeShortcut:{hotkey:"Meta+/ Meta+c",useWhileBlobFocused:!0,modifierRequired:!0},viewPreviewShortcut:{hotkey:"Meta+/ Meta+p"},viewRawContentShortcut:{text:"\u2318 / \u2318 r",hotkey:"Meta+/ Meta+r",useWhileBlobFocused:!0,noModifierHotkey:["r"],modifierRequired:!0},findSymbolShortcut:{hotkey:"r,Shift+R",useWhileBlobFocused:!0,noModifierHotkey:["r","R"],modifierRequired:!1}},a=new Map;function o(){let e=(0,r.X)(["mac"]),[t]=(0,n.I)(()=>!1,!0,[]),i=0;if(e?i=1:t||(i=2),!a.has(i)){var o,s;let n=l;e||t||(n=Object.keys(o=n).reduce((e,t)=>{let i=o[t];return e[t]={hotkey:i.hotkey?.replace(/Meta/g,"Control"),text:i.text?.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift"),ariaKeyShortcuts:i.ariaKeyShortcuts?.replace(/Meta/g,"Control"),useWhileBlobFocused:i.useWhileBlobFocused,modifierRequired:i.modifierRequired,noModifierHotkey:i.noModifierHotkey},e},{})),t&&(n=Object.keys(s=n).reduce((e,t)=>{let i=s[t];return e[t]={hotkey:void 0,text:i.text?.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift"),ariaKeyShortcuts:i.ariaKeyShortcuts?.replace(/Meta/g,"Control"),useWhileBlobFocused:i.useWhileBlobFocused,modifierRequired:i.modifierRequired,noModifierHotkey:i.noModifierHotkey},e},{})),a.set(i,n)}return a.get(i)}function s(){let e=o();return Object.keys(e).reduce((t,i)=>{let n=e[i];if(n.useWhileBlobFocused&&n.noModifierHotkey&&n.modifierRequired)for(let e of n.noModifierHotkey)t.includes(e)||t.push(e);return t},[])}function d(){let e=o();return Object.keys(e).reduce((t,i)=>{let n=e[i];if(n.useWhileBlobFocused&&n.noModifierHotkey&&!n.modifierRequired)for(let e of n.noModifierHotkey)t.includes(e)||t.push(e);return t},[])}},60333:(e,t,i)=>{i.d(t,{z:()=>WebWorker});let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){try{this.worker=new Worker(e)}catch(e){console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};let MainThreadWorker=class MainThreadWorker{async postMessage(e){if(this.terminated)return;let t={data:this.job({data:e})};this.onmessage?.(t)}terminate(){this.terminated=!0}constructor(e){this.job=e,this.terminated=!1}}},89069:(e,t,i)=>{i.d(t,{N:()=>DebouncedWorkerManager});let DebouncedWorkerManager=class DebouncedWorkerManager{post(e){if(this.debounceOverrideCondition&&this.debounceOverrideCondition(e))return this.delayId&&clearTimeout(this.delayId),this.postNow(e);this.idle()?(this.delayId&&clearTimeout(this.delayId),this.delayId=setTimeout(()=>{this.postNow(e)},this.delayMs)):this.nextRequest=e}postNow(e){this.currentRequest=e,this.worker.postMessage(e)}idle(){return!this.currentRequest}terminate(){this.worker.terminate()}constructor(e,t=200,i){this.worker=e,this.delayMs=t,this.debounceOverrideCondition=i,this.currentRequest=void 0,this.nextRequest=void 0,this.worker.onmessage=({data:e})=>{this.onResponse&&this.onResponse(e),this.nextRequest?(this.postNow(this.nextRequest),this.nextRequest=void 0):this.currentRequest=void 0}}}},38666:(e,t,i)=>{i.d(t,{$S:()=>n.$,H1:()=>a.H,L4:()=>u.L,Su:()=>r.S,UA:()=>o.U,c7:()=>l.c,cT:()=>s.c,i4:()=>d.i,uo:()=>c.u}),i(76971);var n=i(43795),r=i(48867),l=i(29979),a=i(23032),o=i(93249),s=i(54015),d=i(13831),c=i(99803),u=i(69583);i(40376),i(91151)},72295:(e,t,i)=>{i.d(t,{p:()=>n});function n(e,t="r"){history.replaceState(null,"",`#${t}${e}`)}},69583:(e,t,i)=>{i.d(t,{L:()=>d});var n=i(55202),r=i(96540);let{getItem:l,removeItem:a,setItem:o}=(0,n.D)("localStorage"),s=(e,t)=>{let{diffSide:i,filePath:n,line:r,subjectId:l}=e;if(t)return`PullRequest:${l}-File:${n}`;if(void 0!==r&&void 0!==i)return`PullRequest:${l}-File:${n}-Line:${r}-DiffSide:${i}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function d({diffSide:e,filePath:t,handlePersistedCommentExists:i,line:n,subjectId:d,threadId:c,fileLevelComment:u}){let f,h;let m=(0,r.useMemo)(()=>c||(c??s({diffSide:e,filePath:t,line:n,subjectId:d},u)),[e,t,n,d,c,u]),{hasPersistedComment:g,removePersistedCommentFromStorage:p}=(f=l(m),h=!!f?.text?.trim(),(0,r.useEffect)(()=>{h&&i?.(f)},[h]),{hasPersistedComment:h,removePersistedCommentFromStorage:()=>{a(m),h=!1,f=null}});return{hasPersistedComment:g,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),o(m,t)},removePersistedCommentFromStorage:p}}},79441:(e,t,i)=>{function n(e,t){return t.some(t=>r(t,e))}function r(e,t){return e.commentId===t.commentId&&e.path===t.path&&e.suggestion.length===t.suggestion.length&&l(e.suggestion,t.suggestion)}i.d(t,{EJ:()=>s,Lm:()=>d,c0:()=>n,o_:()=>o,yM:()=>r});let l=(e,t)=>e.length===t.length&&!e.some((e,i)=>e!==t[i]),a={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function o({suggestedChange:e,isOutdated:t,isPending:i,isResolved:n,pullRequestIsClosed:r,pullRequestIsInMergeQueue:l,userCanApplySuggestion:o,applySuggestedChangesValidationData:s,suggestedChangesConfig:d}){let{lineRange:c}=s;if(t)return{isValid:!1,reason:a.IS_OUTDATED};if(i)return{isValid:!1,reason:a.IS_PENDING};if(n)return{isValid:!1,reason:a.IS_RESOLVED};if(r)return{isValid:!1,reason:a.PULL_REQUEST_IS_CLOSED};if(l)return{isValid:!1,reason:a.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!o)return{isValid:!1,reason:a.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:a.RANGE_NOT_PROVIDED};if(!d)return{isValid:!1,reason:a.UNABLE_TO_DETERMINE_VALIDITY};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:a.DELETED_LINES};let u=d?.sourceContentFromDiffLines,f=e.suggestion.join("\n");return 0!==e.suggestion.length&&f===u?{isValid:!1,reason:a.UNCHANGED_CODE}:{isValid:!0}}function s(e,t){let i={isValid:!1,reason:a.INVALID_RANGE},n={isValid:!1,reason:a.BATCH_TOO_BIG};return t.length>=50?n:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let r of t)if(e.path===r.path){var i,n;return i=e.lineRange,n=r.lineRange,i.endLineNumber>=n.startLineNumber&&i.startLineNumber<=n.endLineNumber}return!1}(e,t)?i:{isValid:!0}}function d(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let i=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:i,startOrientation:t||"RIGHT"}}},40376:(e,t,i)=>{var n=i(33132);i(91151),n.l,n.l,n.l,n.l,n.l,n.l,n.l,n.l,n.l,n.l,n.l,n.l,n.l,n.l,n.l},91151:(e,t,i)=>{var n;i.d(t,{U:()=>n}),function(e){e.Failure="FAILURE",e.Notice="NOTICE",e.Warning="WARNING"}(n||(n={}))},99965:(e,t,i)=>{i.d(t,{e:()=>n});function n(){document.querySelector('#__primerPortalRoot__ div[role="dialog"]')&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}},82047:(e,t,i)=>{function n(e,t){for(let i of function e(t,i=[]){if(""===t)return i;let n=t.match(r());if(!n)return i;let l=n.groups.fence;if(!l)return i;let a=l.includes("~")?"~":"`",o=t.match(function(e,t){let i=r([e],t);return RegExp(`${i.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(a,l.length));if(!o)return i;let s=0,d=n.groups.indent;""!==d&&(s=d.length);let c=o.groups.suggestion;if(s>0){let e=RegExp(`^ {0,${s}}`,"m");c=c.replace(e,"")}return i.push(c),e(t.slice(o.index+o[0].length),i)}(e))if(i===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function r(e=["`","~"],t){let i=t?`{${t}}`:"{3,}",n=e.map(e=>`${e}${i}`);return RegExp(`^(?<indent> {0,3})(?<fence>${n.join("|")})suggestion[ 	]*$`,"m")}i.d(t,{u:()=>n})},98620:(e,t,i)=>{i.d(t,{HS:()=>l,Oc:()=>r,Tv:()=>s,Xr:()=>SymbolChangedEvent,f7:()=>a,fD:()=>o,qR:()=>n});let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),this.payload=e}};let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,i){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),this.reference=e,this.openPanel=t,this.id=i}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),this.context=e}};function n(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function r(e,t=!1,i){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,i))}function l(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function a(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function o(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function s(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},29020:(e,t,i)=>{i.d(t,{C6:()=>l,G7:()=>n,wh:()=>r,xP:()=>a});let n="tree-comparison",r={explain:"explain",conversation:"conversation",suggest:"suggest",askDocs:"ask-docs",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request"},l=["exception","filtered","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],a=["bing-search","codesearch","knowledge-base-search","pathsearch","show-symbol-definition","getissue","getprcommits","getcommit","getrelease","getrepo","getdiff","get-diff-by-range","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getpullrequest","getalert","planskill","get-github-data"]},49665:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let n=function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null}],storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileDiffReference_Comparison",selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:e,storageKey:null}],type:"PullRequestComparison",abstractKey:null}}();n.hash="fb70959c69497160ff44b9b0c7820e08";let r=n},66093:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let n=function(){var e={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},t=[e,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileDiffReference_DiffEntry",selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:t,storageKey:null}],type:"PullRequestDiffEntry",abstractKey:null}}();n.hash="f853615ae640634aad832da060f944cf";let r=n},98868:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let n=function(){var e={defaultValue:null,kind:"LocalArgument",name:"endOid"},t={defaultValue:null,kind:"LocalArgument",name:"pullRequestId"},i={defaultValue:null,kind:"LocalArgument",name:"startOid"},n=[{kind:"Variable",name:"id",variableName:"pullRequestId"}],r=[{kind:"Variable",name:"endOid",variableName:"endOid"},{kind:"Variable",name:"startOid",variableName:"startOid"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},a],storageKey:null},a],storageKey:null},a];return{fragment:{argumentDefinitions:[e,t,i],kind:"Fragment",metadata:null,name:"DiffChatWrapper_ComparisonQuery",selections:[{alias:"pullRequest",args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:r,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_Comparison"}],storageKey:null}],type:"PullRequest",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,i,e],kind:"Operation",name:"DiffChatWrapper_ComparisonQuery",selections:[{alias:"pullRequest",args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:r,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:o,storageKey:null}],storageKey:null}],type:"PullRequest",abstractKey:null},a],storageKey:null}]},params:{id:"fb6fd29b2f37f48929378e605adb454a",metadata:{},name:"DiffChatWrapper_ComparisonQuery",operationKind:"query",text:null}}}();n.hash="e34cdc5b305060e84f51c908a09989a0";let r=n},91586:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let n=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"diffEntryId"}],t=[{kind:"Variable",name:"id",variableName:"diffEntryId"}],i={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},n=[i,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"DiffChatWrapper_DiffEntryQuery",selections:[{alias:"diffEntry",args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_DiffEntry"}],type:"PullRequestDiffEntry",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"DiffChatWrapper_DiffEntryQuery",selections:[{alias:"diffEntry",args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:n,storageKey:null}],type:"PullRequestDiffEntry",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"7c9df64c41ef33594dd0882be84ef373",metadata:{},name:"DiffChatWrapper_DiffEntryQuery",operationKind:"query",text:null}}}();n.hash="064698bd6869b0c7d063a68d0b3666d8";let r=n},2385:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});let n=function(){var e={alias:null,args:null,kind:"ScalarField",name:"isCopilotDotcomChatEnabled",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DiffChatWrapper_ViewerQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[e],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DiffChatWrapper_ViewerQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"16bed8244ee96ad06b6638dbb86dd0ff",metadata:{},name:"DiffChatWrapper_ViewerQuery",operationKind:"query",text:null}}}();n.hash="4d1f99d4dad28f392f7ea1a3cecbcfff";let r=n},63173:(e,t,i)=>{i.d(t,{Kf:()=>s,hQ:()=>d});var n=i(96540),r=i(18312);let l=i(49665),a=i(66093),o=({oldCommit:e,newCommit:t},{oldTreeEntry:i,newTreeEntry:n,...r},l)=>{if(r.isBinary||r.isSubmodule||r.isLfsPointer||!n||(i?.size??0)>1048576||(n.size??0)>1048576)return;let a=i||!l?t.oid:l;return{type:"file-diff",id:`diff-${r.pathDigest}`,url:r.rawUrl??"",baseFile:i?{type:"file",repoID:e.repository.databaseId??0,repoName:e.repository.name,repoOwner:e.repository.owner.login,path:i.path??"",commitOID:e.oid,url:`${e.repository.url}/raw/${e.oid}/${i.path}`,ref:e.oid}:null,headFile:{type:"file",repoID:t.repository.databaseId??0,repoName:t.repository.name,repoOwner:t.repository.owner.login,path:n.path??"",commitOID:a,url:`${t.repository.url}/raw/${a}/${n.path}`,ref:a},head:null,base:null}},s=(e,t,i)=>{let s=(0,r.useFragment)(l,e),d=(0,r.useFragment)(a,t);return(0,n.useMemo)(()=>o(s,d,i),[s,d,i])},d=(e,t)=>{let i=(0,r.useFragment)(l,e);return(0,n.useMemo)(()=>o(i,t),[i,t])}},79234:(e,t,i)=>{i.d(t,{B:()=>p,C:()=>h});var n=i(74848),r=i(20053),l=i(59857),a=i(86519),o=i(30729),s=i(58081),d=i(80577),c=i(52126),u=i(9516),f=i(75177);function h({children:e,isAddition:t,sx:i}){return(0,n.jsx)(f.A,{sx:{color:t?"success.fg":"danger.fg",ml:1,fontWeight:"bold",fontSize:0,...i},children:e})}try{h.displayName||(h.displayName="LinesChangedCounterLabel")}catch{}let m={"diff-file-header":"DiffFileHeader-module__diff-file-header--TjXyn",collapsed:"DiffFileHeader-module__collapsed--FPwYM","file-name":"DiffFileHeader-module__file-name--mY1O5"};function g({newPath:e,oldPath:t,status:i}){let r=e&&e.startsWith("."),a=t&&t.startsWith("."),o=r?(0,n.jsxs)(n.Fragment,{children:["\u200E",e]}):(0,n.jsx)(n.Fragment,{children:e}),s=a?(0,n.jsxs)(n.Fragment,{children:["\u200E",t]}):(0,n.jsx)(n.Fragment,{children:t});return"RENAMED"===i?(0,n.jsxs)("code",{children:[s," ",(0,n.jsx)(l.ArrowRightIcon,{})," ",o]}):"DELETED"===i||"REMOVED"===i?(0,n.jsx)("code",{children:s}):(0,n.jsx)("code",{children:o})}function p({additionalLeftSideContent:e,areLinesExpanded:t,canExpandOrCollapseLines:i,defaultToRichDiff:f,isCollapsed:p,canToggleRichDiff:x,linesAdded:y,linesDeleted:b,fileLinkHref:C,fileLinkRef:v,newMode:N,newPath:j,oldMode:k,oldPath:L,onCopyPath:w,onHeaderClick:S,onToggleDiffDisplay:D,onToggleExpandAllLines:A,onToggleFileCollapsed:E,patchStatus:I,path:R,rightSideContent:T}){return(0,n.jsxs)("div",{className:(0,r.A)(m["diff-file-header"],p?m.collapsed:""),children:[(0,n.jsx)("button",{onClick:E,className:"Button Button--iconOnly Button--invisible flex-shrink-0","aria-label":p?`expand file: ${R}`:`collapse file: ${R}`,children:p?(0,n.jsx)(l.ChevronRightIcon,{}):(0,n.jsx)(l.ChevronDownIcon,{})}),e,(0,n.jsxs)("div",{className:"d-flex px-1 flex-items-center flex-1 overflow-hidden",children:[(0,n.jsx)("h3",{className:(0,r.A)(m["file-name"]),children:(0,n.jsx)(a.A,{className:"Link--primary",href:C,onClick:S,ref:v,children:(0,n.jsx)(g,{newPath:j,oldPath:L,status:I})})}),(0,n.jsx)(u.T,{className:"ml-1 flex-shrink-0",textToCopy:j??L??"",ariaLabel:"Copy file name to clipboard",tooltipProps:{direction:"s",anchorSide:"outside-bottom"},onCopy:w,avoidStyledComponent:!0,hasPortalTooltip:!0}),(0,c._$)(I,k,N)&&(0,n.jsxs)("div",{className:"p-2",children:[(0,n.jsx)("code",{children:k}),(0,n.jsx)(o.A,{icon:l.ArrowRightIcon,sx:{mx:1}}),(0,n.jsx)("code",{children:N})]}),i&&A&&(0,n.jsx)(d.m,{text:t?`collapse non diff lines: ${R}`:`expand all lines: ${R}`,direction:"s",children:(0,n.jsx)("button",{onClick:A,className:`Button Button--iconOnly Button--invisible flex-shrink-0 ${t?"":"js-expand-all-difflines-button"}`,"aria-label":t?`collapse non diff lines: ${R}`:`expand all lines: ${R}`,"data-file-path":R,children:p?(0,n.jsx)(l.FoldIcon,{}):(0,n.jsx)(l.UnfoldIcon,{})})})]}),(0,n.jsxs)("div",{className:"d-flex mr-2 flex-justify-end flex-1",children:[y>0&&(0,n.jsxs)(h,{isAddition:!0,children:["+",y]}),b>0&&(0,n.jsxs)(h,{isAddition:!1,children:["-",b]})]}),x&&(0,n.jsxs)(s.I,{"aria-label":"File view",size:"small",sx:{mx:2},onChange:D?e=>D(1===e):void 0,children:[(0,n.jsx)(s.I.IconButton,{"aria-label":"Display the source diff",defaultSelected:!f,icon:l.CodeIcon}),(0,n.jsx)(s.I.IconButton,{"aria-label":"Display the rich diff",defaultSelected:f,icon:l.FileIcon})]}),T]})}try{g.displayName||(g.displayName="FileName")}catch{}try{p.displayName||(p.displayName="DiffFileHeader")}catch{}},52126:(e,t,i)=>{function n(e){return void 0!==e.linesChanged&&0!==e.linesChanged}function r(e,t,i){return"MODIFIED"===e&&t!==i}function l(e){return"COPIED"===e.status&&!n(e)}function a(e){return"RENAMED"===e.status&&!n(e)}function o(e){return!!e.oldTreeEntry&&null===e.newTreeEntry}function s(e){return!!e.truncatedReason}i.d(t,{HI:()=>s,Jc:()=>l,_$:()=>r,dK:()=>a,lO:()=>o,l_:()=>u,s8:()=>h,xW:()=>f});let d=["maximum diff size exceeded.","maximum number of lines exceeded."],c=/^maximum file count exceeded/;function u(e){let t=e;return d.includes(e)?t="Sorry, we could not display the changes to this file because there were too many other changes to display.":c.test(e)&&(t="Sorry, we could not display the changes to this file because there were too many other files to display."),t}function f(e){return!!e.newTreeEntry?.isGenerated}function h(e){return 0===e.linesChanged}},9373:(e,t,i)=>{i.d(t,{oj:()=>S,EB:()=>v,sK:()=>b});var n=i(74848),r=i(59857),l=i(96540),a=i(72512),o=i(15638),s=i(78465);function d(e,t,i){if(!t.has(e))throw TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function c(e,t){var i=d(e,t,"get");return i.get?i.get.call(e):i.value}function u(e,t,i){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}function f(e,t,i){var n=d(e,t,"set");return!function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=i}}(e,n,i),i}function h(e,t){return e.name.localeCompare(t.name)}function m(e,t){return e.fileName.localeCompare(t.fileName)}function g(e){return e.diff}var p=new WeakMap;let FileNode=class FileNode{constructor(e){u(this,p,{writable:!0,value:void 0}),this.diff=e,this.filePath=this.diff.path,f(this,p,this.filePath.split("/")),this.fileName=c(this,p)[c(this,p).length-1],this.directoryParts=c(this,p).slice(0,c(this,p).length-1)}};var x=new WeakMap;let DirectoryNode=class DirectoryNode{getOrCreateDirectory(e){let t=c(this,x).get(e);if(!t){let i=this.path?`${this.path}/`:"";t=new DirectoryNode(e,`${i}${e}`),this.directories.push(t),c(this,x).set(e,t)}return t}sort(){for(let e of(this.directories.sort(h),this.files.sort(m),this.directories))e.sort()}getOrderedDiffs(){let e=this.files.map(g);for(let t of this.directories)e.push(...t.getOrderedDiffs());return e}constructor(e,t){u(this,x,{writable:!0,value:void 0}),this.name=e,this.path=t,this.directories=[],this.files=[],f(this,x,new Map)}};function y(e){let t=new DirectoryNode("","");for(let i of e.map(e=>new FileNode(e))){let e=t;for(let t of i.directoryParts)e=e.getOrCreateDirectory(t);e.files.push(i)}return t.sort(),t}function b(e){return y(e.filter(e=>!!e)).getOrderedDiffs()}var C=i(30729);function v({status:e}){switch(e){case"ADDED":case"COPIED":return(0,n.jsx)(C.A,{size:16,icon:r.FileAddedIcon,className:"fgColor-success"});case"DELETED":case"REMOVED":return(0,n.jsx)(C.A,{size:16,icon:r.FileRemovedIcon,className:"fgColor-danger"});case"RENAMED":return(0,n.jsx)(C.A,{size:16,icon:r.FileMovedIcon,className:"fgColor-attention"});default:return(0,n.jsx)(C.A,{size:16,icon:r.FileIcon,className:"fgColor-muted"})}}try{v.displayName||(v.displayName="FileStatusIcon")}catch{}var N=i(28786),j=i(8878),k=i(94686);let L=(0,l.memo)(function({file:e,depth:t,hash:i,onSelect:s}){let d=l.useRef(null),c=(0,N.Z)({focusRowRef:d,mouseRowRef:d}),u=(e.diff.totalCommentsCount??0)+(e.diff.totalAnnotationsCount??0),f=(0,l.useCallback)(()=>{d.current?.tabIndex===0&&d.current?.focus()},[d]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.ak,{commands:{"pull-requests-diff-file-tree:focus-file-tree":f}}),(0,n.jsxs)(a.G.Item,{defaultExpanded:!0,"aria-level":t,current:e.diff.pathDigest===i,id:e.diff.path,onSelect:()=>s?.(e.diff),ref:d,children:[(0,n.jsx)(a.G.LeadingVisual,{children:(0,n.jsx)(v,{status:e.diff.changeType})}),e.fileName,c&&(0,n.jsx)(o.m,{"data-testid":`${e.fileName}-item-tooltip`,id:`${e.fileName}-item-tooltip`,contentRef:d,"aria-label":e.fileName,open:!0,direction:"ne"}),!!u&&(0,n.jsxs)("span",{className:"sr-only",children:["has ",u<10?u:"9+"," ",u>1?"comments":"comment"]}),!!u&&(0,n.jsx)(a.G.TrailingVisual,{children:(0,n.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[(0,n.jsx)(r.CommentIcon,{}),(0,n.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:u<10?u:"9+"})]})})]})]})});function w({directory:e,depth:t=0,leadingPath:i="",...r}){let d=i?`${i}/`:"",[c,u]=l.useState(""),f=l.useRef(null),h=(0,l.useCallback)(()=>{u(((0,s.pd)(k.fV.hash??"")??"").replace("diff-",""))},[u]);(0,l.useEffect)(()=>(window.addEventListener("hashchange",h),()=>{window.removeEventListener("hashchange",h)}),[h]);let m=l.useRef(null),g=(0,N.Z)({focusRowRef:m,mouseRowRef:f}),p=(0,l.useCallback)(()=>{m.current?.tabIndex===0&&m.current?.focus()},[m]);if(!e.files.length&&1===e.directories.length)return(0,n.jsx)(n.Fragment,{children:e.directories.map(i=>(0,n.jsx)(w,{depth:0===t?1:t,directory:i,leadingPath:`${d}${e.name}`,...r},i.path))});function x(){return(0,n.jsxs)(n.Fragment,{children:[e.files.map(e=>(0,n.jsx)(L,{depth:t+1,file:e,hash:c,...r},e.filePath)),e.directories.map(e=>(0,n.jsx)(w,{depth:t+1,directory:e,...r},e.path))]})}return 0===t?x():(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.ak,{commands:{"pull-requests-diff-file-tree:focus-file-tree":p}}),(0,n.jsxs)(a.G.Item,{ref:m,defaultExpanded:!0,id:e.path,children:[(0,n.jsx)(a.G.LeadingVisual,{children:(0,n.jsx)(a.G.DirectoryIcon,{})}),(0,n.jsx)("span",{ref:f,children:`${d}${e.name}`}),g&&(0,n.jsx)(o.m,{"data-testid":`${e.name}-directory-item-tooltip`,id:`${e.name}-directory-item-tooltip`,contentRef:m,"aria-label":`${d}${e.name}`,open:!0,direction:"ne"}),(0,n.jsx)(a.G.SubTree,{children:x()})]},e.path)]})}let S=(0,l.memo)(function({diffs:e,...t}){let i=y(e);return(0,n.jsx)(a.G,{"aria-label":"File Tree",children:(0,n.jsx)(w,{directory:i,...t})})});try{L.displayName||(L.displayName="File")}catch{}try{w.displayName||(w.displayName="Directory")}catch{}try{S.displayName||(S.displayName="DiffFileTree")}catch{}},14057:(e,t,i)=>{i.d(t,{W:()=>r,y:()=>l});var n=i(94120);let r={ArrowLeft:n.z0.ArrowHorizontal,ArrowDown:n.z0.ArrowVertical,ArrowUp:n.z0.ArrowVertical,ArrowRight:n.z0.ArrowHorizontal,h:n.z0.HL,j:n.z0.JK,k:n.z0.JK,l:n.z0.HL,a:n.z0.AD,s:n.z0.WS,w:n.z0.WS,d:n.z0.AD,Tab:n.z0.Tab,Home:n.z0.HomeAndEnd,End:n.z0.HomeAndEnd,PageUp:n.z0.PageUpDown,PageDown:n.z0.PageUpDown,Backspace:n.z0.Backspace},l=n.z0.ArrowAll|n.z0.PageUpDown|n.z0.HomeAndEnd|n.z0.AD},79853:(e,t,i)=>{i.d(t,{Wi:()=>n.W,tT:()=>r.t,yC:()=>n.y});var n=i(14057),r=i(73343)},73343:(e,t,i)=>{i.d(t,{t:()=>n});let n={ghostUser:{displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"}}},59202:(e,t,i)=>{i.d(t,{Dd:()=>s.Dd,K_:()=>o.K,N0:()=>s.N0,T5:()=>n.T,Uz:()=>l.U,Yj:()=>a.Y,cP:()=>o.c,qj:()=>r.q,xB:()=>d.x});var n=i(65607),r=i(13190);i(1448);var l=i(59566),a=i(26163),o=i(19440),s=i(78465),d=i(97795);i(84546)},61558:(e,t,i)=>{i.d(t,{F:()=>n});function n(e,t){return e?.threads?.flatMap(e=>{let i=e?.id,n=e?.commentsData?.comments?.[0]?.author??t,r=e?.commentsData.totalCount??0,l=e?.commentsData?.__id;return i&&n?[{id:i,author:n,commentCount:r,commentsConnectionId:l,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}},62291:(e,t,i)=>{i.d(t,{A:()=>l});var n=i(40582),r=i(69719);function l({selectedDiffRowRange:e,leftLines:t,rightLines:i}){let l=!!i,{startOrientation:a,endOrientation:o}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let s=f(a).findIndex(t=>(0,r.a2)(t,e.startLineNumber,e.startOrientation)),d=f(o).findIndex(t=>(0,r.a2)(t,e.endLineNumber,e.endOrientation)),c=s>=0&&d>=0;function u(e){if(!c||(0,r.Po)(e))return!1;let t=f((0,n.XU)(e.type)).indexOf(e);return t>=s&&t<=d}function f(e){return l&&"left"!==("string"==typeof e?e:(0,n.XU)(e.type))?i:t}let h=f("left").filter(e=>u(e)),m=f("right").filter(e=>u(e));return{isRowSelected:u,selectedRightLines:m,selectedLeftLines:h}}},78465:(e,t,i)=>{function n(e,t){return`${"left"===t?"L":"R"}${e}`}function r(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function l(e){let t=e.match(/^#?(r\d+)/),i=t?.[1];return i?parseInt(i.slice(1)):void 0}function a(e){let t=e.match(/^#annotation_(\d+)/),i=t?.[1];return i?parseInt(i):void 0}function o(e){let t=function(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let i=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=i&&6===i.length?i:null}(e);if(t){let e=t[1],i=t[2]?"L"===t[2]?"left":"right":void 0,n=t[3]?parseInt(t[3]):void 0;if(!e||!i||void 0===n)return;return{diffAnchor:e,startOrientation:i,startLineNumber:n,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??i,endLineNumber:(t[5]?parseInt(t[5]):void 0)??n,firstSelectedLineNumber:n,firstSelectedOrientation:i}}}function s(e){c(d(e))}function d(e){let t=n(e.startLineNumber,e.startOrientation),i=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=n(e.endLineNumber,e.endOrientation);i+=`-${t}`}return i}function c(e){let t=`#${e}`;if(t===window.location.hash)return;let i=window.location.href;history.replaceState({...history.state},"",t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:i}))}i.d(t,{Dd:()=>l,N0:()=>a,ZD:()=>o,i8:()=>s,j$:()=>d,pd:()=>r,pk:()=>c})},84546:(e,t,i)=>{var n;function r({data:e}){let{query:t,diffEntryInfo:i,currentDiffEntryData:n}=e;return{matchingDiffs:n?function(e,t,i){if(0===i.size)return new Map;let n=i.size>=200,r={},l=e.reduce((i,n,l)=>{if(r[l])return i;r[l]=!0;let o=a(t,[e[l]]),s=o.next();for(;!s.done&&i.size<200;){let{resultsWithinDiff:t}=s.value;i.set(e[l]?.pathDigest??"",t),s=o.next()}return i},new Map);if(l.size<200&&n){let i=a(t,e,l.size),n=i.next();for(;!n.done&&l.size<200;){let{resultsWithinDiff:t,diff:r}=n.value;l.set(e[r]?.pathDigest??"",t),n=i.next()}}return l}(i,l(t),n):function(e,t){let i=new Map,n=a(t,e),r=n.next();for(;!r.done&&i.size<200;){let{resultsWithinDiff:t,diff:l}=r.value;i.set(e[l]?.pathDigest??"",t),r=n.next()}return i}(i,l(t)),query:t}}function l(e){return{kind:0,regexp:RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")}}function*a(e,t,i=0){for(let n=i;n<t.length;n++){let i=t[n],r=[],l=0;for(let a=0;a<i.diffLines.length;a++){let o,s;o=t[n]?.diffLines[a]?.type==="HUNK"?i.diffLines[a]?.text:i.diffLines[a]?.text?.substring(1);let d=i.diffLines[a];for(;o&&null!==(s=e.regexp.exec(o));){let e=s[0],t=s.index;r.push({pathDigest:i.pathDigest,indexWithinPathDigest:l,matchContent:e,column:t,diffLineNumIndex:a,isHunk:(d?.type==="HUNK")??!1,hunkLineNumber:d?.blobLineNumber??-1,leftLineNumber:d?.type!=="ADDITION"?d?.left??-1:-1,rightLineNumber:d?.type!=="DELETION"?d?.right??-1:-1,columnEnd:t+e.length,text:o}),l++}}0!==r.length&&(yield{diff:n,resultsWithinDiff:r})}}i.d(t,{f:()=>r}),function(e){e[e.Text=0]="Text",e[e.Symbol=1]="Symbol"}(n||(n={}))},40221:(e,t,i)=>{i.d(t,{u:()=>GridNavigator});var n=i(69719);let GridNavigator=class GridNavigator{moveToNextItem(e,t){let i;let n=this.cellIdToGridLocation.get(this.focusedGridCell?.cellId??"");if(!n)return;let[r]=n,[,l]=n;switch(("ArrowDown"===e||"ArrowUp"===e)&&this.isHunkRow(r)&&this.savedColumnIndex&&(l=this.savedColumnIndex,this.savedColumnIndex=void 0),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=this.grid.length-1,t=this.grid[e]?.length;t&&(i=this.grid[e]?.[t-1]);break}case"ArrowUp"===e:this.isHunkRow(r-1)?(this.saveColumnIndex(l),i=this.grid[r-1]?.[0]):i=this.grid[r-1]?.[l];break;case"ArrowDown"===e:this.isHunkRow(r+1)?(this.saveColumnIndex(l),i=this.grid[r+1]?.[0]):i=this.grid[r+1]?.[l];break;case"ArrowLeft"===e:i=this.grid[r]?.[l-1];break;case"ArrowRight"===e:i=this.grid[r]?.[l+1];break;case"PageUp"===e:{this.saveColumnIndex(l);let e=this.getPreviousHunkRowIndex(r);i=this.grid[e]?.[0];break}case"PageDown"===e:{this.saveColumnIndex(l);let e=this.getNextHunkRowIndex(r),t=0;e||(e=this.grid.length-1,t=l),i=this.grid[e]?.[t];break}case"Home"===e:i=this.grid[r]?.[0];break;case"End"===e:{let e=this.grid[r];if(e&&!this.isHunkRow(r)){let t=e.length-1;i=this.grid[r]?.[t]}}}return i&&(this.focusedGridCell=i),this.focusedGridCell}reinitializeGrid(e,t){this.initializeGrid(e,t)}focusFirstGridCell(e){e&&this.cellIdToGridLocation.get(e)?this.focusGridCell(e):this.focusedGridCell=this.grid[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=this.cellIdToGridLocation.get(e);if(!t)return;let[i,n]=t;this.focusedGridCell=this.grid[i]?.[n]}getNextSelectableCell(e){let t;let i=this.lastSelectedGridCell||this.focusedGridCell,n=this.cellIdToGridLocation.get(i?.cellId??"");if(!n)return;let[r,l]=n;if(("ArrowUp"!==e||!(r<=1))&&("ArrowDown"!==e||r!==this.grid.length-1)){if("ArrowUp"===e){let e=r-1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:l}),e--}if("ArrowDown"===e){let e=r+1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:l}),e++}return t&&(this.lastSelectedGridCell=t),t}}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=this.cellIdToGridLocation.get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<2?this.grid[e]?.[this.focusedGridCell.columnIndex+2]:this.grid[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=this.grid.find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=this.grid.slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,i){let r=(0,n.qX)(this.fileAnchor,e,t),l=(0,n.u6)(r,0),a=this.cellIdToGridLocation.get(l);if(!a)return!1;let[o]=a;return!!i===this.isHunkRow(o)}getNextSelectableCellFromRow({rowIndex:e,columnIndex:t}){let i=this.grid[e],n=i?.[t];switch(!0){case n?.isHunk:return;case n?.orientation==="left"&&n.isEmpty:return i?.[t+2];case n?.orientation==="right"&&n.isEmpty:return i?.[t-2];default:return i?.[t]}}getNextHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).find(t=>t>e)}getPreviousHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}initializeGrid(e,t){this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set;for(let i=0;i<e.length;i++){let r=[],l=e[i];if(void 0!==l){if(this.isSplitDiff){let e=(t||[])[i],a=(0,n.qX)(this.fileAnchor,l,e);(0,n.Po)(l)||"HUNK"!==l.type?this.initializeSplitDiffCodeRow({leftLine:l,rightLine:e,row:r,rowIdentifier:a,rowIndex:i}):this.initializeHunkRow(r,a,i)}else{let e=(0,n.qX)(this.fileAnchor,l,l);(0,n.Po)(l)||"HUNK"!==l.type?this.initializeUnifiedDiffCodeRow({diffLine:l,row:r,rowIdentifier:e,rowIndex:i}):this.initializeHunkRow(r,e,i)}this.grid.push(r)}}}initializeContentCell({cellIndex:e,diffLine:t,orientation:i,row:r,rowIdentifier:l,rowIndex:a}){let o;let s=(0,n.u6)(l,e);(0,n.Po)(t)||"left"!==i||(o=t?.left),(0,n.Po)(t)||"right"!==i||(o=t?.right),r.push({lineNumber:o,orientation:i,isHunk:!1,isEmpty:(0,n.Po)(t),cellId:(0,n.u6)(l,e),columnIndex:e}),this.cellIdToGridLocation.set(s,[a,e])}initializeHunkRow(e,t,i){let r=(0,n.u6)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:r,columnIndex:0}),this.cellIdToGridLocation.set(r,[i,0]),this.hunkRowIndexes.add(i)}isHunkRow(e){return this.hunkRowIndexes.has(e)}initializeSplitDiffCodeRow({leftLine:e,rightLine:t,row:i,rowIdentifier:n,rowIndex:r}){this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:i,rowIdentifier:n,rowIndex:r}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"left",row:i,rowIdentifier:n,rowIndex:r}),this.initializeContentCell({cellIndex:2,diffLine:t,orientation:"right",row:i,rowIdentifier:n,rowIndex:r}),this.initializeContentCell({cellIndex:3,diffLine:t,orientation:"right",row:i,rowIdentifier:n,rowIndex:r})}initializeUnifiedDiffCodeRow({diffLine:e,row:t,rowIdentifier:i,rowIndex:r}){let l=(0,n.Po)(e)||"DELETION"!==e.type?"right":"left";this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:i,rowIndex:r}),this.initializeContentCell({cellIndex:2,diffLine:e,orientation:l,row:t,rowIdentifier:i,rowIndex:r})}saveColumnIndex(e){this.isHunkRow(e)||(this.savedColumnIndex=e)}constructor(e,t,i,n,r){this.fileAnchor=e,this.isSplitDiff=t,this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set,this.initializeGrid(i,n),this.focusFirstGridCell(r)}}},91462:(e,t,i)=>{i.d(t,{Fs:()=>a,fR:()=>o,wj:()=>r});var n=i(69719);let r={finalLineId:"final-hunk-header-line"};function l(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function a(e,t){if("HUNK"===e.type&&e.__id===r.finalLineId)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let i=t.sort(l).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[i],nextHunk:t[i+1],previousHunk:t[i-1]}}function o(e){let t=[],i=0;for(let l=1;l<e.length;l++){let a=e[l],o=l===e.length-1;if(a&&!(0,n.Po)(a)){if("HUNK"===a.type){let o;let s=e[i];if(!s||(0,n.Po)(s))continue;let d=l-1;for(;(!o||(0,n.Po)(o))&&(o=e[d],-1!=--d););o&&!(0,n.Po)(o)&&t.push({startBlobLineNumber:s.blobLineNumber,endBlobLineNumber:o.blobLineNumber}),a.__id===r.finalLineId&&t.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:a.blobLineNumber+20}),i=l;continue}if(o){let r=e[i];r&&!(0,n.Po)(r)&&t.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:a.blobLineNumber})}}}return t}},69719:(e,t,i)=>{i.d(t,{Ji:()=>h,Ls:()=>k,Mk:()=>g,On:()=>s,Po:()=>u,S4:()=>b,YY:()=>C,ZC:()=>p,_S:()=>m,a1:()=>j,a2:()=>o,j2:()=>x,oE:()=>v,pI:()=>y,qK:()=>f,qX:()=>d,u6:()=>c});var n=i(40582),r=i(89438),l=i(52910),a=i(78465);function o(e,t,i){return"left"===i?!u(e)&&e.left===t:!u(e)&&(0,n.XU)(e.type)===i&&e.right===t}function s(e,t){if(!e)return;if(!t)return e;let i=!1,n=!1,r=!1;for(let l of t)if(l&&(n||(n=o(l,e.startLineNumber,e.startOrientation)),r||(r=o(l,e.endLineNumber,e.endOrientation)),(i=r&&!n)||n&&r))break;return i?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation,firstSelectedLineNumber:e.endLineNumber}:e}function d(e,t,i){let n=`-${u(t)||"number"!=typeof t.left?"empty":t.left}`,r=i?`-${u(i)||"number"!=typeof i.right?"empty":i.right}`:"";return`${e}${n}${r}`}function c(e,t){return`${e}-${t}`}function u(e){return!!e&&e===l.V}function f(e){return!!e&&e!==l.V}function h(e){return"CONTEXT"===e.type}function m(e,t){let i;switch(t){case"ADDITION":i="+";break;case"DELETION":i="-";break;case"CONTEXT":case"INJECTED_CONTEXT":i=" "}if(!i||!e.startsWith(i))return[e,void 0];let n=e[0];return[e.substring(1),n]}function g(e){let t=[],i=[],n=()=>{for(;t.length<i.length;)t.push(l.V);for(;i.length<t.length;)i.push(l.V)};for(let r of e)switch(r.type){case"ADDITION":i.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":n(),t.push(r),i.push(r)}return n(),{leftLines:t,rightLines:i}}function p(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function x({line:e,range:t,fileAnchor:i}){let n;let{origin:r,pathname:l}=window.location;if(t?n=(0,a.j$)(t):e&&(n=function(e,t){let i=["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type),n=i?e.left:e.right,r=i?"left":"right";if(null!==n)return(0,a.j$)({diffAnchor:t,endLineNumber:n,endOrientation:r,startLineNumber:n,startOrientation:r,firstSelectedLineNumber:n,firstSelectedOrientation:r})}(e,i)),n)return`${r}${l}#${n}`}function y({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:i,key:n}){let l=e?`${(0,r.U0)()?"\u2318":"Ctrl + "}`:"";return i&&(l+=`${(0,r.U0)()?"\u2325":"Alt + "}`),t&&(l+=`${(0,r.U0)()?"\u21E7":"Shift + "}`),l+=n}function b({hasThreads:e}){return e?"96px":"30px"}function C({shouldAlignRight:e}){return e?"11px":"40px"}function v({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:i,key:n}){let l="";return e&&(l+=(0,r.U0)()?"Command+":"Control+"),i&&(l+=(0,r.U0)()?"Option+":"Alt+"),t&&(l+="Shift+"),l+=n}let N=["ADDITION","DELETION","CONTEXT"],j=(e,t)=>{if(!e)return!1;let i=t.leftLines.concat(t.rightLines);return i.length>0&&i.includes(e)?i.every(e=>!u(e)&&N.includes(e.type)):!u(e)&&N.includes(e.type)},k=e=>e?e.filter(e=>!u(e)).map(e=>{let[t]=m(p(e.html),e.type);return t}).join("\n"):""},2712:(e,t,i)=>{i.d(t,{z:()=>n});function n(e){return null!=e}},97077:(e,t,i)=>{i.d(t,{V:()=>n});function n(e){let t=document.getElementById("__primerPortalRoot__");return!!t&&!!e&&t.contains(e)}},87566:(e,t,i)=>{i.d(t,{e:()=>d});var n=i(96540),r=i(81999),l=i(26163),a=i(4561),o=i(99555),s=i(63494);function d({cellId:e,actionBarRef:t}){let{replaceSelectedDiffRowRange:i}=(0,l.o)(),{fileAnchor:d}=(0,a.s)(),[c,u]=(0,n.useState)(t),{annotations:f,openDialog:h,closeDialog:m,selectedAnnotationId:g,selectAnnotationId:p,selectedThreadId:x,selectThreadId:y,openContextMenuCell:b,openNewConversationCell:C,openMarkerDetailsCell:v,openMarkersListCell:N,updateVisibleThreads:j,threads:k,threadConnectionId:L,anyMenuOpen:w}=(0,r._)(),{sendAnalyticsEvent:S}=(0,s.s)(),D=(0,n.useMemo)(()=>C?.cellId===e,[e,C]),A=(0,n.useMemo)(()=>C?.withSuggestedChange,[C]),E=(0,n.useCallback)(t=>{h("new-conversation",e,t)},[e,h]),I=(0,n.useCallback)(()=>{E()},[E]),R=(0,n.useCallback)(()=>{u(t),E(),S("diff.start_new_conversation","PLUS_ICON")},[t,E,S]),T=(0,n.useCallback)(()=>{E({withSuggestedChange:!0}),S("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[E,S]),F=(0,n.useCallback)(()=>{u(t),E({withSuggestedChange:!0}),S("diff.start_new_conversation_with_suggested_change","ACTION_BAR_CONTEXT_MENU")},[t,E,S]),_=(0,n.useCallback)(()=>{m("new-conversation")},[m]),M=(0,n.useMemo)(()=>b===e,[e,b]),O=(0,n.useCallback)(()=>{h("context-menu",e)},[e,h]),H=(0,n.useCallback)(()=>{u(t),O()},[t,O]),B=(0,n.useCallback)(()=>{m("context-menu")},[m]),P=(0,n.useCallback)(()=>{M?B():O()},[B,M,O]),U=(0,n.useCallback)(()=>{u(t),P()},[t,P]),$=(0,n.useMemo)(()=>v===e?x:void 0,[e,v,x]),W=(0,n.useMemo)(()=>v===e?g:void 0,[e,v,g]),K=(0,n.useCallback)(()=>{h("marker-details",e)},[e,h]),V=(0,n.useCallback)(()=>{m("marker-details")},[m]),q=(0,o.K)((e,t={skipLineSelection:!1})=>{if(y(e),K(),t.skipLineSelection)return;let n=k.find(t=>t.id===e);if(n&&n.diffSide&&n.line){let e=n.startLine??n.line,t=n.startDiffSide??n.diffSide;i({diffAnchor:d,endLineNumber:n.line,endOrientation:"LEFT"===n.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}}),z=(0,o.K)((e,t={skipLineSelection:!1})=>{if(p(e),K(),t.skipLineSelection)return;let n=f.find(t=>t.id===e);n&&i({diffAnchor:d,endLineNumber:n.location.end.line,endOrientation:"right",startLineNumber:n.location.start.line,startOrientation:"right",firstSelectedLineNumber:n.location.start.line,firstSelectedOrientation:"right"})}),G=(0,n.useCallback)(()=>{h("marker-list",e)},[e,h]),X=(0,n.useCallback)(()=>{m("marker-list")},[m]),Q=(0,n.useCallback)(e=>{let t=j(e);if(!t?.length&&!f.length)return;let i=t&&t[0],n=t&&1===t.length&&i&&!f.length,r=f[0],l=1===f.length&&r&&!t?.length;n?q(i.id):l?z(r.id):G()},[f,G,z,q,j]);return{isNewConversationDialogOpen:D,startNewConversation:I,startNewConversationFromActionBar:R,closeNewConversationDialog:_,startNewConversationWithSuggestedChange:T,startNewConversationFromActionBarWithSuggestedChange:F,shouldStartNewConversationWithSuggestedChange:A,isContextMenuOpen:M,openContextMenu:O,openContextMenuFromActionBar:H,closeContextMenu:B,toggleContextMenu:P,toggleContextMenuFromActionBar:U,optimizedSelectedThreadId:$,optimizedSelectedAnnotationId:W,selectThread:q,selectAnnotation:z,openMarkerDetailsDialog:K,closeConversationDetailsDialog:V,isMarkerListDialogOpen:N===e,openMarkerListDialog:G,closeMarkerListDialog:X,openMarkerOrListDialogFromActionBar:(0,n.useCallback)(e=>{Q(e),u(t)},[t,Q]),openMarkerOrListDialog:(0,n.useCallback)(e=>{Q(e)},[Q]),annotations:f,returnFocusRef:c,threadConnectionId:L,threads:k,anyMenuOpen:w}}},55515:(e,t,i)=>{i.d(t,{l:()=>a});var n=i(96540),r=i(81999),l=i(89591);function a({cellRef:e}){let{showActionBar:t,hideActionBar:i,anyMenuOpen:a}=(0,r._)(),[o,s]=(0,n.useState)(!1),d=(0,n.useCallback)(()=>{t()},[t]),c=(0,n.useCallback)(t=>{!a&&(e.current&&e.current.contains(t.relatedTarget)||i())},[a,e,i]),u=(0,n.useCallback)(()=>{t()},[t]),f=(0,n.useCallback)(()=>{!a&&(e.current===document.activeElement||e.current?.contains(document.activeElement)||i())},[a,e,i]);return{isActionBarFocused:o,handleCellBlur:c,handleCellFocus:d,handleCellMouseEnter:u,handleCellMouseLeave:f,handleActionBarBlur:(0,n.useCallback)(t=>{e.current&&!a&&(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&s(!1):(i(),s(!1)))},[a,e,i]),handleActionBarFocusCapture:(0,n.useCallback)(e=>{a||(e.stopPropagation(),s(!0))},[a]),handleActionBarKeydownCapture:(0,n.useCallback)(e=>{!a&&(0,l.g)(e.key)&&e.stopPropagation()},[a])}}},97795:(e,t,i)=>{i.d(t,{x:()=>o});var n=i(60333),r=i(96540),l=i(89069),a=i(84546);function o(e,t,i,o){let[s,d]=(0,r.useState)(new Map),[c,u]=(0,r.useState)(void 0),[f,h]=(0,r.useState)(0),m=r.useRef();!m.current&&t&&(m.current=new l.N(new n.z(i,a.f),200,e=>1!==e.query.length));let g=(0,r.useRef)(t);g.current=t;let p=(0,r.useRef)("");(0,r.useEffect)(()=>function(){m.current?.terminate()},[]);let x=(0,r.useRef)([]);return m.current&&e!==x.current&&(m.current.onResponse=e=>{e.query===g.current&&(d(e.matchingDiffs),p.current=g.current)},x.current=e),(0,r.useEffect)(()=>{if(!e||!m.current||!p.current||""===p.current){d(new Map),u(void 0);return}d(new Map),u(void 0),m.current.post({query:p.current,diffEntryInfo:e,currentDiffEntryData:void 0})},[e?.length,e]),(0,r.useEffect)(()=>{if(e&&m.current){if(""===t)d(new Map),u(void 0),h(0),p.current="";else{if(!(t.length>0&&t.length<=1e3))return;let i=p.current.length>0&&t.startsWith(p.current);m.current.post({query:t,diffEntryInfo:e,currentDiffEntryData:i?s:void 0}),h(0)}}},[t,o]),{focusedSearchResult:c,setFocusedSearchResult:u,searchResults:s,currentIndex:f,setCurrentIndex:h}}},24541:(e,t,i)=>{i.d(t,{A:()=>l});var n=i(81499),r=i(4561);function l(){let{nextHunk:e,currentHunk:t,previousHunk:i}=(0,r.s)(),{addInjectedContextLines:l}=(0,n.y)(),a=!!t&&0!==t.startBlobLineNumber,o=!!t&&!!e;return{expandStartOfHunk:()=>{a&&t&&l({start:Math.max(0,t.startBlobLineNumber-20),end:t.startBlobLineNumber})},expandEndOfHunk:()=>{o&&t&&l({start:t.endBlobLineNumber+1,end:t.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{i&&l({start:i.endBlobLineNumber+1,end:i.endBlobLineNumber+1+20})},canExpandEndOfHunk:o,canExpandStartOfHunk:a}}},31817:(e,t,i)=>{i.d(t,{R:()=>a});var n=i(96540),r=i(69719);function l(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function a(e,t,i,a,o,s){(0,n.useEffect)(()=>{if(o&&document.activeElement){let n=function(e,t,i){let n=[];for(let l=0;l<t.length;l++){let a=t[l],o=i?.[l]??a,s=!(0,r.Po)(a)&&a?.type==="HUNK";a&&o&&!e.hasLine(a,o,s)&&n.push(a)}return n}(o,t,s);if(0!==n.length){if(document.activeElement===document.body){let a,o,s;let d=t.indexOf(n[n.length-1]),c=t[d+1],u=n[0];c&&!(0,r.Po)(c)&&"HUNK"===c.type&&(a=(0,r.u6)((0,r.qX)(e,c,c),0),o=document.querySelector(`[data-grid-cell-id=${a}]`),s=o?.querySelector("button[data-direction=down], button[data-direction=all]")),s||(a=(0,r.u6)((0,r.qX)(e,u,u),0),o=document.querySelector(`[data-grid-cell-id=${a}]`),s=o?.querySelector("button[data-direction=up], button[data-direction=all]")),a&&o&&(s?s.focus():o.focus(),i.focusGridCell(a),l(o))}else if("BUTTON"===document.activeElement.tagName)l(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=i.focusedGridCell?.cellId;if(e!==t){let e=a.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},[e,t,i,s,o,a])}},89591:(e,t,i)=>{i.d(t,{e:()=>d,g:()=>s});var n=i(82678),r=i(96540),l=i(40221),a=i(31817),o=i(79853);function s(e){return e in o.Wi&&(o.Wi[e]&o.yC)>0}function d({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:i,isSplitDiff:s,leftLines:d,replaceSelectedDiffRowRangeFromGridCells:c,rightLines:u,selectedDiffRowRange:f,updateSelectedDiffRowRange:h}){let m=(0,r.useRef)(),g=(0,r.useMemo)(()=>new l.u(i,s,d,u,m.current?.focusedGridCell?.cellId),[i,s,d,u]);(0,r.useEffect)(()=>{m.current=g},[g]),(0,a.R)(i,d,g,t,m.current,u),function(e,t){let i=(0,r.useCallback)(e=>{let i=e.target.getAttribute("data-grid-cell-id");i&&t.focusGridCell(i)},[t]);(0,r.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",i),()=>t?.removeEventListener("focusin",i)},[e,i])}(t,g);let p=(0,r.useCallback)((t,n,r)=>{let l=g.getValidSelectableRowCell();switch(!0){case(r.metaKey||r.ctrlKey)&&"KeyA"===r.code:{let e=g.getFirstCodeCell(),t=g.getLastCodeCell();if(!e||!t)return n;return c({diffAnchor:i,focusedGridCell:e,startGridCell:e,endGridCell:t}),n}case r.shiftKey&&"ArrowDown"===r.key:{let e=g.getNextSelectableCell("ArrowDown");if(!e||!l)return n;return f?.firstSelectedLineNumber?h(i,e.lineNumber,e.orientation,!0):c({diffAnchor:i,focusedGridCell:l,startGridCell:l,endGridCell:e}),n}case r.shiftKey&&"ArrowUp"===r.key:{let e=g.getNextSelectableCell("ArrowUp");if(!e||!l)return n;return f?.firstSelectedLineNumber?h(i,e.lineNumber,e.orientation,!0):c({diffAnchor:i,focusedGridCell:l,startGridCell:e,endGridCell:l}),n}default:{let t=g.moveToNextItem(r.key,r.ctrlKey),i=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),g.clearLastSelectedCell(),i??void 0}}},[g,f,h,i,c,e]);return(0,n.G)({containerRef:t,bindKeys:o.yC,getNextFocusable:p,focusableElementFilter:e=>"BUTTON"!==e.tagName,focusInStrategy:"previous"},[p]),{gridNavigator:g}}},93036:(e,t,i)=>{i.d(t,{w:()=>l});var n=i(26163),r=i(69719);function l(e){let{selectedDiffRowRange:t,selectedDiffLines:i,getDiffLinesByDiffAnchor:l}=(0,n.o)();return{getUnifiedDiffLineCode:()=>{let i=l(e);if(!i||!t)return"";let{startOrientation:n,endOrientation:a,startLineNumber:o,endLineNumber:s}=t,d=0,c=0;return i.length>1&&(d=i.findIndex(e=>"left"===n?e.left===o:e.right===o),c=i.findIndex(e=>"left"===a?e.left===s:e.right===s)),(0,r.Ls)(i.slice(d,c+1))},getSplitDiffSingleLineCode:(t,i)=>{if(!t||!i)return"";let n=l(e)?.find(e=>"left"===t?e.left===i:e.right===i);return n?(0,r.Ls)([n]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?(0,r.Ls)(i.leftLines):(0,r.Ls)(i.rightLines)}}},99555:(e,t,i)=>{i.d(t,{K:()=>l});var n=i(65482),r=i(96540);let l=e=>{let t=(0,r.useRef)(e);return(0,n.N)(()=>(t.current=e,()=>t.current=null),[e]),(0,r.useCallback)((...e)=>t.current?.(...e),[])}},20885:(e,t,i)=>{i.d(t,{S:()=>c,n:()=>d});var n=i(96540),r=i(26163),l=i(69719),a=i(63494),o=i(99555),s=i(79441);function d(e){let t=(0,s.Lm)(e),i=(e.subject?.diffLines??[]).filter(e=>t?e.left&&e.left>=t.startLineNumber&&e.left<=t.endLineNumber||e.right&&e.right>=t.startLineNumber&&e.right<=t.endLineNumber:[]),n=i.every(e=>"DELETION"!==e.type),r=i?.map(e=>l._S(e.text,e.type)[0]).join("\n");return{isValidSuggestionRange:i.length>0&&!!n,showSuggestChangesButton:!1,sourceContentFromDiffLines:r,onInsertSuggestedChange:()=>{},shouldInsertSuggestedChange:!1}}function c(e,t,i){let{sendAnalyticsEvent:s}=(0,a.s)(),{getDiffLinesFromLineRange:d,selectedDiffRowRange:c}=(0,r.o)(),u=(0,o.K)(function(i,n){if(!e)return;let r=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let i=d(e)?.selectedLeftLines;return!!i?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(i);return{isValidSuggestionRange:r,showSuggestChangesButton:r,sourceContentFromDiffLines:r?function(e){let i=d(e)?.selectedRightLines;if(e&&i&&i.length>1)return(0,l.Ls)(i);if(!t)return"";let[n]=(0,l._S)(t.text,t.type);return n}(i):void 0,onInsertSuggestedChange:()=>{s("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:n}});return(0,n.useMemo)(()=>({selectedDiffRowRange:c,configureSuggestedChangesFromLineRange:u,shouldStartNewConversationWithSuggestedChange:i}),[c,u,i])}},52910:(e,t,i)=>{i.d(t,{V:()=>n});let n="empty-diff-line"},18676:(e,t,i)=>{i.d(t,{M_:()=>n,Nc:()=>a,Uk:()=>l});var n,r=i(96540);let l="500px";function a(e){let[t,i]=function(e){let[t,i]=(0,r.useState)(e),n=(0,r.useRef)(t);return[n,e=>{n.current=e,i(e)}]}("LOADING"),n=(0,r.useRef)(null),l=(0,r.useRef)(null),a=(0,r.useRef)(null),d=(0,r.useRef)({untimed:!0}),c=(0,r.useCallback)(t=>(function(e,t,i,n,r,l,a){if(e.origin!==t)return;let o=function(e){var t;let i=e.data;if(!i)return null;if("string"==typeof i)try{i=JSON.parse(i)}catch{return null}return"object"==typeof(t=i)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?i:null}(e);if(!o){l("ERROR");return}let d=o.body,c=null!=o.payload?o.payload:void 0,u=i.current?.contentWindow;switch(d){case"hello":(r.current??{untimed:!0}).hello=Date.now(),s(u,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),s(u,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":c&&a(c.error??null),l("ERROR");break;case"loading":l("LOADING");break;case"loaded":l("LOADED");break;case"ready":c&&"number"==typeof c.height&&n.current&&(n.current.style.height=`${c.height}px`),l("READY");break;case"resize":c&&"number"==typeof c.height&&n.current&&(n.current.style.height=`${c.height}px`);break;case"code_rendering_service:container:get_size":s(u,{type:"render:cmd",body:{cmd:"code_rendering_service:container:size","code_rendering_service:container:size":{width:n.current?.getBoundingClientRect().width}}});break;case"code_rendering_service:markdown:get_data":if(!i.current||!n.current)return;!function(e,t){let i=e.getAttribute("data-content");if(!i)return;let n={type:"render:cmd",body:{cmd:"code_rendering_service:data:ready","code_rendering_service:data:ready":{data:JSON.parse(i).data,width:t.getBoundingClientRect().width}}};s(e.contentWindow,n)}(i.current,n.current)}})(t,e,l,a,d,i,e=>n.current=e),[e,i]);return(0,r.useEffect)(()=>{o(d.current);let e=e=>{("LOADING"===t.current||"LOADED"===t.current)&&(!e||d.current.hello)&&i("ERROR")};return d.current={load:Date.now(),hello:null,helloTimer:window.setTimeout(e,1e4,!0),loadTimer:window.setTimeout(e,45e3)},()=>{o(d.current)}},[t,i]),(0,r.useEffect)(()=>(window.addEventListener("message",c),()=>window.removeEventListener("message",c)),[c]),{renderState:t.current,errorMsg:n.current,iFrameRef:l,containerRef:a}}function o(e){e&&(e.load=e.hello=null,e.helloTimer&&(clearTimeout(e.helloTimer),e.helloTimer=null),e.loadTimer&&(clearTimeout(e.loadTimer),e.loadTimer=null))}function s(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}!function(e){e.ERROR="ERROR",e.LOADING="LOADING",e.LOADED="LOADED",e.READY="READY"}(n||(n={}))},86748:(e,t,i)=>{i.d(t,{A:()=>n});let n=(e,t)=>{let i=new URL(e,window.location.origin),n=new URL(t,window.location.origin);return n.href.includes("#")&&i.host===n.host&&i.pathname===n.pathname&&i.search===n.search}},28786:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(96540);function r({focusRowRef:e,mouseRowRef:t}){let[i,r]=n.useState(!1);return n.useEffect(()=>{if(e.current&&t.current){let i=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&r(!0)};e.current.onfocus=()=>{i()},e.current.onblur=()=>{r(!1)},t.current.onmouseenter=()=>{i()},t.current.onmouseleave=()=>{r(!1)}}},[e,t]),i}},94406:(e,t,i)=>{i.d(t,{L:()=>r});var n=i(96540);function r(e){(0,n.useEffect)(()=>{if(!e)return;let t=document.querySelector(".footer");if(t)return t.hidden=!0,()=>{t.hidden=!1}},[e])}},43490:(e,t,i)=>{i.d(t,{X:()=>r});var n=i(6978);function r(e){let t=e.join(","),[i]=(0,n.I)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return i}},2474:(e,t,i)=>{i.d(t,{Z:()=>c,o:()=>u});var n=i(96540),r=i(47767),l=i(45588),a=i(84976),o=i(86748),s=i(65086),d=i(18951);let c=()=>{let{routes:e,history:t}=n.useContext(s.B),a=(0,r.Zp)();return n.useCallback((r,s)=>{let c=(0,l.o1)(r).pathname;if((0,l.ue)(e,c))(0,o.A)(location.href,r.toString())||(0,d.SC)("react"),(0,n.startTransition)(()=>{a(r,s);let{turbo:e,...t}=window.history.state;window.history.replaceState({...t,skipTurbo:!0},"",location.href)});else{let e=t.createHref(r);(async()=>{let{softNavigate:t}=await Promise.all([i.e("vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js"),i.e("ui_packages_soft-navigate_soft-navigate_ts")]).then(i.bind(i,48566));t(e)})()}},[t,a,e])},u=()=>{let[e]=(0,a.ok)(),t=c(),{pathname:i}=(0,r.zy)(),l=n.useCallback((n,r)=>{t({pathname:i,search:(0,a.PI)("function"==typeof n?n(e):n).toString()},r)},[e,t,i]);return[e,l]}},68671:(e,t,i)=>{i.d(t,{Y:()=>a,h:()=>s});var n=i(96540),r=i(35822);let l=e=>e;function a(e){let t=n.useRef({}),i=n.useRef({}),a=(e,i)=>{t.current[e](i)},o=n.useRef(a);o.current=a;let s=n.useRef(new ResizeObserver(e=>{for(let t of e){let e=t.target,i="data-key",n=e.getAttribute(i);if(null===n)throw Error(`Value not found, for '${i}' attribute`);o.current(n,e)}}));n.useEffect(()=>{let e=s.current;return()=>{e.disconnect()}},[]);let{size:d,keyExtractor:c=l}=e,u=n.useMemo(()=>{let e=e=>t=>{i.current[e]&&s.current.unobserve(i.current[e]),t&&(o.current(e,t),s.current.observe(t)),i.current[e]=t},t={};for(let i=0;i<d;i++){let n=c(i);t[n]=e(n)}return t},[d,c]),f=(0,r.z)(e),h=f.virtualItems.map(e=>(t.current[e.key]=e.measureRef,{...e,measureRef:u[e.key]}));return{...f,virtualItems:h}}var o=i(65482);function s({additionalScrollOffset:e=0,scrollToFn:t,horizontal:i,parentRef:l,useVirtualImpl:a=r.z,...s}){let d=(0,n.useRef)(window),c=(0,n.useCallback)(()=>{let e=l.current?.getBoundingClientRect(),t=e?.top??0,n=e?.left??0;return i?-1*n:-1*t},[i,l]),u=(0,n.useCallback)(t=>{let n=t+((l.current?.getBoundingClientRect().top??0)+window.scrollY)+e;d.current?.scroll({top:i?0:n,left:i?n:0})},[e,i,l]);return a({...s,horizontal:i,parentRef:l,scrollToFn:t||u,onScrollElement:d,scrollOffsetFn:c,useObserver:()=>(function(e){let[t,i]=(0,n.useState)({height:0,width:0}),r=e.current;return(0,o.N)(()=>{if(!r)return;let e=()=>{let e={height:r.innerHeight,width:r.innerWidth};i(t=>t.height!==e.height||t.width!==e.width?e:t)};return e(),r.addEventListener("resize",e),()=>{r.removeEventListener("resize",e)}},[r]),t})(d)})}},1593:(e,t,i)=>{i.d(t,{z:()=>l});var n=i(74848),r=i(75177);let l=({onClick:e,id:t,children:i})=>(0,n.jsx)(r.A,{as:"button",type:"button",id:t,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",fontWeight:400,color:"fg.muted",width:"100%",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.default",cursor:"text",borderRadius:2,height:"var(--control-medium-size)",lineHeight:"var(--text-body-lineHeight-medium)",px:2},onClick:e,children:i});try{l.displayName||(l.displayName="CompactCommentButton")}catch{}},76971:(e,t,i)=>{i.d(t,{U:()=>c});var n=i(74848),r=i(1442),l=i(75177),a=i(96540),o=i(69583),s=i(82047),d=i(48867);function c({batchPending:e,batchingEnabled:t,commentBoxConfig:i,condensed:c,fileLevelComment:u,filePath:f,focusOnMount:h,isReplying:m,lineNumber:g,onAddComment:p,onCancelComment:x,onPersistedCommentExists:y,quotedText:b="",side:C,subjectId:v,threadId:N,suggestedChangesConfig:j}){let[k,L]=(0,a.useState)(b),[w,S]=(0,a.useState)(!1),[D,A]=(0,a.useState)(),E=(0,a.useRef)(null),{persistCommentToStorage:I,removePersistedCommentFromStorage:R}=(0,o.L)({diffSide:C,filePath:f,line:g,subjectId:v,threadId:N,handlePersistedCommentExists:({text:e})=>{e&&(L(e),y?.())},fileLevelComment:!!u});(0,a.useEffect)(()=>{h&&setTimeout(()=>{E.current?.scrollIntoView({behavior:"smooth",block:"end"}),E.current?.focus()},100)},[h]);let T=({submitBatch:e})=>{S(!0),A(void 0);let t=(0,s.u)(k,j?.sourceContentFromDiffLines??"");if(!t.isValid){A(t.errorMessage),S(!1);return}p?.({commentText:k,onCompleted(){S(!1),M()},onError(e){S(!1);let t="Failed to save comment";e.message&&(t=`${t}: ${e.message}`),A(t)},submitBatch:e})},F=()=>T({submitBatch:!1}),_=()=>T({submitBatch:!0}),M=()=>{R(),L(""),x?.()},O={footer:{justifyContent:m?"end":"space-between","> div:first-child":{display:c||m?"none":"flex"},...c&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,n.jsx)(l.A,{sx:{display:"flex",flexDirection:"column",fieldset:{minWidth:0,width:["100%"]}},children:(0,n.jsxs)(d.S,{ref:E,label:"Add diff comment",sx:O,value:k,onChange:e=>{A(void 0),I({text:e}),L(e)},onPrimaryAction:t?F:_,userSettings:i,suggestedChangesConfig:j,markdownErrorMessage:D,children:[x&&(0,n.jsx)(r.x,{disabled:w,sx:{py:1,px:2},variant:"default",onClick:M,children:"Cancel"}),!e&&(0,n.jsx)(r.x,{disabled:w||!k.length,sx:{py:1,px:2},variant:t?"default":"primary",onClick:_,children:m?"Reply":"Add comment"}),t&&(0,n.jsx)(r.x,{disabled:w||!k.length,sx:{py:1,px:2},variant:"primary",onClick:F,children:e?"Add review comment":"Start a review"})]})})}try{c.displayName||(c.displayName="AddCommentEditor")}catch{}},91951:(e,t,i)=>{i.d(t,{Y:()=>g});var n=i(74848),r=i(65617),l=i(57402),a=i(59857),o=i(30729),s=i(75177),d=i(69909),c=i(30631),u=i(55847),f=i(91151),h=i(49140);let m={[f.U.Failure]:(0,n.jsx)(o.A,{icon:a.StopIcon,sx:{fill:"danger.fg"}}),[f.U.Warning]:(0,n.jsx)(o.A,{icon:a.AlertIcon,sx:{fill:"attention.fg"}}),[f.U.Notice]:(0,n.jsx)(o.A,{icon:a.InfoIcon,sx:{fill:"fg.muted"}})};function g({annotation:e,ghostUser:t=r.t.ghostUser}){let i=e.checkSuite.app;return(0,n.jsxs)(s.A,{sx:{borderLeft:"6px solid",borderColor:h.GF[e.annotationLevel].primaryColor,p:4},children:[(0,n.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[m[e.annotationLevel],(0,n.jsx)(d.A,{sx:{fontWeight:600,color:"fg.muted",fontSize:0,pl:2},children:h.GF[e.annotationLevel].ariaLabel})]}),(0,n.jsx)(d.A,{sx:{color:h.GF[e.annotationLevel].primaryColor,fontWeight:600,fontSize:1},children:e.title}),(0,n.jsx)(s.A,{sx:{mb:3,mt:1},children:e.message&&(0,n.jsx)(d.A,{sx:{fontFamily:"var(--fontStack-monospace)",fontSize:0,display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":"8",maxWidth:"unset"},children:e.message})}),(0,n.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(s.A,{sx:{flexGrow:2},children:[(0,n.jsx)(l.r,{src:i?.logoUrl??t.avatarUrl,alt:`${i?.name??t.login} avatar image`,"data-testid":"check-suite-app-avatar"}),(0,n.jsxs)(c.A,{sx:{ml:2,maxWidth:"300px"},inline:!0,title:`${e.checkSuite.name} / ${e.checkRun.name}`,children:[(0,n.jsx)(d.A,{sx:{fontWeight:600,fontSize:0},children:e.checkSuite.name})," /"," ",(0,n.jsx)(d.A,{sx:{fontSize:0},children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,n.jsx)(u.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{g.displayName||(g.displayName="Annotation")}catch{}},64751:(e,t,i)=>{i.d(t,{O:()=>d});var n=i(74848),r=i(59857),l=i(75177),a=i(87330),o=i(91951),s=i(67945);function d({annotation:e,markerNavigationImplementation:t,onClose:i,ghostUser:d}){return(0,n.jsxs)(l.A,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,n.jsx)(l.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,n.jsxs)(l.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,n.jsx)(s.k,{markerId:e.id,markerNavigationImplementation:t,onNavigate:i}),(0,n.jsx)(l.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:(0,n.jsx)(a.K,{unsafeDisableTooltip:!0,"aria-label":"Close annotation",icon:r.XIcon,variant:"invisible",onClick:i})})]})}),(0,n.jsx)(o.Y,{annotation:e,ghostUser:d})]})}try{d.displayName||(d.displayName="AnnotationDialog")}catch{}},49140:(e,t,i)=>{i.d(t,{GF:()=>d,S:()=>s,Xh:()=>a});var n=i(74848),r=i(38267),l=i(91151);function a({annotationLevel:e,...t}){let{icon:i,...r}=d[e];return function({fill:e,stroke:t,ariaLabel:i,svgHtml:r,className:l}){return(0,n.jsx)("svg",{"aria-label":i,className:l,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:r})}({...i,...r,...t})}let o=(0,r.i7)(["0%{opacity:0;}100%{opacity:1;}"]),s=(0,r.Ay)(a).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-306ab24a-0"})(["animation:"," 0.1s ease-in;"],o),d={[l.U.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,n.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[l.U.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,n.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[l.U.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,n.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,n.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{a.displayName||(a.displayName="AnnotationIcon")}catch{}try{s.displayName||(s.displayName="AnimatedAnnotationIcon")}catch{}},26050:(e,t,i)=>{i.d(t,{z:()=>h});var n=i(74848),r=i(75177),l=i(96540),a=i(46116),o=i(79441),s=i(22040),d=i(16306),c=i(43795),u=i(50696),f=i(24039);function h({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:i}=(0,a.W)(),[h,m]=(0,l.useState)(!1),g=(0,l.useRef)(),{pendingSuggestedChangesBatch:p,submitSuggestedChanges:x}=e,y=(0,o.c0)(t,p),b=0===p.length,{isValid:C,reason:v}=(0,o.EJ)(t,p),N=(0,l.useMemo)(()=>y?p:[t],[y,p,t]),j=(0,l.useCallback)(e=>{m(e),i?.(e)},[i]),k=(0,l.useCallback)(()=>{if(j(!1),g.current){let e=g.current.current;setTimeout(()=>e?.focus())}},[j]),L=(0,l.useCallback)(e=>{j(!0),g.current=e},[j,g]),w=(0,l.useCallback)((e,t,i)=>{x({suggestedChanges:N,commitMessage:e,onCompleted:()=>{k(),i()},onError:t})},[k,x,N]);return(0,n.jsxs)(r.A,{sx:{p:2,borderTop:"1px solid",borderColor:"border.default"},children:[y&&(0,n.jsx)(f.B,{commentingImplementation:e,suggestedChange:t,onOpenDialog:L}),!y&&!C&&v&&(0,n.jsx)(u.s,{reason:v,sx:{m:0}}),!y&&b&&(0,n.jsx)(d.a,{commentingImplementation:e,suggestedChange:t,onOpenDialog:L}),!y&&C&&!b&&(0,n.jsx)(s.k,{commentingImplementation:e,suggestedChange:t}),h&&(0,n.jsx)(c.$,{authorLogins:N.map(e=>e.authorLogin),batchSize:N.length,onClose:k,onCommit:w})]})}try{h.displayName||(h.displayName="CodeSuggestionActions")}catch{}},22040:(e,t,i)=>{i.d(t,{k:()=>o});var n=i(74848),r=i(63494),l=i(75177),a=i(55847);function o({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:i}=(0,r.s)();return(0,n.jsx)(l.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,n.jsx)(a.Q,{variant:"primary",onClick:()=>{i("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{o.displayName||(o.displayName="AddToExistingBatch")}catch{}},16306:(e,t,i)=>{i.d(t,{a:()=>m});var n=i(74848),r=i(63494),l=i(59857),a=i(75177),o=i(6185),s=i(55847),d=i(87330),c=i(281),u=i(17909),f=i(96540);let h={addSuggestionToBatch:{text:"Add suggestion to batch"},applySuggestion:{text:"Apply suggestion"}};function m({commentingImplementation:e,onOpenDialog:t,suggestedChange:i}){let{sendAnalyticsEvent:m}=(0,r.s)(),[g,p]=(0,f.useState)(h.addSuggestionToBatch),[x,y]=(0,f.useState)(!1),b=(0,f.useRef)(null),C=(0,f.useRef)(null),v=()=>y(!x),{addSuggestedChangeToPendingBatch:N}=e,j=(0,f.useCallback)(()=>{g===h.addSuggestionToBatch&&(N(i),m("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),g===h.applySuggestion&&t(C)},[N,t,g,m,i]);return(0,n.jsx)(a.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,n.jsxs)(o.A,{children:[(0,n.jsx)(s.Q,{variant:"primary",onClick:j,ref:C,children:g.text}),(0,n.jsx)(d.K,{unsafeDisableTooltip:!0,ref:b,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:l.TriangleDownIcon,size:"medium",variant:"primary",onClick:v}),(0,n.jsx)(c.W,{anchorRef:b,open:x,onOpenChange:v,children:(0,n.jsx)(c.W.Overlay,{width:"medium",children:(0,n.jsx)(u.l,{selectionVariant:"single",children:Object.keys(h).map(e=>{let t=h[e];return(0,n.jsx)(u.l.Item,{selected:g===t,onSelect:()=>p(t),children:t.text},e)})})})})]})})}try{m.displayName||(m.displayName="ApplyOrAddToBatch")}catch{}},43795:(e,t,i)=>{i.d(t,{$:()=>y});var n=i(74848),r=i(63494),l=i(6390),a=i(94120),o=i(82678),s=i(75177),d=i(38553),c=i(66889),u=i(44981),f=i(61043),h=i(86079),m=i(96540);function g({children:e,footerButtons:t}){let{containerRef:i}=(0,o.G)({bindKeys:a.z0.ArrowHorizontal|a.z0.Tab,focusInStrategy:"closest"});return t?(0,n.jsx)(h.l.Footer,{ref:i,children:(0,n.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,n.jsx)(s.A,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"flex-end"},children:(0,n.jsx)(h.l.Buttons,{buttons:t})}),e]})}):null}let p={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function x(e,t){switch(t.type){case p.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case p.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function y({authorLogins:e,batchSize:t,onClose:i,onCommit:a}){let o=(0,l.A)(),{sendAnalyticsEvent:y}=(0,r.s)(),[b,C]=(0,m.useState)(!1),[v,N]=(0,m.useState)(),[j,k]=(0,m.useReducer)(x,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),L=(0,m.useCallback)((e,t,i)=>{if(!o())return;let n="There was an error trying to commit changes";i?n+=`: ${i}`:n+=".",C(!1),N(n)},[o]),w=(0,m.useCallback)(()=>{o()&&(C(!1),v&&N(void 0))},[v,o]),S=(0,m.useCallback)(()=>{b||(C(!0),y("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),a(`${j.commitMessage}

${j.extendedDescription}`,L,w))},[t,j.commitMessage,j.extendedDescription,w,L,b,a,y]);return(0,n.jsxs)(h.l,{title:"Apply suggestion",renderFooter:()=>(0,n.jsx)(g,{footerButtons:[{content:"Cancel",onClick:i},{content:(0,n.jsxs)(s.A,{as:"span",sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:["Commit changes",b&&(0,n.jsx)(d.A,{size:"small",sx:{ml:1}})]}),onClick:S,buttonType:"primary"}],children:v&&(0,n.jsx)(c.A.Validation,{sx:{mt:2,pt:1,justifyContent:"flex-end"},variant:"error",children:v})}),onClose:i,children:[(0,n.jsxs)(c.A,{sx:{mb:2},children:[(0,n.jsx)(c.A.Label,{children:"Commit message"}),(0,n.jsx)(u.A,{block:!0,name:"commit_message",onChange:e=>k({type:p.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:j.commitMessage})]}),(0,n.jsxs)(c.A,{children:[(0,n.jsx)(c.A.Label,{children:"Extended description (optional)"}),(0,n.jsx)(f.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>k({type:p.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:j.extendedDescription})]})]})}try{g.displayName||(g.displayName="DialogFooter")}catch{}try{y.displayName||(y.displayName="ApplySuggestionDialog")}catch{}},50696:(e,t,i)=>{i.d(t,{s:()=>a});var n=i(74848),r=i(75177),l=i(69909);function a({reason:e,sx:t}){return(0,n.jsx)(r.A,{sx:{m:2,...t},children:(0,n.jsx)(l.A,{as:"small",sx:{color:"fg.muted"},children:e})})}try{a.displayName||(a.displayName="CodeSuggestionUnavailable")}catch{}},24039:(e,t,i)=>{i.d(t,{B:()=>d});var n=i(74848),r=i(63494),l=i(75177),a=i(85053),o=i(55847),s=i(96540);function d({commentingImplementation:e,onOpenDialog:t,suggestedChange:i}){let d=(0,s.useRef)(null),c=(0,s.useCallback)(()=>{t(d)},[t]),u=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:f}=(0,r.s)();return(0,n.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,n.jsx)(a.A,{variant:"attention",sx:{my:"auto"},children:"Pending in batch"}),(0,n.jsxs)(l.A,{sx:{display:"flex",gap:2},children:[(0,n.jsx)(o.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(i),f("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,n.jsx)(o.Q,{ref:d,size:"medium",count:u,variant:"primary",onClick:c,children:`Apply suggestion${u>1?"s":""}`})]})]})}try{d.displayName||(d.displayName="CommitOrRemoveFromBatch")}catch{}},48867:(e,t,i)=>{i.d(t,{S:()=>o});var n=i(74848),r=i(26188),l=i(96540),a=i(99803);let o=(0,l.forwardRef)(({children:e,...t},i)=>{let l=(0,a.n)();return(0,n.jsx)(r.h,{...t,ref:i,placeholder:"Leave a comment",actions:e,subject:l??void 0,showLabel:!1})});o.displayName="ConversationCommentBox"},67945:(e,t,i)=>{i.d(t,{k:()=>d});var n=i(74848),r=i(59857),l=i(69909),a=i(75177),o=i(87330);function s({markerId:e,markers:t}){let i=t.findIndex(t=>t.id===e);return(0,n.jsxs)(l.A,{sx:{color:"fg.muted"},children:[(0,n.jsx)(l.A,{sx:{fontWeight:500,color:"fg.default"},children:i+1})," of"," ",(0,n.jsx)(l.A,{sx:{fontWeight:500,color:"fg.default"},children:t.length})]})}function d({markerId:e,markerNavigationImplementation:t,onNavigate:i}){let{incrementActiveMarker:l,decrementActiveMarker:d,filteredMarkers:c}=t;return c.find(t=>t.id===e)&&c.length>1?(0,n.jsxs)(a.A,{sx:{pr:1,display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,n.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Load previous marker",icon:r.ChevronLeftIcon,variant:"invisible",onClick:()=>{d(e),i()}}),(0,n.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Load next marker",icon:r.ChevronRightIcon,variant:"invisible",onClick:()=>{l(e),i()}}),(0,n.jsx)(a.A,{sx:{ml:1},children:(0,n.jsx)(s,{markerId:e,markers:c})})]}):null}try{s.displayName||(s.displayName="MarkerPosition")}catch{}try{d.displayName||(d.displayName="GlobalMarkerNavigation")}catch{}},29979:(e,t,i)=>{i.d(t,{c:()=>h});var n=i(74848),r=i(33132),l=i(85349),a=i(75177),o=i(38553),s=i(96540),d=i(46116),c=i(64751),u=i(14300),f=i(85588);function h(e){return(0,n.jsx)(d.j,{children:(0,n.jsx)(m,{...e})})}function m({annotations:e,commentingImplementation:t,conversationAnchorRef:i,conversationListAnchorRef:h,conversationListThreads:m,isMarkerListOpen:g,fileAnchor:p,filePath:x,onAnnotationSelected:y,onCloseConversationDialog:b,onCloseConversationList:C,onThreadSelected:v,returnFocusRef:N,selectedAnnotationId:j,selectedThreadId:k,threadsConnectionId:L,markerNavigationImplementation:w,suggestedChangesConfig:S,ghostUser:D,...A}){let{isDialogOpen:E}=(0,d.W)(),[I,R]=(0,s.useState)(),{fetchThread:T}=t,F=(0,s.useCallback)(()=>!E&&b(),[E,b]),_=async e=>{R(void 0);let t=m.find(t=>t.id===e)?.isOutdated;R(await T(e,t))},M=(0,s.useMemo)(()=>{if(p&&I&&I.subject?.startDiffSide&&I.subject?.endDiffSide&&I.subject?.startLine&&I.subject?.endLine&&S?.configureSuggestedChangesFromLineRange){let e=I.subject?.startLine??I?.subject?.endLine,t=I.subject?.startDiffSide??I?.subject?.endDiffSide,i={diffAnchor:p,endLineNumber:I?.subject?.endLine,endOrientation:I.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right",startOrientation:"LEFT"===t?"left":"right"};return S?.configureSuggestedChangesFromLineRange(i)}},[p,I,S]);(0,s.useEffect)(()=>{!k&&I?R(void 0):k&&k!==I?.id&&_(k)},[T,k]);let O=k||j,H=j?e.find(e=>e.id===j):void 0;return(0,n.jsx)(n.Fragment,{children:O?(0,n.jsx)(l.T,{align:"end",anchorRef:i,focusZoneSettings:{disabled:!0},open:!0,focusTrapSettings:{disabled:!0},renderAnchor:null,overlayProps:{anchorSide:"outside-right","aria-label":`${k?"Pull Request Review Thread":"Pull Request Check Annotation"}`,id:"conversation-dialog",returnFocusRef:N,role:"dialog",sx:{width:"clamp(240px, 100vw, 540px)",borderRadius:2},onClickOutside:r.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:F,children:I?(0,n.jsx)(f.h,{commentingImplementation:t,filePath:x,thread:I,threads:m,threadsConnectionId:L,onClose:F,onThreadSelected:v,onRefreshThread:_,markerNavigationImplementation:w,suggestedChangesConfig:M,ghostUser:D,...A}):H?(0,n.jsx)(c.O,{annotation:H,markerNavigationImplementation:w,onClose:F,ghostUser:D}):(0,n.jsxs)(a.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,n.jsx)(o.A,{}),(0,n.jsx)("p",{children:"Loading comments"})]})}):g&&(0,n.jsx)(u.h,{anchorRef:h,annotations:e,handleOpenChange:C,threads:m,onShowCommentThread:v,onShowAnnotation:y,ghostUser:D})})}try{h.displayName||(h.displayName="Markers")}catch{}try{m.displayName||(m.displayName="MarkersInternal")}catch{}},14300:(e,t,i)=>{i.d(t,{h:()=>h});var n=i(74848),r=i(65617),l=i(57402),a=i(59857),o=i(281),s=i(17909),d=i(75177),c=i(69909),u=i(30729),f=i(49140);function h({anchorRef:e,annotations:t,handleOpenChange:i,threads:h,onShowAnnotation:m,onShowCommentThread:g,ghostUser:p=r.t.ghostUser}){function x(e){return{display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":e.toString(),maxWidth:"unset"}}return(0,n.jsx)(o.W,{anchorRef:e,open:!0,onOpenChange:i,children:(0,n.jsx)(o.W.Overlay,{width:"small",children:(0,n.jsx)("div",{children:(0,n.jsxs)(s.l,{children:[t.map(e=>(0,n.jsxs)(s.l.Item,{onSelect:()=>m(e.id),children:[(0,n.jsx)(s.l.LeadingVisual,{sx:{mr:2},children:(0,n.jsx)(f.Xh,{annotationLevel:e.annotationLevel},e.id)}),(0,n.jsxs)(d.A,{sx:{...x(2)},children:[e.checkSuite.name," /"," ",(0,n.jsx)(c.A,{sx:{fontWeight:400,color:"fg.muted"},children:e.checkRun.name})]}),(0,n.jsx)(s.l.Description,{variant:"block",children:(0,n.jsx)(d.A,{sx:{...x(1)},children:e.title})}),(0,n.jsx)(s.l.TrailingVisual,{children:(0,n.jsx)(u.A,{icon:a.ArrowRightIcon})})]},e.id)),h.map(e=>(0,n.jsxs)(s.l.Item,{onSelect:()=>g(e.id),children:[(0,n.jsx)(s.l.LeadingVisual,{sx:{mr:2},children:(0,n.jsx)(l.r,{alt:e.author.login,size:20,src:e.author.avatarUrl??p.avatarUrl})}),"Thread by ",e.author.login,(0,n.jsxs)(s.l.Description,{variant:"block",children:[e.commentCount," comment",e.commentCount>1?"s":""]}),(0,n.jsx)(s.l.TrailingVisual,{children:(0,n.jsx)(u.A,{icon:a.ArrowRightIcon})})]},e.id))]})})})})}try{h.displayName||(h.displayName="MarkersListActionMenu")}catch{}},23032:(e,t,i)=>{i.d(t,{H:()=>h});var n=i(74848),r=i(1593),l=i(63494),a=i(75177),o=i(96540),s=i(72295),d=i(79441),c=i(76971),u=i(93249),f=i(13831);function h({batchingEnabled:e,batchPending:t,commentAnchorPrefix:i,commentingImplementation:h,commentsConnectionId:m,filePath:g,hideDiffPreview:p,onRefreshThread:x,repositoryId:y,subject:b,subjectId:C,tabSize:v,thread:N,threadsConnectionId:j,shouldLimitHeight:k=!0,suggestedChangesConfig:L,viewerData:w,ghostUser:S}){let[D,A]=(0,o.useState)(!1),[E,I]=(0,o.useState)(void 0),{sendAnalyticsEvent:R}=(0,l.s)(),{addThreadReply:T}=h,F=e=>{I(e),A(!0)};if(null===N.commentsData.comments||N.commentsData.comments.length<1)return null;let _=(0,d.Lm)(N),M="LINE"===N.subjectType?{lineRange:_}:void 0;return(0,n.jsx)(a.A,{"data-testid":"review-thread",children:(0,n.jsxs)(a.A,{sx:k?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!p&&N.isOutdated&&(0,n.jsx)(f.i,{tabSize:v??4,thread:N}),N.commentsData.comments.map((e,t)=>(0,n.jsx)(u.U,{isAnchorable:!0,index:t,isLastChild:t===N.commentsData.comments.length-1,anchorPrefix:i,comment:e,commentConnectionId:N.commentsData.__id,commentingImplementation:h,filePath:g,isOutdated:N.isOutdated,repositoryId:y,subject:b,subjectId:C,threadId:N.id,onRefreshThread:x,onQuoteReply:F,threadCommentCount:N.commentsData.comments.length,threadsConnectionId:j,isThreadResolved:!!N.isResolved,suggestedChangesConfig:L,applySuggestedChangesValidationData:M,viewerData:w,ghostUser:S},e.id)),N.viewerCanReply&&(0,n.jsxs)(a.A,{sx:{backgroundColor:"canvas.inset",borderBottomLeftRadius:2,borderBottomRightRadius:2,p:2},children:[D&&(0,n.jsx)(c.U,{batchingEnabled:e,batchPending:t,commentBoxConfig:h.commentBoxConfig,condensed:!1,fileLevelComment:!0,filePath:g,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{A(!1),R("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},repositoryId:y,quotedText:E,subjectId:C,threadId:N.id,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:n})=>{let r=[];N.commentsData.__id&&r.push(N.commentsData.__id),m&&r.push(m),T({commentsConnectionIds:r,filePath:g,thread:N,text:e,submitBatch:n,onCompleted:e=>{e&&(0,s.p)(e.toString()),t?.(),x?.(N.id)},onError:i,threadsConnectionId:j}),R("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:L}),!D&&(0,n.jsx)(r.z,{onClick:()=>{R("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),A(!0)},children:"Write a reply"})]})]})})}try{h.displayName||(h.displayName="ReviewThread")}catch{}},93249:(e,t,i)=>{i.d(t,{U:()=>C});var n=i(74848),r=i(26188),l=i(68855),a=i(65617),o=i(33132),s=i(80712),d=i(77491),c=i(87098),u=i(94686),f=i(17902),h=i(75177),m=i(96540),g=i(72295),p=i(69583),x=i(82047),y=i(48867),b=i(70147);function C({isAnchorable:e=!1,index:t=0,isLastChild:i,isOutdated:C,isThreadResolved:v,anchorPrefix:N="r",comment:j,commentingImplementation:k,filePath:L,hideActions:w,onRefreshThread:S,onQuoteReply:D=o.l,subjectId:A,subject:E,threadCommentCount:I,threadId:R,threadsConnectionId:T,suggestedChangesConfig:F,applySuggestedChangesValidationData:_,viewerData:M,ghostUser:O=a.t.ghostUser}){let{addToast:H}=(0,f.Y6)(),[B,P]=(0,m.useState)(!1),[U,$]=(0,m.useState)(j.isHidden),[W,K]=(0,m.useState)(j.body),[V,q]=(0,m.useState)(!1),[z,G]=(0,m.useState)(),{persistCommentToStorage:X,removePersistedCommentFromStorage:Q}=(0,p.L)({subjectId:A,filePath:L,fileLevelComment:"FILE"===j.subjectType,threadId:j.id,handlePersistedCommentExists:({text:e})=>{e&&K(e)}}),{editComment:Y,deleteComment:J,hideComment:Z,unhideComment:ee,lazyFetchReactionGroups:et,lazyFetchEditHistory:ei}=k,en=(0,m.useRef)(null),er=(0,m.useRef)(null),el=()=>{en.current?.focus()};(0,m.useEffect)(()=>{B&&setTimeout(el)},[B]);let ea=(0,m.useCallback)(()=>{q(!0);let e=(0,x.u)(W,F?.sourceContentFromDiffLines??"");if(!e.isValid){G(e.errorMessage),q(!1);return}Y({text:W,comment:j,onCompleted:()=>{P(!1),q(!1),Q(),S?.(R)},onError:()=>{q(!1),H({type:"error",message:"Failed to update comment"})}})},[H,W,j,Y,S,Q,F,R]),eo=j.currentDiffResourcePath?.split("#r").pop(),es=eo?`${N}${eo}`:void 0,ed=es&&u.fV?new URL(`${u.fV.pathname}#${es}`,u.fV.origin).toString():void 0,ec=(0,m.useRef)(null);(0,m.useEffect)(()=>{e&&eo&&es&&window.location.hash.split("#").pop()===es&&((0,g.p)(eo,N),ec.current?.focus())},[N,es,eo,e]);let eu={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},ef=t>0,eh=t>1,em=k.suggestedChangesEnabled,eg=B?"editing":U?"hidden":"visible";return(0,n.jsxs)(h.A,{ref:ec,id:e?es:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":eu,":focus":eu,pb:ef?0:2},children:[eh&&(0,n.jsx)(h.A,{sx:{display:"flex",pl:ef?1:0},children:(0,n.jsx)(h.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,n.jsx)(h.A,{sx:{px:3,pt:eh?0:2,pb:0},children:(0,n.jsx)(l.R,{headingProps:{as:"h5"},avatarUrl:j.author?.avatarUrl??O.avatarUrl,comment:{...j,url:ed??"",referenceText:j.reference.text??`#${j.reference.number}`},commentRef:ec,deleteComment:()=>{J({commentId:j.id,onCompleted:()=>{S?.(R)},onError:()=>{q(!1),H({type:"error",message:"Failed to delete comment"})},threadCommentCount:I,threadId:R,threadsConnectionId:T,filePath:L})},editComment:()=>{P(!0)},hideComment:e=>{Z({commentId:j.id,reason:e,onCompleted:()=>{S?.(R)},onError:()=>{q(!1),H({type:"error",message:"Failed to hide comment"})}})},onMinimize:$,isMinimized:U,commentAuthorLogin:j.author?.login??O.login,navigate:o.l,commentSubjectAuthorLogin:j.reference?.author?.login??"",commentSubjectType:k.commentSubjectType,onReplySelect:D,unhideComment:()=>{ee({commentId:j.id,onCompleted:()=>{S?.(R)},onError:()=>{q(!1),H({type:"error",message:"Failed to unhide comment"})}})},hideActions:w,lazyFetchEditHistory:ei,isReply:!0})}),(0,n.jsxs)(h.A,{sx:{display:"flex",pl:ef?1:0},children:[ef&&(0,n.jsx)(h.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...i&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===eg&&(0,n.jsx)(h.A,{sx:{pr:2,pl:ef?0:2,pb:2,pt:1,flexGrow:1},children:(0,n.jsxs)(y.S,{ref:en,label:"Update comment",value:W,onChange:e=>{X({text:e}),K(e),G(void 0)},onPrimaryAction:ea,userSettings:k.commentBoxConfig,suggestedChangesConfig:F,markdownErrorMessage:z,children:[(0,n.jsx)(r.x,{variant:"default",onClick:()=>{P(!1),Q(),K(j.body)},children:"Cancel"}),(0,n.jsx)(r.x,{disabled:V||!W.length,variant:"primary",onClick:ea,children:"Update"})]})}),"visible"===eg&&(0,n.jsx)(h.A,{sx:ef?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:j.bodyHTML&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.oG,{ref:er,className:"markdown-body","comment-testid":`Comment body html for comment ${j.id}`,html:j.bodyHTML,sx:{mt:1,fontSize:1}}),(0,n.jsx)(h.A,{sx:{display:"flex",flexDirection:"column",mt:3},children:et?(0,n.jsx)(m.Suspense,{fallback:(0,n.jsx)(d.e,{}),children:(0,n.jsx)(s.ReactionViewerQueryComponent,{id:j.id})}):(0,n.jsx)(s.ReactionViewer,{reactionGroups:j,subjectId:j.id})}),em&&_&&(0,n.jsx)(b.v,{comment:j,commentBodyRef:er,commentingImplementation:k,filePath:L,isOutdated:C,isThreadResolved:v,threadId:R,suggestedChangesConfig:F,applySuggestedChangesValidationData:_,subject:E,viewerData:M})]})})]})]})}try{C.displayName||(C.displayName="ReviewThreadComment")}catch{}},85588:(e,t,i)=>{i.d(t,{h:()=>y});var n=i(74848),r=i(17902),l=i(63494),a=i(59857),o=i(69909),s=i(75177),d=i(85053),c=i(87330),u=i(38553),f=i(80577),h=i(96540),m=i(67945),g=i(23032);function p({children:e}){return(0,n.jsx)(o.A,{sx:{fontWeight:500,color:"fg.default"},children:e})}function x({thread:e}){if(!e?.diffSide||!e.line||!e.startLine||!e.startDiffSide)return null;let t="LEFT"===e.startDiffSide?"L":"R",i="LEFT"===e.diffSide?"L":"R";return(0,n.jsxs)(o.A,{sx:{color:"fg.muted"},children:["\xb7 Comment on lines"," ",(0,n.jsxs)(p,{children:[t,e.startLine]})," ","to"," ",(0,n.jsxs)(p,{children:[i,e.line]})]})}function y({commentingImplementation:e,filePath:t,onClose:i,onRefreshThread:o,thread:p,threads:y,threadsConnectionId:b,markerNavigationImplementation:C,ghostUser:v,...N}){let{sendAnalyticsEvent:j}=(0,l.s)(),{resolveThread:k,unresolveThread:L,resolvingEnabled:w}=e,S=y.find(e=>e.id===p.id),D=p.commentsData.comments.length>0,A=!!p.isResolved,{addToast:E}=(0,r.Y6)(),I=S?.commentsConnectionId;return D?(0,n.jsxs)(s.A,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,n.jsx)(s.A,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,n.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.k,{markerId:p.id,markerNavigationImplementation:C,onNavigate:i}),(0,n.jsx)(x,{thread:S})]}),(0,n.jsxs)(s.A,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:[A&&(0,n.jsx)(d.A,{variant:"done",size:"large",children:"Resolved"}),w&&(0,n.jsx)(f.m,{text:A?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,n.jsx)(c.K,{"aria-labelledby":"resolve-conversation",unsafeDisableTooltip:!0,icon:A?a.CheckCircleFillIcon:a.CheckCircleIcon,sx:{color:A?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:A?()=>{L({thread:p,onCompleted:()=>o(p.id),onError:()=>{E({type:"error",message:"Failed to unresolve thread"})}}),j("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON")}:()=>{k({thread:p,onCompleted:()=>o(p.id),onError:()=>{E({type:"error",message:"Failed to resolve thread"})}}),j("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON")}})}),(0,n.jsx)(c.K,{unsafeDisableTooltip:!0,"aria-label":"Close thread",icon:a.XIcon,variant:"invisible",onClick:i})]})]})}),(0,n.jsx)(h.Suspense,{fallback:(0,n.jsxs)(s.A,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,n.jsx)(u.A,{}),(0,n.jsx)("p",{children:"Loading comments"})]}),children:(0,n.jsx)(g.H,{commentingImplementation:e,commentsConnectionId:I,filePath:t,onRefreshThread:o,thread:p,threadsConnectionId:b,...N,ghostUser:v})})]}):null}try{p.displayName||(p.displayName="Emphasis")}catch{}try{x.displayName||(x.displayName="MultineLineThreadBanner")}catch{}try{y.displayName||(y.displayName="ReviewThreadDialog")}catch{}},54015:(e,t,i)=>{i.d(t,{c:()=>d});var n=i(74848),r=i(33132),l=i(63494),a=i(85349),o=i(96540),s=i(29343);function d({align:e="end",anchorRef:t,isOpen:i,returnFocusRef:d,onCloseCommentDialog:c,suggestedChangesConfig:u,...f}){let{sendAnalyticsEvent:h}=(0,l.s)(),m=(0,o.useMemo)(()=>{if(i&&u?.configureSuggestedChangesFromLineRange)return u.configureSuggestedChangesFromLineRange(u?.selectedDiffRowRange,u?.shouldStartNewConversationWithSuggestedChange)},[i,u]);return i?(0,n.jsx)(a.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:i,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",returnFocusRef:d,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:r.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:c,children:(0,n.jsx)(s.O,{onClose:()=>{c(),h("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:m,...f})}):null}try{d.displayName||(d.displayName="StartConversation")}catch{}},29343:(e,t,i)=>{i.d(t,{O:()=>f});var n=i(74848),r=i(57402),l=i(59857),a=i(75177),o=i(73729),s=i(69909),d=i(87330),c=i(72295),u=i(76971);function f({addCommentDialogTitle:e,isLeftSide:t,filePath:i,lineNumber:f,onAddComment:h,onClose:m,viewerData:g,threadsConnectionId:p,...x}){return(0,n.jsxs)(a.A,{sx:{px:2,pb:2,pt:1},children:[(0,n.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)(o.A,{as:"h4",sx:{fontSize:1,ml:2,py:2},children:[(0,n.jsx)(r.r,{alt:g.login,size:24,src:g.avatarUrl||"",sx:{mr:2}}),(0,n.jsx)(s.A,{children:e??"Add a comment"})]}),m&&(0,n.jsx)(d.K,{unsafeDisableTooltip:!0,variant:"invisible",icon:l.XIcon,onClick:m,"aria-label":"Cancel"})]}),(0,n.jsx)(u.U,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:i,lineNumber:f,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:r})=>{h({text:e,onError:n,onCompleted:(e,i)=>{i&&(0,c.p)(i.toString()),t?.(e,i)},submitBatch:r,filePath:i,threadsConnectionId:p})},onCancelComment:m,side:t?"LEFT":"RIGHT",...x})]})}try{f.displayName||(f.displayName="StartThreadComment")}catch{}},13831:(e,t,i)=>{i.d(t,{i:()=>g});var n=i(74848),r=i(40582),l=i(75096),a=i(87098),o=i(75177),s=i(69909),d=i(20053),c=i(96540);function u({line:e,children:t}){return(0,n.jsx)("td",{className:"diff-line-number",style:{backgroundColor:(0,r.gK)(e.type,!0),textAlign:"center"},children:(0,n.jsx)("code",{children:t})})}function f({line:e}){return(0,n.jsx)("td",{colSpan:4,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},valign:"top",children:(0,n.jsxs)(o.A,{sx:{display:"flex",flexDirection:"row"},children:[(0,n.jsx)(l.P4,{}),(0,n.jsx)("code",{className:"diff-text-cell hunk",children:(0,n.jsx)(a.mo,{className:"diff-text-inner color-fg-muted",html:e.html})})]})})}function h({line:e,tabSize:t}){let i="HUNK"===e.type,o="ADDITION"!==e.type,s="DELETION"!==e.type,{getTextIndent:h,getPaddingLeft:m}=(0,c.useMemo)(()=>(0,l.oW)(e.text,t),[e,t]),g="ADDITION"===e.type?"+":"DELETION"===e.type?"-":void 0;return(0,n.jsxs)("tr",{children:[i&&(0,n.jsx)(f,{line:e}),!i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u,{line:e,children:o&&e.left}),(0,n.jsx)(u,{line:e,children:s&&e.right}),(0,n.jsx)("td",{className:"diff-text-cell",style:{backgroundColor:(0,r.gK)(e.type,!1)},children:(0,n.jsxs)("code",{className:(0,d.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===e.type,deletion:"DELETION"===e.type}),children:[!!g&&(0,n.jsx)("span",{className:"diff-text-marker",children:g}),(0,n.jsx)(a.mo,{className:"diff-text-inner",html:e.html,style:{backgroundColor:(0,r.gK)(e.type,!1),paddingLeft:m(),textIndent:h()}})]})})]})]})}function m({sx:e,lines:t,lineWidth:i,tabSize:r}){let a=t.map((e,t)=>(0,n.jsx)(h,{line:e,tabSize:r},t));return(0,n.jsx)(o.A,{as:"table",className:"tab-size","data-tab-size":r,sx:{borderTop:0,borderBottom:0,borderLeft:1,borderRight:1,borderStyle:"solid",borderColor:"border.muted",...e},children:(0,n.jsx)(l.Qe,{lineWidth:i,children:a})})}function g({sx:e,tabSize:t,thread:i,hideHeaderDetails:a,diffTableSx:d}){if(!i.subject?.diffLines||i.subject?.diffLines.length<1)return null;let c=(0,r.c7)(i.subject.diffLines);return(0,n.jsxs)(o.A,{sx:{m:3,border:0,borderBottomWidth:6,borderStyle:"solid",borderColor:"border.muted",borderBottomLeftRadius:2,borderBottomRightRadius:2,...e},children:[!a&&(0,n.jsx)(o.A,{sx:{borderWidth:1,borderStyle:"solid",borderTopLeftRadius:2,borderTopRightRadius:2,borderColor:"border.muted",color:"fg.muted",px:2,py:1},children:(0,n.jsxs)(s.A,{sx:{fontSize:0,color:"fg.muted"},children:["Line"," ",(0,l.Ah)({originalStartLine:i.subject.originalStartLine,originalEndLine:i.subject.originalEndLine,startDiffSide:i.subject.startDiffSide,endDiffSide:i.subject.endDiffSide}),", commit ",(0,n.jsx)("code",{children:i.subject.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,n.jsx)(m,{lineWidth:c,lines:i.subject.diffLines,tabSize:t,sx:d})]})}try{u.displayName||(u.displayName="StaticLineNumberCell")}catch{}try{f.displayName||(f.displayName="StaticHunkCell")}catch{}try{h.displayName||(h.displayName="StaticUnifiedDiffRow")}catch{}try{m.displayName||(m.displayName="StaticUnifiedDiffLines")}catch{}try{g.displayName||(g.displayName="StaticUnifiedDiffPreview")}catch{}},70147:(e,t,i)=>{i.d(t,{v:()=>c});var n=i(74848),r=i(65482),l=i(96540),a=i(40961),o=i(79441),s=i(26050),d=i(50696);function c({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:i,commentingImplementation:c,filePath:u,isOutdated:f,isThreadResolved:h,subject:m,suggestedChangesConfig:g,threadId:p,viewerData:x}){let y=function(e,t,i,n,a){let[o,s]=(0,l.useState)();return(0,r.N)(()=>{if(!e.current||"LINE"!==t.subjectType)return;let r=[...e.current.getElementsByClassName("js-apply-changes")];if(r.length>0){let e=[];for(let l of r){let r=l?.closest("div.js-suggested-changes-blob");if(!r)continue;let o=[...r.querySelectorAll(".js-blob-code-addition")];a.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:i,ref:l,suggestion:o.map(e=>e.textContent),lineRange:a.lineRange,threadId:n})}s(e)}},[a.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,i,n]),o}(i,t,u,p,e);return(0,n.jsx)(n.Fragment,{children:y?.length&&y.map(i=>{let{isValid:r,reason:l}=(0,o.o_)({suggestedChange:i,isOutdated:f,isPending:"PENDING"===t.state,isResolved:h,pullRequestIsClosed:m?.state!=="OPEN",pullRequestIsInMergeQueue:!!m?.isInMergeQueue,userCanApplySuggestion:!!x?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:g});return!r&&l?(0,a.createPortal)((0,n.jsx)(d.s,{reason:l}),i.ref):(0,a.createPortal)((0,n.jsx)(s.z,{commentingImplementation:c,suggestedChange:i}),i.ref)})})}try{c.displayName||(c.displayName="SuggestedChangeView")}catch{}},99803:(e,t,i)=>{i.d(t,{n:()=>l,u:()=>a});var n=i(96540);let r=(0,n.createContext)(null),l=()=>(0,n.useContext)(r),a=r.Provider;try{r.displayName||(r.displayName="ConversationMarkdownSubjectContext")}catch{}},46116:(e,t,i)=>{i.d(t,{W:()=>o,j:()=>a});var n=i(74848),r=i(96540);let l=(0,r.createContext)({});function a({children:e}){let[t,i]=(0,r.useState)(!1),a=(0,r.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:i}),[t,i]);return(0,n.jsx)(l.Provider,{value:a,children:e})}let o=()=>(0,r.useContext)(l);try{l.displayName||(l.displayName="DialogStateContext")}catch{}try{a.displayName||(a.displayName="DialogStateProvider")}catch{}},5752:(e,t,i)=>{i.d(t,{$:()=>d});var n=i(74848),r=i(59857),l=i(17909),a=i(38553),o=i(4836),s=i(31086);let d=e=>(0,n.jsx)(s.B,{errorFallback:(0,n.jsx)(c,{}),suspenseFallback:(0,n.jsx)(u,{}),Component:f,...e}),c=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.l.Divider,{}),(0,n.jsxs)(l.l.Item,{disabled:!0,children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.AlertIcon,{})}),"Copilot failed to load"]})]}),u=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.l.Divider,{}),(0,n.jsxs)(l.l.Item,{disabled:!0,children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(a.A,{size:"small"})}),"Copilot is loading..."]})]}),f=e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.l.Divider,{}),(0,n.jsx)(o.t,{eventContext:{prx:!0},leadingVisual:(0,n.jsx)(r.CopilotIcon,{}),fileDiffReference:e.fileDiffReference})]});try{d.displayName||(d.displayName="CopilotDiffChatBlobActionsMenuItems")}catch{}try{c.displayName||(c.displayName="MenuItemError")}catch{}try{u.displayName||(u.displayName="MenuItemLoading")}catch{}try{f.displayName||(f.displayName="BaseCopilotDiffChatBlobActionsMenuItems")}catch{}},22094:(e,t,i)=>{i.d(t,{w:()=>h});var n=i(74848),r=i(59857),l=i(17909),a=i(38553),o=i(281),s=i(96540),d=i(18631),c=i(4836),u=i(91695),f=i(31086);let h=({selectedRange:e,...t})=>(0,n.jsx)(f.B,{errorFallback:(0,n.jsx)(m,{}),suspenseFallback:(0,n.jsx)(g,{}),componentProps:{selectedRange:e},Component:p,...t}),m=()=>(0,n.jsxs)(l.l.Item,{disabled:!0,children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.AlertIcon,{})}),"Copilot failed to load"]}),g=()=>(0,n.jsxs)(l.l.Item,{disabled:!0,children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(a.A,{size:"small"})}),"Copilot is loading..."]}),p=({fileDiffReference:e,selectedRange:t})=>{let i=(0,s.useMemo)(()=>{let i={...e};return t&&(i.selectedRange={start:`${t?.startOrientation[0]?.toUpperCase()??""}${t?.startLineNumber}`,end:`${t?.endOrientation[0]?.toUpperCase()??""}${t?.endLineNumber}`}),i},[e,t]);return(0,n.jsxs)(o.W,{children:[(0,n.jsx)(o.W.Anchor,{children:(0,n.jsxs)(l.l.Item,{children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.CopilotIcon,{})}),"Copilot"]})}),(0,n.jsx)(o.W.Overlay,{children:(0,n.jsxs)(l.l,{children:[(0,n.jsx)(c.t,{fileDiffReference:i,eventContext:{prx:!0}}),(0,n.jsx)(u.e,{fileDiffReference:i,eventContext:{prx:!0}}),(0,n.jsx)(d.i,{fileDiffReference:i,eventContext:{prx:!0}})]})})]})};try{h.displayName||(h.displayName="CopilotDiffChatContextMenu")}catch{}try{m.displayName||(m.displayName="MenuItemError")}catch{}try{g.displayName||(g.displayName="MenuItemLoading")}catch{}try{p.displayName||(p.displayName="BaseCopilotDiffChatContextMenu")}catch{}},31086:(e,t,i)=>{i.d(t,{B:()=>g,x:()=>f});var n=i(74848),r=i(6614),l=i(30966),a=i(96540),o=i(18312),s=i(63173);let d=i(2385),c=i(98868),u=i(91586),f=({children:e})=>{let{viewer:t}=(0,o.useLazyLoadQuery)(d,{});return t.isCopilotDotcomChatEnabled?(0,n.jsx)(n.Fragment,{children:e}):null},h=({Component:e,componentProps:t,queryVariables:i})=>{let{pullRequest:l}=(0,o.useLazyLoadQuery)(c,i),{diffEntry:a}=(0,o.useLazyLoadQuery)(u,i);(0,r.M)(l?.comparison),(0,r.M)(a);let d=(0,s.Kf)(l.comparison,a);return d?(0,n.jsx)(e,{fileDiffReference:d,...t}):null},m=({Component:e,componentProps:t,referenceData:i,queryVariables:l})=>{let{pullRequest:a}=(0,o.useLazyLoadQuery)(c,l);(0,r.M)(a?.comparison);let d=(0,s.hQ)(a?.comparison,i);return d?(0,n.jsx)(e,{fileDiffReference:d,...t}):null},g=({Component:e,componentProps:t,errorFallback:i=null,suspenseFallback:r=null,...o})=>(0,n.jsx)(l.t,{fallback:i,children:(0,n.jsx)(a.Suspense,{fallback:r,children:(0,n.jsx)(f,{children:o.referenceData?(0,n.jsx)(m,{Component:e,componentProps:t,referenceData:o.referenceData,queryVariables:o.queryVariables}):(0,n.jsx)(h,{Component:e,componentProps:t,queryVariables:o.queryVariables})})})});try{f.displayName||(f.displayName="CopilotCodeChatAccessLoader")}catch{}try{h.displayName||(h.displayName="CopilotCodeChatReferenceLoader")}catch{}try{m.displayName||(m.displayName="CopilotCodeChatComparisonLoader")}catch{}try{g.displayName||(g.displayName="DiffChatWrapper")}catch{}},18631:(e,t,i)=>{i.d(t,{i:()=>s});var n=i(74848),r=i(98620),l=i(502),a=i(17902),o=i(17909);let s=({fileDiffReference:e,eventContext:t,afterSelect:i})=>{let{addToast:s}=(0,a.Y6)();return(0,n.jsx)(o.l.Item,{onSelect:()=>{(0,r.Oc)(e),s({message:"Reference added to thread",type:"success"}),(0,l.BI)("copilot.file-diff.add",t),i?.()},children:"Attach to current thread"})};try{s.displayName||(s.displayName="DiffLinesAttachMenuItem")}catch{}},4836:(e,t,i)=>{i.d(t,{t:()=>s});var n=i(74848),r=i(98620),l=i(29020),a=i(502),o=i(17909);let s=({fileDiffReference:e,leadingVisual:t,eventContext:i,afterSelect:s})=>(0,n.jsxs)(o.l.Item,{onSelect:()=>{(0,r.qR)({intent:l.wh.conversation,references:[e]}),(0,a.BI)("copilot.file-diff.discuss",i),s?.()},children:[t&&(0,n.jsx)(o.l.LeadingVisual,{children:t}),"Ask about this diff"]});try{s.displayName||(s.displayName="DiffLinesDiscussMenuItem")}catch{}},91695:(e,t,i)=>{i.d(t,{e:()=>s});var n=i(74848),r=i(98620),l=i(29020),a=i(502),o=i(17909);let s=({fileDiffReference:e,eventContext:t,afterSelect:i})=>(0,n.jsx)(o.l.Item,{onSelect:()=>{(0,r.qR)({content:"Explain",intent:l.wh.explainFileDiff,references:[e]}),(0,a.BI)("copilot.file-diff.explain",t),i?.()},children:"Explain"});try{s.displayName||(s.displayName="DiffLinesExplainMenuItem")}catch{}},80092:(e,t,i)=>{i.d(t,{Fv:()=>m,kF:()=>g,F7:()=>h});var n=i(74848),r=i(59857),l=i(44981),a=i(281),o=i(87330),s=i(38553),d=i(17909),c=i(96540),u=i(20053);let f={filterLoadingHeight:"FileFilter-module__filterLoadingHeight--cW8BP"},h="No extension";function m({filterText:e,onFilterTextChange:t}){return(0,n.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,n.jsx)(l.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:r.SearchIcon,placeholder:"Filter files\u2026",value:e,onChange:e=>t?.(e.target.value)}),(0,n.jsxs)(a.W,{children:[(0,n.jsx)(a.W.Anchor,{children:(0,n.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Filter",icon:r.SlidersIcon,className:"flex-shrink-0"})}),(0,n.jsx)(a.W.Overlay,{className:(0,u.A)(f.filterLoadingHeight),children:(0,n.jsx)("div",{className:(0,u.A)("d-flex","flex-column","flex-justify-center","flex-items-center",f.filterLoadingHeight),children:(0,n.jsx)(s.A,{size:"medium"})})})]})]})}function g({filterText:e,onFilterTextChange:t,fileExtensions:i,unselectedFileExtensions:s,onFilterChange:u,additionalFilterGroups:f}){let[m,g]=(0,c.useState)(e),p=(e,t)=>{u?.(e?"selectFileExtension":"unselectFileExtension",{extension:t})},x=Array.from(i||[]).filter(e=>e!==h).sort(),y=e=>!s?.has(e),b=i?.has(h);return(0,n.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,n.jsx)(l.A,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:r.SearchIcon,placeholder:"Filter files\u2026",value:m,onChange:e=>{g(e.target.value),t?.(e.target.value)}}),(0,n.jsxs)(a.W,{children:[(0,n.jsx)(a.W.Anchor,{children:(0,n.jsx)(o.K,{unsafeDisableTooltip:!0,"aria-label":"Filter",icon:r.SlidersIcon,className:"flex-shrink-0"})}),(0,n.jsx)(a.W.Overlay,{children:(0,n.jsxs)(d.l,{children:[(0,n.jsxs)(d.l.Group,{selectionVariant:"multiple",children:[(0,n.jsx)(d.l.GroupHeading,{children:"File extensions"}),x.map(e=>{let t=y(e);return(0,n.jsx)(d.l.Item,{selected:t,onSelect:()=>p(!t,e),children:`${e}`},e)}),b&&(0,n.jsx)(d.l.Item,{selected:y(h),onSelect:()=>p(!y(h),h),children:h},h)]}),f]})})]})]})}try{m.displayName||(m.displayName="FileFilterLoading")}catch{}try{g.displayName||(g.displayName="FileFilterShared")}catch{}},14080:(e,t,i)=>{i.d(t,{E:()=>N});var n=i(74848),r=i(59857),l=i(64515),a=i(6185),o=i(55847),s=i(87330),d=i(281),c=i(17909),u=i(96540),f=i(81499),h=i(4561),m=i(87566),g=i(55515),p=i(51843),x=i(32447),y=i(75991);let b={position:"absolute",right:"-16px",top:"0px",zIndex:2},C="24px",v="30px",N=(0,u.forwardRef)(function({authorAvatarUrl:e,authorLogin:t,cellId:i,cellRef:N,showStartConversation:j,hasDraftComment:k,copilotChatReferenceData:L},w){let S=(0,u.useRef)(null),D=(0,u.useRef)(null),{commentingEnabled:A}=(0,f.y)(),{diffLine:E,isRowSelected:I}=(0,h.s)(),R=(0,u.useRef)(null),T=S.current?S:D;(0,l.T)(w,T);let F=E.threadsData?.totalCommentsCount||0,_=E.annotationsData?.totalCount||0,{isActionBarFocused:M,handleActionBarBlur:O,handleActionBarFocusCapture:H,handleActionBarKeydownCapture:B}=(0,g.l)({cellRef:N}),{annotations:P,isContextMenuOpen:U,openMarkerOrListDialogFromActionBar:$,startNewConversationFromActionBar:W,startNewConversationFromActionBarWithSuggestedChange:K,anyMenuOpen:V,threads:q,toggleContextMenu:z,toggleContextMenuFromActionBar:G}=(0,m.e)({cellId:i,actionBarRef:R}),X=(0,u.useCallback)(e=>{I&&e.preventDefault()},[I]);return(0,n.jsx)("div",{"aria-hidden":!M,style:{...b},className:"d-flex flex-row",children:(0,n.jsxs)(a.A,{onBlur:O,onClick:X,onFocusCapture:H,onKeyDownCapture:B,children:[A&&(0,n.jsxs)(n.Fragment,{children:[F+_>0&&(0,n.jsx)(o.Q,{ref:S,"aria-expanded":V,"aria-label":"View conversations",size:"small",sx:{pt:0,pb:0,px:1,height:C},onClick:e=>{(1===q.length||1===P.length)&&e.preventDefault(),$()},children:(0,n.jsx)(p.A,{})}),j&&(0,n.jsx)(n.Fragment,{children:k?(0,n.jsx)(o.Q,{"aria-label":"Start conversation (comment in progress)",size:"small",sx:{pt:0,pb:0,px:1,width:v,height:C},onClick:W,children:(0,n.jsx)(y.f,{authorAvatarUrl:e,authorLogin:t})}):(0,n.jsx)(s.K,{unsafeDisableTooltip:!0,"aria-label":"Start conversation",ref:D,icon:r.PlusIcon,size:"small",sx:{width:v,height:C,color:"fg.muted"},onClick:W})})]}),(0,n.jsx)(s.K,{unsafeDisableTooltip:!0,ref:R,"aria-haspopup":"true","aria-label":"More actions",icon:r.TriangleDownIcon,size:"small",sx:{width:C,height:C,color:"fg.muted"},onClick:G}),(0,n.jsx)(d.W,{anchorRef:R,open:U,onOpenChange:z,children:(0,n.jsx)(d.W.Overlay,{width:"medium",children:(0,n.jsx)(c.l,{children:(0,n.jsx)(x.Bv,{copilotChatReferenceData:L,showStartConversation:j,handleViewMarkersSelection:$,startConversationCurrentLine:W,startConversationWithSuggestedChange:K})})})})]})})});N.displayName="ActionBar"},51843:(e,t,i)=>{i.d(t,{A:()=>h});var n=i(74848),r=i(20053),l=i(57402),a=i(90305),o=i(69909),s=i(49140),d=i(96540),c=i(30365),u=i(4561),f=i(81499);function h({shouldAnimateRef:e}){let{diffLine:t}=(0,u.s)(),{ghostUser:i}=(0,f.y)();(0,d.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let h=(t.threadsData?.totalCommentsCount||0)+(t.annotationsData?.totalCount||0);if(0===h)return null;let m={},g=[];t.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&g.push({id:e.id,level:e.annotationLevel})}),t.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?m[e?.author.login]=e.author:i?.login&&(m[i.login]=i)}));let p=[...g.sort((e,t)=>(s.GF[e.level]?.priority||0)<(s.GF[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,n.jsx)(s.S,{annotationLevel:t.level},t.id):(0,n.jsx)(s.Xh,{annotationLevel:t.level},t.id)),...Object.keys(m).map(e=>{let t=m[e]?.login,r=m[e]?.avatarUrl??(i?.avatarUrl||" ");return(0,n.jsx)(l.r,{alt:t,size:20,src:r},t)})].slice(0,3),x=h>9?"9+":`${h}`;return(0,n.jsxs)("div",{className:(0,r.A)("d-flex","flex-justify-between","flex-items-center",c.A.commentIndicatorContainer),children:[(0,n.jsx)(a.A,{disableExpand:!0,sx:{maxWidth:"40px","--avatar-stack-three-plus-min-width":"32px"},children:p}),(0,n.jsx)(o.A,{sx:{color:"fg.default",ml:1,fontSize:0,fontWeight:400,fontVariantNumeric:"tabular-nums",width:"2ch",textAlign:"start"},children:x})]})}try{h.displayName||(h.displayName="CommentIndicator")}catch{}},13190:(e,t,i)=>{i.d(t,{q:()=>g});var n=i(74848),r=i(44819),l=i(59857),a=i(69909),o=i(85053),s=i(87330),d=i(44981),c=i(30729),u=i(96540),f=i(20053),h=i(51110),m=i(8878);let g=(0,u.memo)(function({inputContainer:e,currentPathDigestIndex:t,stickied:i,searchTerm:g,searchResults:p,setSearchTerm:x,focusedSearchResult:y,currentIndex:b,setCurrentIndex:C,setFocusedSearchResult:v,onClose:N,scrollDiffCellIntoView:j}){let{findInFileShortcut:k}=(0,r.wk)(),[L,w]=(0,u.useState)(!0),S=(0,u.useRef)([]),D=(0,u.useRef)(0),A=()=>{x(""),v(void 0),t.current=0},E=e=>{if(void 0===y||""===y.pathDigest){t.current=0,v({pathDigest:S.current[0]??"",indexWithinDigest:0});return}1===e?(C(b===D.current-1?0:b+1),y.indexWithinDigest===p.get(y.pathDigest).length-1?(t.current=t.current+1,t.current===S.current.length&&(t.current=0),y.pathDigest=S.current[t.current]??"",y.indexWithinDigest=0):y.indexWithinDigest=y.indexWithinDigest+1):(C(0===b?D.current-1:b-1),0===y.indexWithinDigest?(t.current=t.current-1,-1===t.current&&(t.current=S.current.length-1),y.pathDigest=S.current[t.current]??"",y.indexWithinDigest=p.get(y.pathDigest).length-1):y.indexWithinDigest=y.indexWithinDigest-1),v(y)};return(0,u.useEffect)(()=>{e.current?.focus(),e.current?.select()},[e]),(0,u.useEffect)(()=>{S.current=Array.from(p.keys()),t.current=0,v({pathDigest:S.current[0]??"",indexWithinDigest:0});let e=0;for(let t of p.values())e+=t.length;D.current=e},[t,p,p.size,v]),(0,u.useEffect)(()=>{p.size>0&&void 0!==y&&j(y)},[p,y,b]),(0,n.jsxs)("div",{className:(0,f.A)(h.A.defaultStyles,i&&h.A.stickyStyles,!i&&h.A.notStickyStyles),children:[(0,n.jsx)(m.ak,{commands:{"pull-requests-diff-view:jump-to-next-result-alternate":()=>E(1),"pull-requests-diff-view:jump-to-previous-result-alternate":()=>E(-1),"pull-requests-diff-view:close-find":N}}),(0,n.jsxs)(m.tL,{commands:{"pull-requests-diff-view:jump-to-next-result":()=>E(1),"pull-requests-diff-view:jump-to-previous-result":()=>E(-1)},children:[(0,n.jsxs)("div",{className:"py-2 pl-3 pr-2 d-flex flex-justify-center flex-items-center flex-row f6 borderColor-default border-bottom",children:[(0,n.jsxs)("div",{className:"d-flex flex-row flex-items-baseline",children:[(0,n.jsx)(a.A,{as:"h5",className:"fgColor-default pr-2 text-bold",children:"Find"}),(0,n.jsxs)(a.A,{className:(0,f.A)("find-text-help-tooltip","fgColor-subtle",L&&h.A.visibilityVisible,!L&&h.A.visibilityHidden),children:["Press ",(0,n.jsx)(o.A,{children:k.text})," again to open the browser's find menu"]})]}),(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(s.K,{unsafeDisableTooltip:!0,variant:"invisible",size:"small",onClick:N,icon:l.XIcon,className:"fgColor-subtle","aria-label":"Close find in file"})]}),(0,n.jsx)("div",{className:"pl-2 pr-2 pt-2 pb-2",children:(0,n.jsx)(d.A,{ref:e,className:"pl-1 border-0 box-shadow-none",validationStatus:D.current>1e3?"error":void 0,type:"text",leadingVisual:()=>(0,n.jsx)(c.A,{icon:l.SearchIcon,"aria-hidden":"true"}),autoComplete:"off",name:"Find in file input",placeholder:"Search this diff",value:g,block:!0,onChange:e=>{e.target.value?(w(!1),x(e.target.value),C(0)):(w(!0),A())},trailingAction:(0,n.jsxs)("div",{className:"d-flex flex-row flex-justify-center flex-items-center",children:[(0,n.jsxs)(a.A,{className:"text-small fgColor-subtle m-2 text-center",children:[0===p.size||void 0===y?0:b+1,"/",D.current]}),(0,n.jsx)(s.K,{unsafeDisableTooltip:!0,size:"small",variant:"invisible",onClick:()=>{E(-1)},icon:l.ChevronUpIcon,"aria-label":"Up","data-testid":"up-search",className:"fgColor-subtle"}),(0,n.jsx)(s.K,{unsafeDisableTooltip:!0,size:"small",variant:"invisible",onClick:()=>{E(1)},icon:l.ChevronDownIcon,"aria-label":"Down","data-testid":"down-search",className:"fgColor-subtle"})]}),onKeyDown:t=>{(t.metaKey||t.ctrlKey)&&("f"===t.key||"F"===t.key)&&(L?N():(w(!0),t.preventDefault(),e.current?.focus(),e.current?.select()))}})})]})]})});try{g.displayName||(g.displayName="DiffFindPopover")}catch{}},81909:(e,t,i)=>{i.d(t,{p:()=>o});var n=i(74848),r=i(69909),l=i(73771),a=i(20053);function o({searchResults:e,focusedSearchResult:t,className:i,styleObject:o}){let s=0,d=e[0]?.text??"",c=e[0]?.diffLineNumIndex??-1,u=`overlay-${c}-${d}`;return(0,n.jsxs)(r.A,{className:(0,a.A)(i,"position-absolute",l.A.userSelectNone,!e[0].isHunk&&l.A.nonHunkStyles),style:{...o},children:[e.map(e=>{var i,o;let c=e.indexWithinPathDigest===t,u=(0,n.jsxs)("span",{children:[(0,n.jsx)(r.A,{className:(0,a.A)(l.A.visibilityHidden,l.A.userSelectNone),children:d.substring(s,e.column)}),(0,n.jsx)(r.A,{className:(0,a.A)(l.A.userSelectNone,c&&l.A.focusedResultStyles,!c&&l.A.nonFocusedResultStyles),children:(0,n.jsx)(r.A,{className:(0,a.A)(!c&&l.A.visibilityHidden),id:(i=e.indexWithinPathDigest,o=e.pathDigest,`match-${o}-${i}`),children:d.substring(e.column,e.columnEnd)})})]},`find-match-${e.diffLineNumIndex}-${e.column}`);return s=e.columnEnd,u}),(0,n.jsx)(r.A,{className:(0,a.A)(l.A.visibilityHidden,l.A.userSelectNone),children:d.substring(s)})]},u)}try{o.displayName||(o.displayName="DiffHighlightedOverlay")}catch{}},74183:(e,t,i)=>{i.d(t,{A:()=>l,r:()=>r});var n=i(74848);function r(e,t,i){let n=e.threadsData?.totalCount||0,r=t.threadsData?.totalCount||0;if(0===n&&0===r)return;let l=e.threadsData?.threads?.[0]?.commentsData.comments?.[0]?.author?.login||"",a=t.threadsData?.threads?.[0]?.commentsData.comments?.[0]?.author?.login||"",o="";1===n?o=`has conversation started by @${l}.`:n>1&&(o="has conversations.");let s="";1===r?s=`has conversation started by @${a}.`:r>1&&(s="has conversations.");let d="";if("LEFT"===i){let e=`${o.charAt(0).toUpperCase()}${o.slice(1)}`,t=`${s.length>1?"Modified line":""} ${s}`;d=`${e} ${t}`}else{let e=`${s.charAt(0).toUpperCase()}${s.slice(1)}`,t=`${o.length>1?"Original line":""} ${o}`;d=`${e} ${t}`}return d}function l({summary:e}){return""===e?null:(0,n.jsx)("div",{className:"sr-only","data-testid":"pr-diffline-summary",children:e.trimStart().trimEnd()})}try{l.displayName||(l.displayName="DiffLineScreenReaderSummary")}catch{}},32447:(e,t,i)=>{i.d(t,{Bv:()=>x,_g:()=>S,eD:()=>y});var n=i(74848),r=i(22094),l=i(19876),a=i(8878),o=i(59857),s=i(17909),d=i(96540),c=i(81499),u=i(4561),f=i(81999),h=i(26163),m=i(61558),g=i(24541),p=i(95548);function x({showStartConversation:e,copilotChatReferenceData:t,handleViewMarkersSelection:i,startConversationCurrentLine:r,startConversationWithSuggestedChange:l}){return(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsx)(p._,{handleStartConversation:r,handleStartConversationWithSuggestedChange:l}),(0,n.jsx)(v,{handleViewMarkersSelection:i}),(0,n.jsx)(b,{copilotChatReferenceData:t}),(0,n.jsx)(L,{}),(0,n.jsx)(C,{}),(0,n.jsx)(a.Vr,{commandId:"pull-requests-diff-view:copy-anchor-link",leadingVisual:(0,n.jsx)(o.LinkIcon,{})}),(0,n.jsx)(w,{}),(0,n.jsx)(S,{})]})}function y(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w,{}),(0,n.jsx)(C,{})]})}let b=({copilotChatReferenceData:e})=>{let{diffEntryId:t}=(0,u.s)(),{subjectId:i,oldCommitOid:l,newCommitOid:a}=(0,c.y)(),{selectedDiffRowRange:o}=(0,h.o)(),s=(0,d.useMemo)(()=>e&&i&&l&&a?{referenceData:e,queryVariables:{pullRequestId:i,startOid:l,endOid:a}}:t&&i&&l&&a?{queryVariables:{diffEntryId:t,pullRequestId:i,startOid:l,endOid:a}}:void 0,[t,a,l,i,e]);return s?(0,n.jsx)(r.w,{selectedRange:o,...s}):null};function C(){let{fileAnchor:e}=(0,u.s)();return(0,n.jsxs)(s.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,n.jsx)(s.l.LeadingVisual,{children:(0,n.jsx)(o.MultiSelectIcon,{})}),"Select all",(0,n.jsx)(s.l.TrailingVisual,{children:(0,n.jsx)(l.z,{keys:"Mod+a"})})]})}function v({handleViewMarkersSelection:e}){let{commentingEnabled:t}=(0,c.y)(),{isSplit:i}=(0,u.s)();return t?i?(0,n.jsx)(N,{handleViewMarkersSelection:e}):(0,n.jsx)(j,{onSelect:()=>e()}):null}function N({handleViewMarkersSelection:e}){let{originalLineHasThreads:t,modifiedLineHasThreads:i,isLeftSide:r}=(0,u.s)(),{annotations:l}=(0,f._)(),a=l.length>0;return r?(0,n.jsxs)(n.Fragment,{children:[t&&(0,n.jsx)(k,{text:"View markers",onSelect:()=>e("LEFT")}),(i||a)&&(0,n.jsx)(k,{text:"View markers, modified line",onSelect:()=>e("RIGHT")})]}):(0,n.jsxs)(n.Fragment,{children:[(i||a)&&(0,n.jsx)(k,{text:"View markers",onSelect:()=>e("RIGHT")}),t&&(0,n.jsx)(k,{text:"View markers, original line",onSelect:()=>e("LEFT")})]})}function j({onSelect:e}){let{ghostUser:t}=(0,c.y)(),{diffLine:i}=(0,u.s)(),{annotations:r}=(0,f._)();return i&&(0,m.F)(i.threadsData,t).length>0||r.length>0?(0,n.jsx)(k,{text:"View markers",onSelect:()=>e()}):null}function k({onSelect:e,text:t}){return(0,n.jsxs)(s.l.Item,{onSelect:e,children:[(0,n.jsx)(s.l.LeadingVisual,{children:(0,n.jsx)(o.CommentDiscussionIcon,{})}),t]})}function L(){return(0,n.jsx)("div",{onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:(0,n.jsx)(a.Vr,{commandId:"pull-requests-diff-view:copy-code",leadingVisual:(0,n.jsx)(o.CopyIcon,{})})})}function w(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=(0,g.A)();return(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsx)(a.Vr,{commandId:"pull-requests-diff-view:expand-hunk-up",leadingVisual:(0,n.jsx)(o.FoldUpIcon,{})}),t&&(0,n.jsx)(a.Vr,{commandId:"pull-requests-diff-view:expand-hunk-down",leadingVisual:(0,n.jsx)(o.FoldDownIcon,{})})]})}function S(){let{previousHunk:e,nextHunk:t}=(0,u.s)(),{fileAnchor:i}=(0,u.s)();return(0,n.jsxs)(n.Fragment,{children:[t?(0,n.jsxs)(s.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${i}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,n.jsx)(s.l.LeadingVisual,{children:(0,n.jsx)(o.MoveToBottomIcon,{})}),"Go to next hunk",(0,n.jsx)(s.l.TrailingVisual,{children:"Page Down"})]}):null,e?(0,n.jsxs)(s.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${i}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,n.jsx)(s.l.LeadingVisual,{children:(0,n.jsx)(o.MoveToTopIcon,{})}),"Go to previous hunk",(0,n.jsx)(s.l.TrailingVisual,{children:"Page Up"})]}):null]})}try{x.displayName||(x.displayName="CellContextMenu")}catch{}try{y.displayName||(y.displayName="EmptyCellContextMenu")}catch{}try{b.displayName||(b.displayName="CopilotListItems")}catch{}try{C.displayName||(C.displayName="SelectAllListItem")}catch{}try{v.displayName||(v.displayName="ViewMarkerListItems")}catch{}try{N.displayName||(N.displayName="SplitDiffMarkersListItems")}catch{}try{j.displayName||(j.displayName="UnifiedDiffMarkerListItem")}catch{}try{k.displayName||(k.displayName="MarkerListItem")}catch{}try{L.displayName||(L.displayName="CopyContentListItems")}catch{}try{w.displayName||(w.displayName="ExpandHunksListItems")}catch{}try{S.displayName||(S.displayName="JumpToHunkListItems")}catch{}},1448:(e,t,i)=>{i.d(t,{KD:()=>B,gG:()=>M,hA:()=>H,wo:()=>O});var n=i(74848),r=i(38666),l=i(9516),a=i(75096),o=i(87098),s=i(8878),d=i(48222),c=i(59857),u=i(20053),f=i(96540),h=i(81499),m=i(4561),g=i(81999),p=i(26163),x=i(69719),y=i(87566),b=i(93036),C=i(55515),v=i(24541),N=i(89591),j=i(20885),k=i(14080),L=i(51843),w=i(32447),S=i(75991),D=i(281),A=i(17909),E=i(81909),I=i(74183);function R(e){let{rowId:t}=(0,m.s)();if(t)return(0,x.u6)(t,e)}function T(e,t){let{selectedDiffRowRange:i}=(0,p.o)();return(0,f.useMemo)(()=>{let n="Add a comment to",r=!!i&&i.startLineNumber!==i.endLineNumber;if(i&&r){let e={left:"L",right:"R"},t=e[i.startOrientation],r=e[i.endOrientation];n+=i.startLineNumber!==i.endLineNumber?` lines ${t}${i.startLineNumber} to ${r}${i.endLineNumber}`:` line ${t}${i.startLineNumber}`}else{let i=t&&!(0,x.Ji)(e)?"L":"R";n+=` line ${i}${e.blobLineNumber}`}return n},[e,t,i])}let F=(0,f.forwardRef)(function({children:e,ContextMenu:t,className:i,columnIndex:r,handleDiffCellClick:a,handleDiffSideCellSelectionBlocking:o,lineAnchor:c,commentDialogOpen:u,startConversation:h,...g},y){let{diffLine:C,isRowSelected:N,isLeftSide:j,isSplit:k}=(0,m.s)(),L=(0,f.useRef)(null);(0,f.useImperativeHandle)(y,()=>L.current,[]);let[w,S]=(0,f.useState)(!1),{clearSelectedDiffRowRange:E,selectedDiffRowRange:I}=(0,p.o)(),{fileAnchor:T,filePath:F}=(0,m.s)(),{expandStartOfHunk:_,expandEndOfHunk:M,expandEndOfPreviousHunk:O}=(0,v.A)(),{getUnifiedDiffLineCode:H,getSplitDiffSingleLineCode:B,getSplitDiffMultiLineCode:P}=(0,b.w)(T),U=(0,f.useRef)(null),$=(0,d.U)(e=>{if(!e.target)return;let t=e.target;!w||U.current?.contains(t)||L.current?.contains(t)||2!==e.button?L.current?.contains(t)&&e.target.closest("button")?.contains(t)&&S(!1):S(!1)});(0,f.useEffect)(()=>{w?document.addEventListener("mousedown",$):document.removeEventListener("mousedown",$)},[$,w]),(0,f.useEffect)(()=>()=>document.removeEventListener("mousedown",$),[]);let W=()=>!!document.getElementById("conversation-dialog"),K=()=>!(u||w||W())&&(!N&&I&&E(),S(!0),!0),V=(0,f.useCallback)(e=>{e.shiftKey&&e.preventDefault(),o?.(e)},[o]);return(0,n.jsxs)(s.tL,{as:"td",commands:{"github:open-context-menu":K,"pull-requests-diff-view:copy-code":()=>{let e=window.getSelection();if(e&&""!==e.toString()){document.execCommand("copy");return}if(k){void 0===I||I?.startOrientation===I?.endOrientation&&I?.startLineNumber===I?.endLineNumber?(0,l.D)(B(j?"left":"right",j?C?.left:C?.right)):(0,l.D)(P(j?"left":"right"));return}(0,l.D)(H())},"pull-requests-diff-view:expand-all-hunks":()=>{let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${F}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))},"pull-requests-diff-view:expand-hunk-up":_,"pull-requests-diff-view:expand-hunk-down":()=>{if(C?.type==="HUNK"){O();return}M()},"pull-requests-diff-view:copy-anchor-link":()=>{let e=(0,x.j2)({line:C,range:I,fileAnchor:T});e&&(0,l.D)(e)},"pull-requests-diff-view:start-conversation-current":h},ref:L,"data-grid-cell-id":R(r),"data-line-anchor":c,"data-selected":N,role:"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:i?`focusable-grid-cell ${i} ${r<3?"left-side":""}`:"focusable-grid-cell",onBlur:e=>e.target.ariaSelected="false",onClick:a,onContextMenu:e=>{K()&&e.preventDefault()},onFocus:e=>e.target.ariaSelected="true",onMouseDown:V,...g,children:[e,t&&w&&(0,n.jsx)(D.W,{anchorRef:L,open:!0,onOpenChange:S,children:(0,n.jsx)(D.W.Overlay,{width:e?"medium":"small",children:(0,n.jsx)(A.l,{children:t})})})]})});function _(){return(0,n.jsx)("div",{className:"hunk-kebab-icon pr-2 pb-1",children:(0,n.jsx)(c.KebabHorizontalIcon,{})})}function M({summary:e,searchResultsForLine:t,focusedSearchResult:i,columnIndex:l,lineAnchor:s,handleDiffCellClick:d,handleDiffSideCellSelectionBlocking:c,filePath:b,tabSize:v,copilotChatReferenceData:N}){let{diffLine:D,fileAnchor:A,isLeftSide:_}=(0,m.s)(),{getTextIndent:M,getPaddingLeft:O}=(0,f.useMemo)(()=>(0,a.oW)(D.text,v),[D,v]),[H,B]=(0,x._S)(D.html,D.type),U=B&&["+","-"].includes(B),{isActionBarVisible:$}=(0,g._)(),{selectedDiffRowRange:W,selectedDiffLines:K}=(0,p.o)(),{commentBatchPending:V,commentingEnabled:q,commentingImplementation:z,markerNavigationImplementation:G,repositoryId:X,subjectId:Q,subject:Y,viewerData:J}=(0,h.y)(),{hasPersistedComment:Z}=(0,r.L4)({diffSide:_?"LEFT":"RIGHT",filePath:b,line:D.blobLineNumber,subjectId:Q,fileLevelComment:!1}),ee=(0,f.useMemo)(()=>{var e;return e=J.viewerCanComment,q&&e&&(0,x.a1)(D,K)},[q,J,D,K]),et=(0,f.useRef)(null),ei=(0,f.useRef)(null),en=(0,x.YY)({shouldAlignRight:Z||!ee}),er=!!D.threadsData?.threads?.length||!!D.annotationsData?.annotations?.length,el=(0,x.S4)({hasThreads:er}),ea=T(D,!!_),eo=R(l),{handleCellBlur:es,handleCellFocus:ed,handleCellMouseEnter:ec,handleCellMouseLeave:eu}=(0,C.l)({cellRef:ei}),{annotations:ef,isNewConversationDialogOpen:eh,shouldStartNewConversationWithSuggestedChange:em,startNewConversation:eg,startNewConversationWithSuggestedChange:ep,openMarkerOrListDialog:ex,selectAnnotation:ey,selectThread:eb,isMarkerListDialogOpen:eC,closeNewConversationDialog:ev,closeMarkerListDialog:eN,closeConversationDetailsDialog:ej,returnFocusRef:ek,optimizedSelectedAnnotationId:eL,optimizedSelectedThreadId:ew,threadConnectionId:eS,threads:eD}=(0,y.e)({cellId:eo,actionBarRef:et});(0,f.useEffect)(()=>{if(!G)return;let{activeGlobalMarkerID:e,onActivateGlobalMarkerNavigation:t}=G;if(e){let i=eD.map(e=>e.id),n=ef.map(e=>e.id);i.includes(e)?(eb(e,{skipLineSelection:!0}),t()):n.includes(e)&&(ey(e,{skipLineSelection:!0}),t())}},[eb,eD,G,ef,ey]);let eA=(0,j.S)(z?.suggestedChangesEnabled,D,em),eE=(0,f.useRef)(!0),{ghostUser:eI}=(0,h.y)();return(0,n.jsxs)(F,{ref:ei,columnIndex:l,commentDialogOpen:eh,handleDiffCellClick:d,handleDiffSideCellSelectionBlocking:c,lineAnchor:s,startConversation:eg,ContextMenu:(0,n.jsx)(w.Bv,{copilotChatReferenceData:N,showStartConversation:ee,handleViewMarkersSelection:ex,startConversationCurrentLine:eg,startConversationWithSuggestedChange:ep}),className:(0,u.$)(`diff-text-cell ${_?"left-side-diff-cell":"right-side-diff-cell"}`,{"border-right":_&&"HUNK"!==D.type}),style:{backgroundColor:P(D.type,!1),paddingRight:el},onBlur:es,onFocus:ed,onMouseEnter:ec,onMouseLeave:eu,children:[(0,n.jsxs)("code",{className:(0,u.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===D.type,deletion:"DELETION"===D.type}),children:[U&&(0,n.jsx)("span",{className:"diff-text-marker",children:B}),t&&t.length>0&&(0,n.jsx)(E.p,{searchResults:t,focusedSearchResult:i,className:(0,u.$)("diff-text-inner",{"color-fg-muted":"HUNK"===D.type}),styleObject:{paddingLeft:O(),textIndent:M()}}),(0,n.jsx)(o.mo,{html:H,className:(0,u.$)("diff-text-inner",{"color-fg-muted":"HUNK"===D.type}),style:{paddingLeft:O(),textIndent:M()}})]}),$&&(0,n.jsx)(k.E,{copilotChatReferenceData:N,authorAvatarUrl:J.avatarUrl,authorLogin:J.login,ref:et,cellId:eo,cellRef:ei,hasDraftComment:Z,showStartConversation:ee}),z&&G&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.c7,{annotations:ef,batchPending:V,batchingEnabled:z.batchingEnabled,commentingImplementation:{...z,deleteComment:({onCompleted:e,...t})=>{z&&D&&z.deleteComment({...t,onCompleted:()=>{e?.(),eD.length<=1&&(ej(),setTimeout(()=>ei.current?.focus()))},filePath:b})}},conversationAnchorRef:ei,conversationListAnchorRef:ek,conversationListThreads:eD,fileAnchor:A,filePath:b,isMarkerListOpen:eC,repositoryId:X,returnFocusRef:ek,selectedAnnotationId:eL,selectedThreadId:ew,subjectId:Q,subject:Y,suggestedChangesConfig:eA,threadsConnectionId:eS,onCloseConversationDialog:ej,onCloseConversationList:eN,onAnnotationSelected:ey,onThreadSelected:eb,markerNavigationImplementation:G,viewerData:J,ghostUser:eI}),(0,n.jsx)(r.cT,{addCommentDialogTitle:ea,anchorRef:ei,batchPending:V,batchingEnabled:z.batchingEnabled,commentBoxConfig:z.commentBoxConfig,filePath:b,isLeftSide:!!_,isOpen:eh,lineNumber:D.blobLineNumber,repositoryId:X,returnFocusRef:ek,subjectId:Q,suggestedChangesConfig:eA,threadsConnectionId:eS,viewerData:J,onAddComment:({onCompleted:e,threadsConnectionId:t,...i})=>{if(!z||!D)return;let{leftLines:n,rightLines:r}=K;if(W){let e="left"===W.endOrientation?n:r,i=e[e.length-1];i&&(0,x.qK)(i)&&i.threadsData?.__id&&(t=i.threadsData?.__id)}z.addThread({...i,diffLine:D,isLeftSide:_,selectedDiffRowRange:W,threadsConnectionId:t,onCompleted:(t,i)=>{e?.(t,i),eb(t)}})},onCloseCommentDialog:ev})]}),!$&&(0,n.jsxs)("div",{"aria-hidden":"true",style:{right:en},className:"position-absolute top-0 d-flex user-select-none",children:[(0,n.jsx)(L.A,{shouldAnimateRef:eE}),Z&&(0,n.jsx)(S.f,{authorAvatarUrl:J.avatarUrl,authorLogin:J.login,sx:{ml:"9px",mt:"2px",height:"20px"}})]}),e&&(0,n.jsx)(I.A,{summary:e})]})}function O({children:e,columnIndex:t,handleDiffCellClick:i,handleDiffSideCellSelectionBlocking:l,filePath:a,copilotChatReferenceData:o,...s}){let d=(0,f.useRef)(null),c=R(t),{commentBatchPending:u,commentingEnabled:g,commentingImplementation:b,repositoryId:v,subject:N,subjectId:k,markerNavigationImplementation:L,viewerData:S}=(0,h.y)(),{diffLine:D,fileAnchor:A,isLeftSide:E}=(0,m.s)(),{selectedDiffRowRange:I,selectedDiffLines:_}=(0,p.o)(),M=T(D,!!E),O=(0,f.useMemo)(()=>{var e;return e=S.viewerCanComment,g&&e&&(0,x.a1)(D,_)},[g,S,D,_]),{handleCellBlur:H,handleCellFocus:B,handleCellMouseEnter:U,handleCellMouseLeave:$}=(0,C.l)({cellRef:d}),{ghostUser:W}=(0,h.y)(),{annotations:K,isNewConversationDialogOpen:V,shouldStartNewConversationWithSuggestedChange:q,startNewConversation:z,startNewConversationWithSuggestedChange:G,openMarkerOrListDialog:X,isMarkerListDialogOpen:Q,closeConversationDetailsDialog:Y,closeMarkerListDialog:J,selectAnnotation:Z,selectThread:ee,closeNewConversationDialog:et,returnFocusRef:ei,optimizedSelectedThreadId:en,optimizedSelectedAnnotationId:er,threadConnectionId:el,threads:ea}=(0,y.e)({cellId:c,actionBarRef:d}),eo=(0,j.S)(b?.suggestedChangesEnabled,D,q);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F,{ref:d,className:"diff-line-number",columnIndex:t,commentDialogOpen:V,handleDiffCellClick:i,handleDiffSideCellSelectionBlocking:l,startConversation:z,style:{backgroundColor:P(D.type,!0),textAlign:"center"},ContextMenu:(0,n.jsx)(w.Bv,{copilotChatReferenceData:o,showStartConversation:O,handleViewMarkersSelection:X,startConversationCurrentLine:z,startConversationWithSuggestedChange:G}),onBlur:H,onFocus:B,onMouseEnter:U,onMouseLeave:$,...s,children:(0,n.jsx)("code",{children:e})}),b&&L&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.c7,{annotations:K,batchPending:u,batchingEnabled:b.batchingEnabled,commentingImplementation:{...b,deleteComment:({onCompleted:e,...t})=>{b&&D&&b.deleteComment({...t,onCompleted:()=>{e?.(),ea.length<=1&&(Y(),setTimeout(()=>d.current?.focus()))},filePath:a})}},conversationAnchorRef:d,conversationListAnchorRef:ei,conversationListThreads:ea,fileAnchor:A,filePath:a,isMarkerListOpen:Q,repositoryId:v,returnFocusRef:ei,selectedAnnotationId:er,selectedThreadId:en,subjectId:k,subject:N,suggestedChangesConfig:eo,threadsConnectionId:el,markerNavigationImplementation:L,onCloseConversationDialog:Y,onCloseConversationList:J,onThreadSelected:ee,onAnnotationSelected:Z,viewerData:S,ghostUser:W}),(0,n.jsx)(r.cT,{addCommentDialogTitle:M,align:"start",anchorRef:d,batchPending:u,batchingEnabled:b.batchingEnabled,commentBoxConfig:b.commentBoxConfig,filePath:a,isLeftSide:!!E,isOpen:V,lineNumber:D.blobLineNumber,repositoryId:v,returnFocusRef:ei,subjectId:k,suggestedChangesConfig:eo,threadsConnectionId:el,viewerData:S,onAddComment:({onCompleted:e,threadsConnectionId:t,...i})=>{if(!b||!D)return;let{leftLines:n,rightLines:r}=_;if(I){let e="left"===I.endOrientation?n:r,i=e[e.length-1];i&&(0,x.qK)(i)&&i.threadsData?.__id&&(t=i.threadsData?.__id)}b.addThread({...i,diffLine:D,selectedDiffRowRange:I,threadsConnectionId:t,onCompleted:(t,i)=>{e?.(t,i),ee(t)}})},onCloseCommentDialog:et})]})]})}function H({ContextMenu:e,renderHunkButton:t,searchResultsForLine:i,focusedSearchResult:r}){let l=(0,f.useRef)(null),[a,s]=function(e){let[t,i]=(0,f.useState)(!1),[n,r]=(0,f.useState)(!1),l=(0,f.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||i(!1)},[e]),a=(0,f.useCallback)(()=>{e.current===document.activeElement&&i(!0)},[e]),o=(0,f.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&i(!1),r(!1)},[e]);return[{onFocus:a,onBlur:l},{"aria-hidden":!n,tabIndex:t?0:-1,onBlur:o,onFocusCapture:(0,f.useCallback)(e=>{e.stopPropagation(),r(!0)},[]),onKeyDownCapture:(0,f.useCallback)(e=>{(0,N.g)(e.key)&&e.stopPropagation()},[])}]}(l),{diffLine:d}=(0,m.s)();return(0,n.jsx)(F,{ref:l,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...a,children:(0,n.jsxs)("div",{className:"d-flex flex-row",children:[t?.(s)??(0,n.jsx)(_,{}),(0,n.jsxs)("code",{className:"diff-text-cell hunk",children:[i&&i.length>0&&(0,n.jsx)(E.p,{searchResults:i,focusedSearchResult:r,className:(0,u.$)("diff-text-inner",{"color-fg-muted":"HUNK"===d.type})}),(0,n.jsx)(o.mo,{className:"diff-text-inner color-fg-muted",html:d.html})]})]})})}function B({columnIndex:e,showRightBorder:t}){return(0,n.jsx)(F,{ContextMenu:(0,n.jsx)(w.eD,{}),className:(0,u.$)("empty-diff-line",{"border-right":t}),columnIndex:e})}function P(e,t=!1){switch(e){case"ADDITION":return t?"var(--diffBlob-addition-bgColor-num, var(--color-diff-blob-addition-num-bg))":"var(--diffBlob-addition-bgColor-line, var(--color-diff-blob-addition-line-bg))";case"DELETION":return t?"var(--diffBlob-deletion-bgColor-num, var(--color-diff-blob-deletion-num-bg))":"var(--diffBlob-deletion-bgColor-line, var(--color-diff-blob-deletion-line-bg))";case"HUNK":case"EMPTY":return t?"var(--diffBlob-hunk-bgColor-num, var(--color-diff-blob-hunk-num-bg))":"var(--bgColor-accent-muted, var(--color-accent-subtle))";default:return}}try{F.displayName||(F.displayName="Cell")}catch{}try{_.displayName||(_.displayName="HunkKebabIcon")}catch{}try{M.displayName||(M.displayName="ContentCell")}catch{}try{O.displayName||(O.displayName="LineNumberCell")}catch{}try{H.displayName||(H.displayName="HunkCell")}catch{}try{B.displayName||(B.displayName="EmptyCell")}catch{}},47498:(e,t,i)=>{i.d(t,{BD:()=>h,Pd:()=>m});var n=i(74848),r=i(40582),l=i(96540),a=i(1448),o=i(81999),s=i(81499),d=i(4561),c=i(69719);let u=({summary:e,resultsForLine:t,focusedSearchResult:i,handleDiffSideCellSelectionBlocking:r,handleDiffRowClick:c,lineAnchor:u,filePath:f,copilotChatReferenceData:h})=>{let{diffLine:m,isLeftSide:g,isSplit:p}=(0,d.s)(),{viewerData:x}=(0,s.y)(),{tabSizePreference:y}=x,b="ADDITION"!==m.type,C=!p||g,v=C&&!b,N="DELETION"!==m.type,j=!p||!g,k=j&&!N,L=(0,l.useCallback)(e=>{m.left&&c(e,m.left,"left",e.shiftKey)},[c,m.left]),w=(0,l.useCallback)(e=>{m.right&&c(e,m.right,"right",e.shiftKey)},[c,m.right]),S=(0,l.useCallback)(()=>{r&&r("left")},[r]),D=(0,l.useCallback)(()=>{r&&r("right")},[r]);return(0,n.jsxs)(o.M,{line:m,children:[C&&(0,n.jsx)(a.wo,{copilotChatReferenceData:h,columnIndex:0,filePath:f,handleDiffCellClick:v?w:L,handleDiffSideCellSelectionBlocking:D,children:b&&m.left}),j&&(0,n.jsx)(a.wo,{copilotChatReferenceData:h,columnIndex:p?2:1,filePath:f,handleDiffCellClick:k?L:w,handleDiffSideCellSelectionBlocking:S,children:N&&m.right}),(0,n.jsx)(a.gG,{copilotChatReferenceData:h,columnIndex:p?g?1:3:2,filePath:f,handleDiffCellClick:g?L:w,lineAnchor:u,tabSize:y,handleDiffSideCellSelectionBlocking:g?D:S,searchResultsForLine:t,focusedSearchResult:i,summary:e})]})},f=({summary:e,resultsForLine:t,focusedSearchResult:i,fileAnchor:l,filePath:o,handleDiffRowClick:s,handleDiffSideCellSelectionBlocking:u,copilotChatReferenceData:f})=>{let{diffLine:h,isLeftSide:g}=(0,d.s)();if((0,c.Po)(h))return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.KD,{columnIndex:g?0:2}),(0,n.jsx)(a.KD,{columnIndex:g?1:3,showRightBorder:g})]});let p=g?"left":(0,r.XU)(h.type),x="left"===p?h.left:h.right,y=(0,r.IQ)(l,p,x??0);switch(h.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,n.jsx)(m,{copilotChatReferenceData:f,filePath:o,handleDiffRowClick:s,handleDiffSideCellSelectionBlocking:u,lineAnchor:y,resultsForLine:t,focusedSearchResult:i,summary:e});default:throw Error(`cannot handle type ${h.type}`)}},h=l.memo(f),m=l.memo(u);try{u.displayName||(u.displayName="CodeDiffLineUnmemoized")}catch{}try{f.displayName||(f.displayName="DiffLineSideUnmemoized")}catch{}try{h.displayName||(h.displayName="DiffLineSide")}catch{}try{m.displayName||(m.displayName="CodeDiffLine")}catch{}},65607:(e,t,i)=>{i.d(t,{T:()=>N});var n=i(74848),r=i(52126),l=i(75096),a=i(40582),o=i(86519),s=i(96540),d=i(26163),c=i(69719),u=i(920),f=i(91462),h=i(80468),m=i(95231),g=i(87813),p=i(81499),x=i(97077),y=i(13641),b=i(20053),C=i(94686);function v({diffAnchor:e,children:t}){return(0,n.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let N=(0,s.memo)(function({searchResults:e,focusedSearchResult:t,diffEntryData:i,diffLinesManuallyUnhidden:N,baseHelpUrl:j,onHandleLoadDiff:k,copilotChatReferenceData:L,...w}){let S=(0,s.useRef)(null),[D,A]=(0,s.useState)(null),E=i.newTreeEntry?.lineCount??i.oldTreeEntry?.lineCount??0,I=(0,s.useMemo)(()=>{let e=i.diffLines[i.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<E?i.diffLines.concat({__id:f.wj.finalLineId,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):i.diffLines},[i.diffLines,E]),{diffViewPreference:R,tabSizePreference:T}=w.viewerData,{selectedDiffRowRange:F,replaceSelectedDiffRowRange:_,replaceSelectedDiffRowRangeFromGridCells:M,clearSelectedDiffRowRange:O,updateDiffLines:H,updateSelectedDiffRowRange:B}=(0,d.o)(),P=`diff-${i.pathDigest}`,U=P===F?.diffAnchor;(0,s.useEffect)(()=>{if(!U)return;let e=(0,c.On)(F,I);e&&e!==F&&_(e)},[I,F,U,_]);let $=C.cg?.location.search,W=(0,s.useMemo)(()=>"split"===new URLSearchParams($).get("diff")||"split"===R,[$,R]),K=(0,a.c7)(I),V=(0,s.useCallback)(e=>{A(e)},[A]),q=(0,s.useCallback)((e,t,i,n)=>{!(0,x.V)(e.target)&&(e.defaultPrevented||B(P,t,i,n))},[P,B]);if(i.isBinary)return(0,n.jsx)(v,{diffAnchor:P,children:"Binary file not shown."});if((0,r.dK)(i))return(0,n.jsx)(v,{diffAnchor:P,children:"File renamed without changes."});if((0,r.Jc)(i))return(0,n.jsx)(v,{diffAnchor:P,children:"File copied without changes."});if((0,r._$)(i.status,i.oldTreeEntry?.mode,i.newTreeEntry?.mode))return(0,n.jsx)(v,{diffAnchor:P,children:"File mode changed."});if((0,r.HI)(i))return(0,n.jsx)(v,{diffAnchor:P,children:(0,r.l_)(i.truncatedReason)});if((0,r.s8)(i))return(0,n.jsx)(v,{diffAnchor:P,children:"Whitespace-only changes."});if(!N&&(0,r.lO)(i))return(0,n.jsx)(u.A,{onLoadDiff:k,children:"This file was deleted."});if(!N&&(0,r.xW)(i))return(0,n.jsxs)(u.A,{helpText:"customizing how changed files appear on GitHub.",helpUrl:`${j}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:k,children:["Some generated files are not rendered by default. Learn more about"," "]});if(N&&i.isTooBig&&0===i.diffLines.length)return(0,n.jsxs)(v,{diffAnchor:P,children:["Diff is too big to render. To view,"," ",(0,n.jsx)(o.A,{inline:!0,href:`${j}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});if(!N&&i.isTooBig)return i.diffLines.length>0?(0,n.jsx)(u.A,{onLoadDiff:k,children:"Large diffs are not rendered by default."}):(0,n.jsxs)(v,{diffAnchor:P,children:["Diff is too big to render. To view,"," ",(0,n.jsx)(o.A,{inline:!0,href:`${j}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});let z={searchResults:e,focusedSearchResult:t,clearSelectedDiffRowRange:O,diffEntryId:i.objectId,diffLines:I,fileAnchor:P,fileLineCount:E,filePath:i.path,handleDiffRowClick:q,handleDiffSideCellSelectionBlocking:V,replaceSelectedDiffRowRangeFromGridCells:M,selectedDiffRowRange:U?F:null,tableRef:S,updateDiffLines:H,updateSelectedDiffRowRange:B,copilotChatReferenceData:L};return i.diffLines?(0,n.jsxs)(p.m,{...w,children:[U&&(0,n.jsx)(h.o,{selectedLineRange:F,tableRef:S}),(0,n.jsx)("table",{ref:S,className:(0,b.A)("tab-size","width-full",y.A.tableLayoutFixed),"data-block-diff-cell-selection":D,"data-diff-anchor":P,"data-tab-size":T,"data-testid":"diff-content","data-paste-markdown-skip":!0,role:"grid",style:{"--line-number-cell-width":`${K}px`},children:W?(0,n.jsx)(l.wj,{lineWidth:K,children:(0,n.jsx)(m.A,{...z})}):(0,n.jsx)(l.Qe,{lineWidth:K,children:(0,n.jsx)(g.A,{...z})})})]}):null});try{v.displayName||(v.displayName="PlainTextStatus")}catch{}try{N.displayName||(N.displayName="DiffLines")}catch{}},22789:(e,t,i)=>{i.d(t,{A:()=>y});var n=i(74848),r=i(20053),l=i(9516),a=i(63494),o=i(59857),s=i(281),d=i(17909),c=i(96540),u=i(4561),f=i(69719),h=i(24541),m=i(32447),g=i(1448),p=i(54283);function x({direction:e,icon:t,label:i,onClick:l,ariaLabel:o,className:s,...d}){let{sendAnalyticsEvent:c}=(0,a.s)();return(0,n.jsx)("button",{onClick:()=>{l(),c("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,r.A)("Button Button--iconOnly Button--invisible",p.A["expand-button-line"],s),"aria-label":o??i,"data-direction":e,...d,children:(0,n.jsx)(t,{})})}function y({nextLine:e,prevLine:t,resultsForLine:i,focusedSearchResult:r}){let{fileLineCount:a,diffLine:s}=(0,u.s)(),{expandStartOfHunk:d,expandEndOfPreviousHunk:m}=(0,h.A)(),y=!t,C=!e,v=0===s.blobLineNumber,N=y||C,j=C&&s.blobLineNumber===a,k=(0,c.useMemo)(()=>!N&&!(s.blobLineNumber<=0)&&(s.blobLineNumber-t.blobLineNumber<=20||e.blobLineNumber-s.blobLineNumber>=20),[N,s,e,t]),L=(0,c.useMemo)(()=>!N&&!j&&s.blobLineNumber-t.blobLineNumber>20,[N,j,s,t]),w=(0,c.useMemo)(()=>!(s.blobLineNumber<=0)&&!v&&!!y,[y,v,s]),S=(0,c.useMemo)(()=>!y&&!j&&!!C,[y,C,j]),D=(0,c.useMemo)(()=>{switch(!0){case k:return"expand-all";case L:return"expand-up-and-down";case w:return"expand-up";case S:return"expand-down"}},[k,L,w,S]),A=()=>d(),E=()=>m(),I=()=>d();return(0,n.jsx)(g.hA,{searchResultsForLine:i,focusedSearchResult:r,renderHunkButton:i=>{switch(D){case"expand-all":return(0,n.jsx)(x,{...i,direction:"all",icon:o.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:I});case"expand-up-and-down":return(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)(x,{...i,direction:"down",icon:o.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,className:p.A["expand-up-and-down"],onClick:E}),(0,n.jsx)(x,{...i,direction:"up",icon:o.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,className:p.A["expand-up-and-down"],onClick:A})]});case"expand-up":return(0,n.jsx)(x,{...i,direction:"up",icon:o.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:A});case"expand-down":return(0,n.jsx)(x,{...i,direction:"down",icon:o.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:E});default:return null}},ContextMenu:(0,n.jsx)(b,{handleCopyContent:()=>{let[e]=(0,f._S)((0,f.ZC)(s.html),s.type);(0,l.D)(e)},handleExpandAbove:A,handleExpandAll:I,handleExpandBelow:E,shouldCopyContent:!!s.html,shouldExpandAbove:L||w,shouldExpandBelow:L||S})})}function b({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:i,handleExpandAll:r,handleExpandBelow:l,handleExpandAbove:a,handleCopyContent:c}){let u={includeShiftKey:!0,key:"["},h={key:"]"},g={key:"["},p={key:"C"};return(0,n.jsx)(s.W.Overlay,{width:"medium",children:(0,n.jsxs)(d.l,{children:[(0,n.jsxs)(d.l.Item,{"aria-keyshortcuts":(0,f.oE)(u),onSelect:r,children:[(0,n.jsx)(d.l.LeadingVisual,{children:(0,n.jsx)(o.UnfoldIcon,{})}),"Expand all",(0,n.jsx)(d.l.TrailingVisual,{children:(0,n.jsx)("span",{children:`${(0,f.pI)(u)}`})})]}),t?(0,n.jsxs)(d.l.Item,{"aria-keyshortcuts":(0,f.oE)(h),onSelect:a,children:[(0,n.jsx)(d.l.LeadingVisual,{children:(0,n.jsx)(o.FoldUpIcon,{})}),"Expand above",(0,n.jsx)(d.l.TrailingVisual,{children:(0,n.jsx)("span",{children:`${(0,f.pI)(h)}`})})]}):null,e?(0,n.jsxs)(d.l.Item,{"aria-keyshortcuts":(0,f.oE)(g),onSelect:l,children:[(0,n.jsx)(d.l.LeadingVisual,{children:(0,n.jsx)(o.FoldDownIcon,{})}),"Expand below",(0,n.jsx)(d.l.TrailingVisual,{children:(0,n.jsx)("span",{children:`${(0,f.pI)(g)}`})})]}):null,(0,n.jsx)(m._g,{}),i?(0,n.jsxs)(d.l.Item,{"aria-keyshortcuts":(0,f.oE)(p),onSelect:c,children:[(0,n.jsx)(d.l.LeadingVisual,{children:(0,n.jsx)(o.CopyIcon,{})}),"Copy",(0,n.jsx)(d.l.TrailingVisual,{children:(0,n.jsx)("span",{children:`${(0,f.pI)(p)}`})})]}):null]})})}try{x.displayName||(x.displayName="ExpandButtonLine")}catch{}try{y.displayName||(y.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{b.displayName||(b.displayName="HunkContextMenu")}catch{}},920:(e,t,i)=>{i.d(t,{A:()=>c});var n=i(74848),r=i(20053),l=i(55847),a=i(69909),o=i(86519),s=i(98396);function d({children:e,helpText:t,helpUrl:i,onLoadDiff:d}){let c=i&&t;return(0,n.jsx)("div",{className:"px-3 py-4 fgColor-muted",children:(0,n.jsxs)("div",{className:(0,r.A)(s.A.gridColumnTemplate),children:[(0,n.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,n.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center",children:[(0,n.jsx)(l.Q,{className:"h4 mx-auto",variant:"invisible",onClick:()=>d(),children:"Load Diff"}),(0,n.jsxs)(a.A,{className:"fgColor-muted mt-1",children:[e,c&&(0,n.jsx)(o.A,{inline:!0,href:i,children:t})]})]})]})})}let c=d;try{d.displayName||(d.displayName="HiddenDiffPatch")}catch{}},75991:(e,t,i)=>{i.d(t,{f:()=>a});var n=i(74848),r=i(93246),l=i(59857);function a({authorAvatarUrl:e,authorLogin:t,sx:i}){return(0,n.jsx)(r.k,{altText:`${t}'s avatar image with pending indicator`,icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,src:e,backgroundSx:{backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},sx:{alignItems:"center",display:"flex",opacity:.5,...i}})}try{a.displayName||(a.displayName="InProgressCommentIndicator")}catch{}},59566:(e,t,i)=>{i.d(t,{U:()=>o});var n=i(74848),r=i(7305),l=i(87098),a=i(38553);function o({dependencyDiffPath:e,fileRendererInfo:t,proseDiffHtml:i,loading:o}){return o?(0,n.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,n.jsx)(a.A,{size:"large"})}):i?(0,n.jsx)("div",{className:"prose-diff position-relative",children:(0,n.jsx)(l.oG,{html:i})}):t?(0,n.jsx)(r.default,{...t}):e?(0,n.jsx)("include-fragment",{src:e,children:(0,n.jsxs)("div",{className:"text-center py-3",children:[(0,n.jsx)(a.A,{size:"medium"}),(0,n.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})}):(0,n.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})}try{o.displayName||(o.displayName="RichDiff")}catch{}},80468:(e,t,i)=>{i.d(t,{o:()=>d});var n=i(74848),r=i(20053),l=i(65482),a=i(58748),o=i(96540),s=i(60384);function d({selectedLineRange:e,tableRef:t}){let[i,d]=(0,o.useState)(null),c=(0,o.useCallback)(()=>{if(!t.current)return;let e=t.current.querySelectorAll('td[data-selected="true"]');if(0===e.length){d(null);return}let i=(function(e){let t=e.parentNode;for(;null!==t;){if(t instanceof HTMLElement&&"static"!==getComputedStyle(t).position)return t;t=t.parentNode}return document.body})(t.current).getBoundingClientRect(),n=0,r=Number.MAX_SAFE_INTEGER,l=0,a=Number.MAX_SAFE_INTEGER;for(let t of e){let e=t.getBoundingClientRect();n=Math.max(n,e.bottom-i.top),r=Math.min(r,e.left-i.left),l=Math.max(l,e.right-i.left),a=Math.min(a,e.top-i.top)}d({left:r-1,height:n-a+2,top:a-1,width:l-r+2})},[t]);return((0,l.N)(()=>{c()},[e,t,c]),(0,a.w)(c,t),i)?(0,n.jsx)("div",{className:(0,r.A)("position-absolute","borderColor-accent-emphasis",s.A.overlay),style:i,children:(0,n.jsx)("div",{className:(0,r.A)("width-full","height-full","bgColor-accent-emphasis",s.A.overlayOpacity)})}):null}try{d.displayName||(d.displayName="SelectedDiffLinesOverlay")}catch{}},95231:(e,t,i)=>{i.d(t,{A:()=>x});var n=i(74848),r=i(96540),l=i(4561),a=i(61558),o=i(62291),s=i(91462),d=i(69719),c=i(89591),u=i(52910),f=i(47498),h=i(22789),m=i(81499),g=i(74183);let p=(0,r.memo)(function({searchResults:e,focusedSearchResult:t,clearSelectedDiffRowRange:i,diffEntryId:p,diffLines:x,fileAnchor:y,fileLineCount:b,filePath:C,handleDiffRowClick:v,handleDiffSideCellSelectionBlocking:N,replaceSelectedDiffRowRangeFromGridCells:j,selectedDiffRowRange:k,tableRef:L,updateDiffLines:w,updateSelectedDiffRowRange:S,copilotChatReferenceData:D}){let{leftLines:A,rightLines:E}=function(e){let t=e.reduce((e,t)=>e+(t.threadsData?.totalCount??0),0)??0,{leftLines:i,rightLines:n}=(0,r.useMemo)(()=>(function(e){let t=[],i=[],n=()=>{for(;t.length<i.length;)t.push(u.V);for(;i.length<t.length;)i.push(u.V)};for(let r of e)switch(r.type){case"ADDITION":i.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":n();let[e,l]=function(e){let t=e.threadsData?.threads?.filter(e=>e?.diffSide==="LEFT")??null,i={...e,threadsData:{...e.threadsData,threads:t,totalCommentsCount:t?.reduce((e,t)=>e+(t?.commentsData?.totalCount??0),0)??0,totalCount:t?.length??0},annotationsData:{totalCount:0,annotations:[]}},n=e.threadsData?.threads?.filter(e=>e?.diffSide==="RIGHT")??null;return[i,{...e,threadsData:{...e.threadsData,threads:n,totalCommentsCount:n?.reduce((e,t)=>e+(t?.commentsData?.totalCount??0),0)??0,totalCount:n?.length??0}}]}(r);t.push(e),i.push(l);break;case"HUNK":n(),t.push(r),i.push(r)}return n(),{leftLines:t,rightLines:i}})(e),[e,t]);return{leftLines:i,rightLines:n}}(x),{ghostUser:I}=(0,m.y)();(0,c.e)({clearSelectedDiffRowRange:i,containerRef:L,fileAnchor:y,isSplitDiff:!0,leftLines:A,replaceSelectedDiffRowRangeFromGridCells:j,rightLines:E,selectedDiffRowRange:k,updateSelectedDiffRowRange:S});let R=(0,r.useMemo)(()=>{if(k)return(0,o.A)({selectedDiffRowRange:k,leftLines:A,rightLines:E})},[k,A,E]);(0,r.useEffect)(()=>{w(y,x)},[x,y,w]);let T=(0,r.useMemo)(()=>(0,s.fR)(A),[A]),F=new Map,_=new Map,M=new Map;for(let t=0;t<(e?.length??0);t++){let i=e?.[t];i&&(F.has(i.leftLineNumber)?F.get(i.leftLineNumber)?.push(i):-1!==i.leftLineNumber&&F.set(i.leftLineNumber,[i]),M.has(i.hunkLineNumber)?M.get(i.hunkLineNumber)?.push(i):i.isHunk&&M.set(i.hunkLineNumber,[i]),_.has(i.rightLineNumber)?_.get(i.rightLineNumber)?.push(i):-1!==i.rightLineNumber&&_.set(i.rightLineNumber,[i]))}let O=[];for(let e=0;e<A.length;e++){let i=A[e],o=E[e],c=A[e-1],u=(0,d.Po)(A[e+1])?E[e+1]:A[e+1],m=(0,d.qK)(i)&&"HUNK"===i.type,x=(0,d.qX)(y,i,o),j=(0,d.Po)(i)?(0,d.Po)(o)?void 0:o:i;if(!j)continue;let k=(0,d.Po)(i)?void 0:i.threadsData,L=(0,d.Po)(o)?void 0:o.threadsData,{currentHunk:w,nextHunk:S,previousHunk:H}=(0,s.Fs)(j,T),B=F.get((0,d.Po)(i)?-2:i.left??-2),P=_.get((0,d.Po)(o)?-2:o.right??-2),U=M.get(j.blobLineNumber),$=U?.[0]?.rightLineNumber===o?.right?t:void 0,W=B?.[0]?.leftLineNumber===i?.left?t:void 0,K=P?.[0]?.rightLineNumber===o?.right?t:void 0,V=(0,g.r)(i,o,"LEFT"),q=(0,g.r)(i,o,"RIGHT"),z=(0,a.F)(L,I),G=(0,a.F)(k,I),X={currentHunk:w,diffEntryId:p,fileAnchor:y,fileLineCount:b,filePath:C,isRowSelected:R?.isRowSelected(i)||R?.isRowSelected(o),modifiedLineThreadsConnectionId:L?.__id,nextHunk:S,originalLineThreadsConnectionId:k?.__id,previousHunk:H,rowId:x,isSplit:!0};O.push((0,n.jsx)(r.Fragment,{children:(0,n.jsx)("tr",{className:"diff-line-row",children:m?(0,n.jsx)(l._,{...X,diffLine:j,modifiedLineThreads:z,originalLineThreads:G,children:(0,n.jsx)(h.A,{nextLine:u,prevLine:c,focusedSearchResult:$,resultsForLine:U})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l._,{...X,diffLine:i,isLeftSide:!0,children:(0,n.jsx)(f.BD,{summary:V,copilotChatReferenceData:D,fileAnchor:y,filePath:C,handleDiffRowClick:v,handleDiffSideCellSelectionBlocking:N,resultsForLine:B,focusedSearchResult:W})}),(0,n.jsx)(l._,{...X,diffLine:o,children:(0,n.jsx)(f.BD,{summary:q,copilotChatReferenceData:D,fileAnchor:y,filePath:C,handleDiffRowClick:v,handleDiffSideCellSelectionBlocking:N,resultsForLine:P,focusedSearchResult:K})})]})})},x))}return(0,n.jsx)(n.Fragment,{children:O})}),x=p;try{p.displayName||(p.displayName="SplitDiffLines")}catch{}},95548:(e,t,i)=>{i.d(t,{_:()=>x});var n=i(74848),r=i(59857),l=i(17909),a=i(96540),o=i(81499),s=i(4561),d=i(26163),c=i(69719),u=i(19876),f=i(8878);let h={left:"L",right:"R"},m="Start conversation",g="Suggest change";function p(e,t,i){let n=i&&!(0,c.Ji)(t)?h.left:h.right;return`${e} on line ${n}${t.blobLineNumber}`}function x({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let i,x,y;let{selectedDiffRowRange:b,selectedDiffLines:C,replaceSelectedDiffRowRange:v}=(0,d.o)(),{commentingEnabled:N}=(0,o.y)(),{diffLine:j,isLeftSide:k,isSplit:L}=(0,s.s)(),w=(0,a.useMemo)(()=>C.leftLines[0],[C.leftLines]),S=(0,a.useMemo)(()=>C.leftLines[C.leftLines.length-1],[C.leftLines]),D=(0,a.useMemo)(()=>C.leftLines.every(e=>!(0,c.Po)(e)&&"DELETION"!==e.type),[C.leftLines]),A=(0,a.useMemo)(()=>C.rightLines[0],[C.rightLines]),E=(0,a.useMemo)(()=>C.rightLines[C.rightLines.length-1],[C.rightLines]),I=(0,a.useMemo)(()=>0===C.rightLines.length,[C.rightLines]),R=(0,a.useMemo)(()=>0===C.leftLines.length,[C.leftLines]),T=(0,a.useMemo)(()=>!(C.leftLines.find(e=>!(0,c.Po)(e)&&!(0,c.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)||C.rightLines.find(e=>!(0,c.Po)(e)&&!(0,c.Ji)(e)&&"INJECTED_CONTEXT"!==e.type)),[C.leftLines,C.rightLines]),F=(0,a.useCallback)((i,n)=>{!(!b||!S||!w||(0,c.Po)(S)||(0,c.Po)(w))&&w.left&&S.left&&(v({diffAnchor:b.diffAnchor,endLineNumber:S.left,endOrientation:"left",startLineNumber:w.left,startOrientation:"left",firstSelectedLineNumber:w.left,firstSelectedOrientation:"left"}),n?.withSuggestedChange?e():t())},[b,S,w,v,e,t]),_=(0,a.useCallback)((i,n)=>{!(!b||!E||!A||(0,c.Po)(E)||(0,c.Po)(A))&&A.right&&E.right&&(v({diffAnchor:b.diffAnchor,endLineNumber:E.right,endOrientation:"right",startLineNumber:A.right,startOrientation:"right",firstSelectedLineNumber:A.right,firstSelectedOrientation:"right"}),n?.withSuggestedChange?e():t())},[b,E,A,v,e,t]),M=(0,a.useMemo)(()=>!!b&&(b.startOrientation!==b.endOrientation||b.startLineNumber!==b.endLineNumber),[b]);if(!N)return null;let O=!1,H=!1;if(b&&M){let t=h[b.startOrientation],a=h[b.endOrientation];return y=` on lines ${t}${b.startLineNumber}-${a}${b.endLineNumber}`,!(0,c.Po)(w)&&!(0,c.Po)(S)&&w&&S&&(O=!0,i=w.left===S.left?I?` on line L${w.left}`:`, original line L${w.left}`:I?` on lines L${w.left}-L${S.right}`:`, original lines L${w.left}-L${S.left}`),!(0,c.Po)(A)&&!(0,c.Po)(E)&&A&&E&&(H=!0,x=A.right===E.right?R||L&&T?` on line R${A.right}`:`, modified line R${E.right}`:R||L&&T?` on lines R${A.right}-R${E.right}`:`, modified lines R${A.right}-R${E.right}`),(0,n.jsx)(n.Fragment,{children:L?(0,n.jsx)(n.Fragment,{children:T?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.l.Item,{onSelect:_,children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.PlusIcon,{})}),m+x,(0,n.jsx)(l.l.TrailingVisual,{children:(0,n.jsx)(u.z,{keys:"Alt+n"})})]}),(0,n.jsxs)(l.l.Item,{onSelect:e=>_(e,{withSuggestedChange:!0}),children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.PlusCircleIcon,{})}),g+x]})]}):(0,n.jsxs)(n.Fragment,{children:[O?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.l.Item,{onSelect:F,children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.PlusIcon,{})}),m+i,(0,n.jsx)(l.l.TrailingVisual,{children:(0,n.jsx)(u.z,{keys:I?"Alt+n":"Alt+Shift+N"})})]}),D&&(0,n.jsxs)(l.l.Item,{onSelect:e=>F(e,{withSuggestedChange:!0}),children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.PlusCircleIcon,{})}),g+i]})]}):null,H?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.l.Item,{onSelect:_,children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.PlusIcon,{})}),m+x,(0,n.jsx)(l.l.TrailingVisual,{children:(0,n.jsx)(u.z,{keys:"Alt+n"})})]}),(0,n.jsxs)(l.l.Item,{onSelect:e=>_(e,{withSuggestedChange:!0}),children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.PlusCircleIcon,{})}),g+x]})]}):null]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Vr,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,n.jsx)(r.PlusIcon,{}),children:m+y}),"DELETION"!==j.type&&D&&(0,n.jsxs)(l.l.Item,{onSelect:e,children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.PlusCircleIcon,{})}),g+y]})]})})}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Vr,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,n.jsx)(r.PlusIcon,{}),children:p(m,j,k)}),"DELETION"!==j.type&&(0,n.jsxs)(l.l.Item,{onSelect:e,children:[(0,n.jsx)(l.l.LeadingVisual,{children:(0,n.jsx)(r.PlusCircleIcon,{})}),p(g,j,k)]})]})}try{x.displayName||(x.displayName="StartConversationContextMenuItems")}catch{}},87813:(e,t,i)=>{i.d(t,{A:()=>g});var n=i(74848),r=i(40582),l=i(96540),a=i(4561),o=i(62291),s=i(91462),d=i(69719),c=i(89591),u=i(47498),f=i(22789),h=i(74183);let m=(0,l.memo)(function({searchResults:e,focusedSearchResult:t,clearSelectedDiffRowRange:i,diffEntryId:m,diffLines:g,fileLineCount:p,fileAnchor:x,filePath:y,tableRef:b,selectedDiffRowRange:C,handleDiffRowClick:v,updateDiffLines:N,updateSelectedDiffRowRange:j,replaceSelectedDiffRowRangeFromGridCells:k,copilotChatReferenceData:L}){(0,c.e)({clearSelectedDiffRowRange:i,containerRef:b,fileAnchor:x,isSplitDiff:!1,leftLines:g,replaceSelectedDiffRowRangeFromGridCells:k,selectedDiffRowRange:C,updateSelectedDiffRowRange:j});let w=(0,l.useMemo)(()=>{if(C)return(0,o.A)({selectedDiffRowRange:C,leftLines:g})},[C,g]),S=(0,l.useMemo)(()=>(0,s.fR)(g.map(e=>e)),[g]);(0,l.useEffect)(()=>{N(x,g)},[g,x,N]);let D=new Map;for(let t=0;t<(e?.length??0);t++){let i=e?.[t];i&&(e&&D.has(i.diffLineNumIndex)?D.get(i.diffLineNumIndex)?.push(i):e&&D.set(i.diffLineNumIndex,[i]))}let A=g.map((e,i)=>{let o=g[i+1],c=g[i-1],b="HUNK"===e.type,C=(0,r.IQ)(x,(0,r.XU)(e.type),e.blobLineNumber),{currentHunk:N,nextHunk:j,previousHunk:k}=(0,s.Fs)(e,S),A=D.get(i),E=i===A?.[0]?.diffLineNumIndex?t:void 0,I=(0,h.r)(e,e,"RIGHT"),R=w?.isRowSelected(e),T=(0,d.qX)(x,e,e),F={diffEntryId:m,diffLine:e,currentHunk:N,fileAnchor:x,fileLineCount:p,filePath:y,isLeftSide:"DELETION"===e.type,isSplit:!1,nextHunk:j,previousHunk:k};return(0,n.jsx)(l.Fragment,{children:(0,n.jsx)("tr",{className:"diff-line-row",children:(0,n.jsx)(a._,{...F,isRowSelected:R,rowId:T,children:b?(0,n.jsx)(f.A,{nextLine:o,prevLine:c,focusedSearchResult:E,resultsForLine:A},i):(0,n.jsx)(u.Pd,{filePath:y,copilotChatReferenceData:L,handleDiffRowClick:v,lineAnchor:C,resultsForLine:A,focusedSearchResult:E,summary:I},i)})})},i)});return(0,n.jsx)(n.Fragment,{children:A})}),g=m;try{m.displayName||(m.displayName="UnifiedDiffLines")}catch{}},81499:(e,t,i)=>{i.d(t,{m:()=>o,y:()=>s});var n=i(74848),r=i(79853),l=i(96540);let a=(0,l.createContext)(null);function o({children:e,...t}){let i=!!t.commentingImplementation,o=!!t.markerNavigationImplementation;if(t.commentingEnabled!==i&&t.commentingEnabled!==o)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let s=t?.ghostUser??r.tT.ghostUser,d=(0,l.useMemo)(()=>({ghostUser:s,...t}),[...Object.values(t),s]);return(0,n.jsx)(a.Provider,{value:d,children:e})}function s(){let e=(0,l.useContext)(a);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}try{a.displayName||(a.displayName="DiffContext")}catch{}try{o.displayName||(o.displayName="DiffContextProvider")}catch{}},19440:(e,t,i)=>{i.d(t,{K:()=>o,c:()=>a});var n=i(74848),r=i(96540);let l=(0,r.createContext)({diffFindOpen:!1,setDiffFindOpen:()=>void 0});function a({children:e,searchTerm:t,setSearchTerm:i}){let a=(0,r.useRef)(""),[o,s]=(0,r.useState)(!1),d=(0,r.useCallback)(e=>{e&&""===t&&""!==a.current?i(a.current):e||""===t||(a.current=t,i("")),s(e)},[t,i]),c=(0,r.useMemo)(()=>({diffFindOpen:o,setDiffFindOpen:d}),[o,d]);return(0,n.jsx)(l.Provider,{value:c,children:e})}function o(){return(0,r.useContext)(l)}try{l.displayName||(l.displayName="DiffFindOpenContext")}catch{}try{a.displayName||(a.displayName="DiffFindOpenProvider")}catch{}},4561:(e,t,i)=>{i.d(t,{_:()=>a,s:()=>o});var n=i(74848),r=i(96540);let l=(0,r.createContext)(null);function a({children:e,currentHunk:t,diffEntryId:i,diffLine:a,fileAnchor:o,fileLineCount:s,filePath:d,isLeftSide:c,isRowSelected:u,isSplit:f,modifiedLineThreads:h,modifiedLineThreadsConnectionId:m,nextHunk:g,originalLineThreads:p,originalLineThreadsConnectionId:x,previousHunk:y,rowId:b}){let C=(0,r.useMemo)(()=>({currentHunk:t,diffEntryId:i,diffLine:a,fileAnchor:o,fileLineCount:s,filePath:d,isLeftSide:c,isRowSelected:u,isSplit:f,modifiedLineThreads:h,modifiedLineHasThreads:h&&h.length>0,modifiedLineThreadsConnectionId:m,nextHunk:g,originalLineThreads:p,originalLineHasThreads:p&&p.length>0,originalLineThreadsConnectionId:x,previousHunk:y,rowId:b}),[t,i,a,o,s,d,c,u,f,h,m,g,p,x,y,b]);return(0,n.jsx)(l.Provider,{value:C,children:e})}function o(){let e=(0,r.useContext)(l);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}try{l.displayName||(l.displayName="DiffLineContext")}catch{}try{a.displayName||(a.displayName="DiffLineContextProvider")}catch{}},81999:(e,t,i)=>{i.d(t,{M:()=>h,_:()=>m});var n=i(74848),r=i(96540),l=i(99965),a=i(61558),o=i(4561),s=i(81499),d=i(2712);let c="thread",u="annotation",f=(0,r.createContext)(null);function h({children:e,line:t}){let[i,a]=(0,r.useState)(!1),[h,m]=(0,r.useState)(),[p,x]=(0,r.useState)(),[y,b]=(0,r.useState)(),[C,v]=(0,r.useState)(),[N,j]=(0,r.useState)(),{ghostUser:k}=(0,s.y)(),{originalLineThreads:L,modifiedLineThreads:w,originalLineThreadsConnectionId:S,modifiedLineThreadsConnectionId:D}=(0,o.s)(),[A,E]=(0,r.useState)(),{threads:I,threadConnectionId:R}=g({line:t,side:A,originalLineThreads:L,modifiedLineThreads:w,originalLineThreadsConnectionId:S,modifiedLineThreadsConnectionId:D,ghostUser:k}),T=(0,r.useMemo)(()=>!!h||!!p||!!y||!!C,[h,y,p,C]),F=(0,r.useCallback)(()=>{a(!0)},[]),_=(0,r.useCallback)(()=>{a(!1)},[]),M=(0,r.useCallback)(e=>{e?j({id:e,kind:c}):j(void 0)},[]),O=N?.kind===c?N.id:void 0,H=N?.kind===u?N.id:void 0,B=(0,r.useCallback)(e=>{e?j({id:e,kind:u}):j(void 0)},[]),P=(0,r.useCallback)((e,t,i)=>{switch((0,l.e)(),e){case"context-menu":m(t),v(void 0),b(void 0),x(void 0);break;case"new-conversation":v({cellId:t,withSuggestedChange:i?.withSuggestedChange}),m(void 0),b(void 0),x(void 0);break;case"marker-details":b(t),m(void 0),x(void 0),v(void 0);break;case"marker-list":x(t),m(void 0),v(void 0),b(void 0)}},[]),U=(0,r.useCallback)(e=>{switch(e){case"context-menu":m(void 0);break;case"new-conversation":v(void 0);break;case"marker-details":b(void 0);break;case"marker-list":x(void 0)}},[]),$=(0,r.useCallback)(e=>(E(e),g({line:t,side:e,modifiedLineThreads:w,modifiedLineThreadsConnectionId:D,originalLineThreads:L,originalLineThreadsConnectionId:S,ghostUser:k}).threads),[t,w,D,L,S,k]),W=(0,r.useMemo)(()=>t.annotationsData?.annotations?.filter(d.z)??[],[t.annotationsData?.annotations]),K=(0,r.useMemo)(()=>({annotations:W,isActionBarVisible:i,showActionBar:F,hideActionBar:_,selectThreadId:M,selectAnnotationId:B,closeDialog:U,openDialog:P,anyMenuOpen:T,selectedThreadId:O,selectedAnnotationId:H,openContextMenuCell:h,openMarkersListCell:p,openMarkerDetailsCell:y,openNewConversationCell:C,threads:I,updateVisibleThreads:$,threadConnectionId:R}),[W,i,F,_,M,B,U,P,T,O,H,h,p,y,C,I,R,$]);return(0,n.jsx)(f.Provider,{value:K,children:e})}function m(){let e=(0,r.useContext)(f);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}function g({line:e,side:t,originalLineThreads:i,modifiedLineThreads:n,originalLineThreadsConnectionId:r,modifiedLineThreadsConnectionId:l,ghostUser:o}){switch(t){case"LEFT":return{threads:i||[],threadConnectionId:r};case"RIGHT":return{threads:n||[],threadConnectionId:l};case void 0:return{threads:(0,a.F)(e.threadsData,o),threadConnectionId:e.threadsData?.__id};default:return{threads:[],threadConnectionId:void 0}}}try{f.displayName||(f.displayName="MarkersDialogContext")}catch{}try{h.displayName||(h.displayName="MarkersDialogContextProvider")}catch{}},26163:(e,t,i)=>{i.d(t,{Y:()=>m,o:()=>f});var n=i(74848),r=i(37522),l=i(94686),a=i(96540),o=i(62291),s=i(78465),d=i(99555),c=i(69719);let u=(0,a.createContext)(null);function f(){let e=(0,a.useContext)(u);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}function h(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,r.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,r.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function m({children:e}){let t=(0,a.useRef)(new Map),i=(0,d.K)(e=>{if(!e)return;let i=e.diffAnchor,n=t.current.get(i);if(!n)return;let{leftLines:r,rightLines:l}=(0,c.Mk)(n);return(0,o.A)({selectedDiffRowRange:e,leftLines:r,rightLines:l})}),[f,m]=(0,a.useState)(()=>(0,s.ZD)(l.fV.hash)),[g,p]=(0,a.useState)(()=>{if(f){let e=i(f);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),x=(0,d.K)(e=>{let t=i(e);p(t?{leftLines:t.selectedLeftLines,rightLines:t.selectedRightLines||[]}:{leftLines:[],rightLines:[]})}),y=(0,d.K)((e,t,i,n)=>{if(!t||!i)return;let r=n&&f&&f.diffAnchor===e?t<=f.firstSelectedLineNumber?{...f,startLineNumber:t,startOrientation:i,endLineNumber:f.firstSelectedLineNumber,endOrientation:f.firstSelectedOrientation}:{...f,startLineNumber:f.firstSelectedLineNumber,startOrientation:f.firstSelectedOrientation,endLineNumber:t,endOrientation:i}:{diffAnchor:e,endLineNumber:t,endOrientation:i,startLineNumber:t,startOrientation:i,firstSelectedLineNumber:t,firstSelectedOrientation:i};h(r),m(r),x(r),(0,s.i8)(r)}),b=(0,d.K)(e=>{h(e),m(e),x(e),(0,s.i8)(e)}),C=(0,d.K)(({diffAnchor:e,startGridCell:t,endGridCell:i,focusedGridCell:n})=>{b({diffAnchor:e,endLineNumber:i.lineNumber,endOrientation:i.orientation,firstSelectedLineNumber:n.lineNumber,firstSelectedOrientation:n.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),v=(0,d.K)(()=>{f&&(m(void 0),x(void 0),(0,r.i)("Selection Cleared"),history.replaceState({},"",window.location.pathname+window.location.search))}),N=(0,d.K)((e,i)=>{t.current.set(e,i),f?.diffAnchor===e&&x(f)}),j=(0,d.K)(e=>t.current.get(e)),k=(0,a.useMemo)(()=>({selectedDiffRowRange:f,updateSelectedDiffRowRange:y,clearSelectedDiffRowRange:v,replaceSelectedDiffRowRange:b,replaceSelectedDiffRowRangeFromGridCells:C,updateDiffLines:N,selectedDiffLines:g,getDiffLinesFromLineRange:i,getDiffLinesByDiffAnchor:j}),[f,y,v,b,C,g,N,i,j]);return(0,n.jsx)(u.Provider,{value:k,children:e})}try{u.displayName||(u.displayName="SelectedDiffRowRange")}catch{}try{m.displayName||(m.displayName="SelectedDiffRowRangeContextProvider")}catch{}},7305:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n=i(74848),r=i(6978),l=i(65481),a=i(75177),o=i(38553),s=i(69909),d=i(96540),c=i(18676);function u({identityUuid:e,size:t,type:i,url:s}){let[d]=(0,r.I)(()=>window.location.origin,"https://www.github.com",[]),u=new URL(s,d).origin,{renderState:h,errorMsg:m,iFrameRef:g,containerRef:p}=(0,c.Nc)(u);if("ipynb"===i&&t>3e7||t>2e8)return(0,n.jsx)(l.A,{variant:"danger",children:"Sorry, this is too big to display."});let x=h!==c.M_.READY?{height:"1px",width:"1px",position:"fixed",bottom:0,right:0}:{height:"100%",width:"100%"},y={height:c.Uk,padding:0,background:"none"};return(0,n.jsx)(a.A,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,n.jsxs)(a.A,{"data-hpc":!0,"data-host":u,"data-type":i,ref:p,sx:{width:1024,...h!==c.M_.ERROR?{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",lineHeight:"0",padding:5,textAlign:"center"}:{},...h===c.M_.READY?y:{}},children:[h===c.M_.ERROR?(0,n.jsx)(f,{error:m}):h!==c.M_.READY?(0,n.jsx)(o.A,{size:"large",sx:{mx:"auto"}}):null,h!==c.M_.ERROR&&(0,n.jsx)(a.A,{as:"iframe",ref:g,src:`${s}#${e}`,sandbox:"allow-scripts allow-same-origin allow-top-navigation",sx:{border:0,display:"block",...x},name:e,title:"File display",children:"Viewer requires iframe."})]})})}function f({error:e}){if(!e)return(0,n.jsx)(l.A,{variant:"danger",children:"Unable to render code block"});let t=e.split("\n");return(0,n.jsxs)(l.A,{variant:"danger",children:[(0,n.jsx)(s.A,{as:"p",sx:{fontWeight:"bold"},children:"Error rendering embedded code"}),(0,n.jsx)(s.A,{as:"p",children:t.map((e,t)=>(0,n.jsxs)(d.Fragment,{children:[e,(0,n.jsx)("br",{})]},`error-line-${t}`))})]})}try{u.displayName||(u.displayName="FileRendererBlob")}catch{}try{f.displayName||(f.displayName="FileRendererErrorMessage")}catch{}},52294:(e,t,i)=>{i.d(t,{Gy:()=>n,LB:()=>c,lm:()=>d,nn:()=>u});var n,r=i(74848),l=i(70170),a=i(96540);!function(e){e[e.small=1]="small",e[e.medium=544]="medium",e[e.large=768]="large",e[e.xlarge=1012]="xlarge",e[e.xxlarge=1280]="xxlarge",e[e.xxxlarge=1350]="xxxlarge",e[e.xxxxlarge=1440]="xxxxlarge"}(n||(n={}));let o=[1440,1350,1280,1012,768,544,1],s=a.createContext({screenSize:1});function d(){return a.useContext(s)}function c({children:e,initialValue:t}){let i=(0,a.useSyncExternalStore)(()=>()=>{},()=>t??u(window.innerWidth),()=>t??1),n=(0,a.useRef)(i),[o,d]=(0,a.useState)(i),c=(0,a.useCallback)(()=>{let e=u(window.innerWidth);n.current!==e&&(n.current=e,d(e))},[]);(0,a.useEffect)(()=>{let e=new ResizeObserver((0,l.s)(c));return e.observe(document.documentElement),()=>e.disconnect()},[c]);let f=(0,a.useMemo)(()=>({screenSize:o}),[o]);return(0,r.jsx)(s.Provider,{value:f,children:e})}function u(e){for(let t of o)if(e>=t)return t;return 1}try{s.displayName||(s.displayName="ScreenContext")}catch{}try{c.displayName||(c.displayName="ScreenSizeProvider")}catch{}},93246:(e,t,i)=>{i.d(t,{k:()=>o});var n=i(74848),r=i(57402),l=i(75177),a=i(74258);function o({zIndex:e,altText:t,hovercardUrl:i,src:o,square:s,icon:d,iconColor:c,backgroundColor:u,backgroundSx:f,sx:h,size:m=20}){return(0,n.jsxs)(l.A,{sx:{position:"relative",display:"flex",gap:2,alignItems:"center",...e,...h},children:[(0,n.jsx)(r.r,{alt:t,"data-hovercard-url":i,size:m,square:s,src:o}),(0,n.jsx)(a.k,{icon:d,iconColor:c,size:12,backgroundColor:u,backgroundSx:f})]})}try{o.displayName||(o.displayName="StatusAvatar")}catch{}},74258:(e,t,i)=>{i.d(t,{k:()=>a});var n=i(74848),r=i(75177),l=i(30729);function a({iconColor:e,icon:t,size:i=12,backgroundColor:a="fg.onEmphasis",absolute:o=!0,backgroundSx:s}){let d,c;return 12===i?(d="10px",c="1px"):20===i?(d="16px",c="2px"):(d="16px",c="4px"),(0,n.jsxs)(r.A,{sx:{display:"flex",borderRadius:"100px",...o?{position:"absolute",bottom:-1,right:-1,boxShadow:"0 0 0 2px var(--bgColor-default, var(--color-canvas-default))",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))"}:{position:"relative"},...s},children:[(0,n.jsx)(r.A,{sx:{display:"flex",position:"absolute",borderRadius:"100px",width:d,height:d,left:c,top:c,backgroundColor:a}}),(0,n.jsx)(l.A,{icon:t,size:i,sx:{color:e,position:"relative"}})]})}try{a.displayName||(a.displayName="StatusIcon")}catch{}}}]);
//# sourceMappingURL=ui_packages_diff-file-header_diff-file-header_ts-ui_packages_diff-file-tree_diff-file-tree_ts-7f5a83-fb39d9a9cdef.js.map